"use strict";var Fd=Object.defineProperty;var xd=(e,t,r)=>t in e?Fd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var V=(e,t,r)=>xd(e,typeof t!="symbol"?t+"":t,r);const se=require("electron"),Zt=require("node:path"),Le=require("fs"),Ld=require("constants"),qr=require("stream"),Gn=require("util"),hc=require("assert"),K=require("path"),Hr=require("child_process"),Wn=require("events"),Gr=require("crypto"),pc=require("tty"),vt=require("os"),sr=require("url"),Ud=require("string_decoder"),mc=require("zlib"),gc=require("http"),kd=require("https");var Ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Md(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xe={},xt={},Ie={};Ie.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,o)=>i!=null?n(i):r(o)),e.apply(this,t)})},"name",{value:e.name})};Ie.fromPromise=function(e){return Object.defineProperty(function(...t){const r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})};var lt=Ld,jd=process.cwd,$n=null,Bd=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return $n||($n=jd.call(process)),$n};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var js=process.chdir;process.chdir=function(e){$n=null,js.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,js)}var qd=Hd;function Hd(e){lt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,u,h){h&&process.nextTick(h)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,u,h,m){m&&process.nextTick(m)},e.lchownSync=function(){}),Bd==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function u(h,m,w){var E=Date.now(),_=0;c(h,m,function A(b){if(b&&(b.code==="EACCES"||b.code==="EPERM"||b.code==="EBUSY")&&Date.now()-E<6e4){setTimeout(function(){e.stat(m,function(D,x){D&&D.code==="ENOENT"?c(h,m,A):w(b)})},_),_<100&&(_+=10);return}w&&w(b)})}return Object.setPrototypeOf&&Object.setPrototypeOf(u,c),u}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function u(h,m,w,E,_,A){var b;if(A&&typeof A=="function"){var D=0;b=function(x,B,q){if(x&&x.code==="EAGAIN"&&D<10)return D++,c.call(e,h,m,w,E,_,b);A.apply(this,arguments)}}return c.call(e,h,m,w,E,_,b)}return Object.setPrototypeOf&&Object.setPrototypeOf(u,c),u}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(u,h,m,w,E){for(var _=0;;)try{return c.call(e,u,h,m,w,E)}catch(A){if(A.code==="EAGAIN"&&_<10){_++;continue}throw A}}}(e.readSync);function t(c){c.lchmod=function(u,h,m){c.open(u,lt.O_WRONLY|lt.O_SYMLINK,h,function(w,E){if(w){m&&m(w);return}c.fchmod(E,h,function(_){c.close(E,function(A){m&&m(_||A)})})})},c.lchmodSync=function(u,h){var m=c.openSync(u,lt.O_WRONLY|lt.O_SYMLINK,h),w=!0,E;try{E=c.fchmodSync(m,h),w=!1}finally{if(w)try{c.closeSync(m)}catch{}else c.closeSync(m)}return E}}function r(c){lt.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(u,h,m,w){c.open(u,lt.O_SYMLINK,function(E,_){if(E){w&&w(E);return}c.futimes(_,h,m,function(A){c.close(_,function(b){w&&w(A||b)})})})},c.lutimesSync=function(u,h,m){var w=c.openSync(u,lt.O_SYMLINK),E,_=!0;try{E=c.futimesSync(w,h,m),_=!1}finally{if(_)try{c.closeSync(w)}catch{}else c.closeSync(w)}return E}):c.futimes&&(c.lutimes=function(u,h,m,w){w&&process.nextTick(w)},c.lutimesSync=function(){})}function n(c){return c&&function(u,h,m){return c.call(e,u,h,function(w){f(w)&&(w=null),m&&m.apply(this,arguments)})}}function i(c){return c&&function(u,h){try{return c.call(e,u,h)}catch(m){if(!f(m))throw m}}}function o(c){return c&&function(u,h,m,w){return c.call(e,u,h,m,function(E){f(E)&&(E=null),w&&w.apply(this,arguments)})}}function s(c){return c&&function(u,h,m){try{return c.call(e,u,h,m)}catch(w){if(!f(w))throw w}}}function a(c){return c&&function(u,h,m){typeof h=="function"&&(m=h,h=null);function w(E,_){_&&(_.uid<0&&(_.uid+=4294967296),_.gid<0&&(_.gid+=4294967296)),m&&m.apply(this,arguments)}return h?c.call(e,u,h,w):c.call(e,u,w)}}function l(c){return c&&function(u,h){var m=h?c.call(e,u,h):c.call(e,u);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function f(c){if(!c||c.code==="ENOSYS")return!0;var u=!process.getuid||process.getuid()!==0;return!!(u&&(c.code==="EINVAL"||c.code==="EPERM"))}}var Bs=qr.Stream,Gd=Wd;function Wd(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Bs.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,l=s.length;a<l;a++){var f=s[a];this[f]=i[f]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(c,u){if(c){o.emit("error",c),o.readable=!1;return}o.fd=u,o.emit("open",u),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Bs.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var l=o[s];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Vd=Yd,zd=Object.getPrototypeOf||function(e){return e.__proto__};function Yd(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:zd(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}var oe=Le,Xd=qd,Jd=Gd,Kd=Vd,dn=Gn,ve,Dn;typeof Symbol=="function"&&typeof Symbol.for=="function"?(ve=Symbol.for("graceful-fs.queue"),Dn=Symbol.for("graceful-fs.previous")):(ve="___graceful-fs.queue",Dn="___graceful-fs.previous");function Qd(){}function yc(e,t){Object.defineProperty(e,ve,{get:function(){return t}})}var Dt=Qd;dn.debuglog?Dt=dn.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Dt=function(){var e=dn.format.apply(dn,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});if(!oe[ve]){var Zd=Ce[ve]||[];yc(oe,Zd),oe.close=function(e){function t(r,n){return e.call(oe,r,function(i){i||qs(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Dn,{value:e}),t}(oe.close),oe.closeSync=function(e){function t(r){e.apply(oe,arguments),qs()}return Object.defineProperty(t,Dn,{value:e}),t}(oe.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Dt(oe[ve]),hc.equal(oe[ve].length,0)})}Ce[ve]||yc(Ce,oe[ve]);var Pe=Go(Kd(oe));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!oe.__patched&&(Pe=Go(oe),oe.__patched=!0);function Go(e){Xd(e),e.gracefulify=Go,e.createReadStream=B,e.createWriteStream=q;var t=e.readFile;e.readFile=r;function r(y,z,H){return typeof z=="function"&&(H=z,z=null),M(y,z,H);function M(Q,I,$,R){return t(Q,I,function(C){C&&(C.code==="EMFILE"||C.code==="ENFILE")?jt([M,[Q,I,$],C,R||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(y,z,H,M){return typeof H=="function"&&(M=H,H=null),Q(y,z,H,M);function Q(I,$,R,C,N){return n(I,$,R,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?jt([Q,[I,$,R,C],P,N||Date.now(),Date.now()]):typeof C=="function"&&C.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=s);function s(y,z,H,M){return typeof H=="function"&&(M=H,H=null),Q(y,z,H,M);function Q(I,$,R,C,N){return o(I,$,R,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?jt([Q,[I,$,R,C],P,N||Date.now(),Date.now()]):typeof C=="function"&&C.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=l);function l(y,z,H,M){return typeof H=="function"&&(M=H,H=0),Q(y,z,H,M);function Q(I,$,R,C,N){return a(I,$,R,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?jt([Q,[I,$,R,C],P,N||Date.now(),Date.now()]):typeof C=="function"&&C.apply(this,arguments)})}}var f=e.readdir;e.readdir=u;var c=/^v[0-5]\./;function u(y,z,H){typeof z=="function"&&(H=z,z=null);var M=c.test(process.version)?function($,R,C,N){return f($,Q($,R,C,N))}:function($,R,C,N){return f($,R,Q($,R,C,N))};return M(y,z,H);function Q(I,$,R,C){return function(N,P){N&&(N.code==="EMFILE"||N.code==="ENFILE")?jt([M,[I,$,R],N,C||Date.now(),Date.now()]):(P&&P.sort&&P.sort(),typeof R=="function"&&R.call(this,N,P))}}}if(process.version.substr(0,4)==="v0.8"){var h=Jd(e);A=h.ReadStream,D=h.WriteStream}var m=e.ReadStream;m&&(A.prototype=Object.create(m.prototype),A.prototype.open=b);var w=e.WriteStream;w&&(D.prototype=Object.create(w.prototype),D.prototype.open=x),Object.defineProperty(e,"ReadStream",{get:function(){return A},set:function(y){A=y},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return D},set:function(y){D=y},enumerable:!0,configurable:!0});var E=A;Object.defineProperty(e,"FileReadStream",{get:function(){return E},set:function(y){E=y},enumerable:!0,configurable:!0});var _=D;Object.defineProperty(e,"FileWriteStream",{get:function(){return _},set:function(y){_=y},enumerable:!0,configurable:!0});function A(y,z){return this instanceof A?(m.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}function b(){var y=this;ce(y.path,y.flags,y.mode,function(z,H){z?(y.autoClose&&y.destroy(),y.emit("error",z)):(y.fd=H,y.emit("open",H),y.read())})}function D(y,z){return this instanceof D?(w.apply(this,arguments),this):D.apply(Object.create(D.prototype),arguments)}function x(){var y=this;ce(y.path,y.flags,y.mode,function(z,H){z?(y.destroy(),y.emit("error",z)):(y.fd=H,y.emit("open",H))})}function B(y,z){return new e.ReadStream(y,z)}function q(y,z){return new e.WriteStream(y,z)}var j=e.open;e.open=ce;function ce(y,z,H,M){return typeof H=="function"&&(M=H,H=null),Q(y,z,H,M);function Q(I,$,R,C,N){return j(I,$,R,function(P,k){P&&(P.code==="EMFILE"||P.code==="ENFILE")?jt([Q,[I,$,R,C],P,N||Date.now(),Date.now()]):typeof C=="function"&&C.apply(this,arguments)})}}return e}function jt(e){Dt("ENQUEUE",e[0].name,e[1]),oe[ve].push(e),Wo()}var hn;function qs(){for(var e=Date.now(),t=0;t<oe[ve].length;++t)oe[ve][t].length>2&&(oe[ve][t][3]=e,oe[ve][t][4]=e);Wo()}function Wo(){if(clearTimeout(hn),hn=void 0,oe[ve].length!==0){var e=oe[ve].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)Dt("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){Dt("TIMEOUT",t.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,l=Math.max(o-i,1),f=Math.min(l*1.2,100);a>=f?(Dt("RETRY",t.name,r),t.apply(null,r.concat([i]))):oe[ve].push(e)}hn===void 0&&(hn=setTimeout(Wo,0))}}(function(e){const t=Ie.fromCallback,r=Pe,n=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof r[i]=="function");Object.assign(e,r),n.forEach(i=>{e[i]=t(r[i])}),e.exists=function(i,o){return typeof o=="function"?r.exists(i,o):new Promise(s=>r.exists(i,s))},e.read=function(i,o,s,a,l,f){return typeof f=="function"?r.read(i,o,s,a,l,f):new Promise((c,u)=>{r.read(i,o,s,a,l,(h,m,w)=>{if(h)return u(h);c({bytesRead:m,buffer:w})})})},e.write=function(i,o,...s){return typeof s[s.length-1]=="function"?r.write(i,o,...s):new Promise((a,l)=>{r.write(i,o,...s,(f,c,u)=>{if(f)return l(f);a({bytesWritten:c,buffer:u})})})},typeof r.writev=="function"&&(e.writev=function(i,o,...s){return typeof s[s.length-1]=="function"?r.writev(i,o,...s):new Promise((a,l)=>{r.writev(i,o,...s,(f,c,u)=>{if(f)return l(f);a({bytesWritten:c,buffers:u})})})}),typeof r.realpath.native=="function"?e.realpath.native=t(r.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(xt);var Vo={},Ec={};const eh=K;Ec.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(eh.parse(t).root,""))){const n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}};const vc=xt,{checkPath:wc}=Ec,_c=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Vo.makeDir=async(e,t)=>(wc(e),vc.mkdir(e,{mode:_c(t),recursive:!0}));Vo.makeDirSync=(e,t)=>(wc(e),vc.mkdirSync(e,{mode:_c(t),recursive:!0}));const th=Ie.fromPromise,{makeDir:rh,makeDirSync:Ai}=Vo,bi=th(rh);var Qe={mkdirs:bi,mkdirsSync:Ai,mkdirp:bi,mkdirpSync:Ai,ensureDir:bi,ensureDirSync:Ai};const nh=Ie.fromPromise,Sc=xt;function ih(e){return Sc.access(e).then(()=>!0).catch(()=>!1)}var Lt={pathExists:nh(ih),pathExistsSync:Sc.existsSync};const er=Pe;function oh(e,t,r,n){er.open(e,"r+",(i,o)=>{if(i)return n(i);er.futimes(o,t,r,s=>{er.close(o,a=>{n&&n(s||a)})})})}function sh(e,t,r){const n=er.openSync(e,"r+");return er.futimesSync(n,t,r),er.closeSync(n)}var Ac={utimesMillis:oh,utimesMillisSync:sh};const rr=xt,me=K,ah=Gn;function lh(e,t,r){const n=r.dereference?i=>rr.stat(i,{bigint:!0}):i=>rr.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function ch(e,t,r){let n;const i=r.dereference?s=>rr.statSync(s,{bigint:!0}):s=>rr.lstatSync(s,{bigint:!0}),o=i(e);try{n=i(t)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:n}}function uh(e,t,r,n,i){ah.callbackify(lh)(e,t,n,(o,s)=>{if(o)return i(o);const{srcStat:a,destStat:l}=s;if(l){if(Wr(a,l)){const f=me.basename(e),c=me.basename(t);return r==="move"&&f!==c&&f.toLowerCase()===c.toLowerCase()?i(null,{srcStat:a,destStat:l,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!l.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!a.isDirectory()&&l.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return a.isDirectory()&&zo(e,t)?i(new Error(Vn(e,t,r))):i(null,{srcStat:a,destStat:l})})}function fh(e,t,r,n){const{srcStat:i,destStat:o}=ch(e,t,n);if(o){if(Wr(i,o)){const s=me.basename(e),a=me.basename(t);if(r==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&zo(e,t))throw new Error(Vn(e,t,r));return{srcStat:i,destStat:o}}function bc(e,t,r,n,i){const o=me.resolve(me.dirname(e)),s=me.resolve(me.dirname(r));if(s===o||s===me.parse(s).root)return i();rr.stat(s,{bigint:!0},(a,l)=>a?a.code==="ENOENT"?i():i(a):Wr(t,l)?i(new Error(Vn(e,r,n))):bc(e,t,s,n,i))}function Tc(e,t,r,n){const i=me.resolve(me.dirname(e)),o=me.resolve(me.dirname(r));if(o===i||o===me.parse(o).root)return;let s;try{s=rr.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Wr(t,s))throw new Error(Vn(e,r,n));return Tc(e,t,o,n)}function Wr(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function zo(e,t){const r=me.resolve(e).split(me.sep).filter(i=>i),n=me.resolve(t).split(me.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function Vn(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}var ar={checkPaths:uh,checkPathsSync:fh,checkParentPaths:bc,checkParentPathsSync:Tc,isSrcSubdir:zo,areIdentical:Wr};const Ne=Pe,$r=K,dh=Qe.mkdirs,hh=Lt.pathExists,ph=Ac.utimesMillis,Or=ar;function mh(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Or.checkPaths(e,t,"copy",r,(i,o)=>{if(i)return n(i);const{srcStat:s,destStat:a}=o;Or.checkParentPaths(e,s,t,"copy",l=>l?n(l):r.filter?Cc(Hs,a,e,t,r,n):Hs(a,e,t,r,n))})}function Hs(e,t,r,n,i){const o=$r.dirname(r);hh(o,(s,a)=>{if(s)return i(s);if(a)return Nn(e,t,r,n,i);dh(o,l=>l?i(l):Nn(e,t,r,n,i))})}function Cc(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?e(t,r,n,i,o):o(),s=>o(s))}function gh(e,t,r,n,i){return n.filter?Cc(Nn,e,t,r,n,i):Nn(e,t,r,n,i)}function Nn(e,t,r,n,i){(n.dereference?Ne.stat:Ne.lstat)(t,(s,a)=>s?i(s):a.isDirectory()?Ah(a,e,t,r,n,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?yh(a,e,t,r,n,i):a.isSymbolicLink()?Ch(e,t,r,n,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function yh(e,t,r,n,i,o){return t?Eh(e,r,n,i,o):$c(e,r,n,i,o)}function Eh(e,t,r,n,i){if(n.overwrite)Ne.unlink(r,o=>o?i(o):$c(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function $c(e,t,r,n,i){Ne.copyFile(t,r,o=>o?i(o):n.preserveTimestamps?vh(e.mode,t,r,i):zn(r,e.mode,i))}function vh(e,t,r,n){return wh(e)?_h(r,e,i=>i?n(i):Gs(e,t,r,n)):Gs(e,t,r,n)}function wh(e){return(e&128)===0}function _h(e,t,r){return zn(e,t|128,r)}function Gs(e,t,r,n){Sh(t,r,i=>i?n(i):zn(r,e,n))}function zn(e,t,r){return Ne.chmod(e,t,r)}function Sh(e,t,r){Ne.stat(e,(n,i)=>n?r(n):ph(t,i.atime,i.mtime,r))}function Ah(e,t,r,n,i,o){return t?Oc(r,n,i,o):bh(e.mode,r,n,i,o)}function bh(e,t,r,n,i){Ne.mkdir(r,o=>{if(o)return i(o);Oc(t,r,n,s=>s?i(s):zn(r,e,i))})}function Oc(e,t,r,n){Ne.readdir(e,(i,o)=>i?n(i):Ic(o,e,t,r,n))}function Ic(e,t,r,n,i){const o=e.pop();return o?Th(e,o,t,r,n,i):i()}function Th(e,t,r,n,i,o){const s=$r.join(r,t),a=$r.join(n,t);Or.checkPaths(s,a,"copy",i,(l,f)=>{if(l)return o(l);const{destStat:c}=f;gh(c,s,a,i,u=>u?o(u):Ic(e,r,n,i,o))})}function Ch(e,t,r,n,i){Ne.readlink(t,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=$r.resolve(process.cwd(),s)),e)Ne.readlink(r,(a,l)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?Ne.symlink(s,r,i):i(a):(n.dereference&&(l=$r.resolve(process.cwd(),l)),Or.isSrcSubdir(s,l)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&Or.isSrcSubdir(l,s)?i(new Error(`Cannot overwrite '${l}' with '${s}'.`)):$h(s,r,i)));else return Ne.symlink(s,r,i)})}function $h(e,t,r){Ne.unlink(t,n=>n?r(n):Ne.symlink(e,t,r))}var Oh=mh;const Ae=Pe,Ir=K,Ih=Qe.mkdirsSync,Ph=Ac.utimesMillisSync,Pr=ar;function Rh(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:n,destStat:i}=Pr.checkPathsSync(e,t,"copy",r);return Pr.checkParentPathsSync(e,n,t,"copy"),Dh(i,e,t,r)}function Dh(e,t,r,n){if(n.filter&&!n.filter(t,r))return;const i=Ir.dirname(r);return Ae.existsSync(i)||Ih(i),Pc(e,t,r,n)}function Nh(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return Pc(e,t,r,n)}function Pc(e,t,r,n){const o=(n.dereference?Ae.statSync:Ae.lstatSync)(t);if(o.isDirectory())return jh(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Fh(o,e,t,r,n);if(o.isSymbolicLink())return Hh(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Fh(e,t,r,n,i){return t?xh(e,r,n,i):Rc(e,r,n,i)}function xh(e,t,r,n){if(n.overwrite)return Ae.unlinkSync(r),Rc(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Rc(e,t,r,n){return Ae.copyFileSync(t,r),n.preserveTimestamps&&Lh(e.mode,t,r),Yo(r,e.mode)}function Lh(e,t,r){return Uh(e)&&kh(r,e),Mh(t,r)}function Uh(e){return(e&128)===0}function kh(e,t){return Yo(e,t|128)}function Yo(e,t){return Ae.chmodSync(e,t)}function Mh(e,t){const r=Ae.statSync(e);return Ph(t,r.atime,r.mtime)}function jh(e,t,r,n,i){return t?Dc(r,n,i):Bh(e.mode,r,n,i)}function Bh(e,t,r,n){return Ae.mkdirSync(r),Dc(t,r,n),Yo(r,e)}function Dc(e,t,r){Ae.readdirSync(e).forEach(n=>qh(n,e,t,r))}function qh(e,t,r,n){const i=Ir.join(t,e),o=Ir.join(r,e),{destStat:s}=Pr.checkPathsSync(i,o,"copy",n);return Nh(s,i,o,n)}function Hh(e,t,r,n){let i=Ae.readlinkSync(t);if(n.dereference&&(i=Ir.resolve(process.cwd(),i)),e){let o;try{o=Ae.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return Ae.symlinkSync(i,r);throw s}if(n.dereference&&(o=Ir.resolve(process.cwd(),o)),Pr.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(Ae.statSync(r).isDirectory()&&Pr.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return Gh(i,r)}else return Ae.symlinkSync(i,r)}function Gh(e,t){return Ae.unlinkSync(t),Ae.symlinkSync(e,t)}var Wh=Rh;const Vh=Ie.fromCallback;var Xo={copy:Vh(Oh),copySync:Wh};const Ws=Pe,Nc=K,ee=hc,Rr=process.platform==="win32";function Fc(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Ws[r],r=r+"Sync",e[r]=e[r]||Ws[r]}),e.maxBusyTries=e.maxBusyTries||3}function Jo(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),ee(e,"rimraf: missing path"),ee.strictEqual(typeof e,"string","rimraf: path should be a string"),ee.strictEqual(typeof r,"function","rimraf: callback function required"),ee(t,"rimraf: invalid options argument provided"),ee.strictEqual(typeof t,"object","rimraf: options should be object"),Fc(t),Vs(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;const s=n*100;return setTimeout(()=>Vs(e,t,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function Vs(e,t,r){ee(e),ee(t),ee(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Rr)return zs(e,t,n,r);if(i&&i.isDirectory())return On(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return Rr?zs(e,t,o,r):On(e,t,o,r);if(o.code==="EISDIR")return On(e,t,o,r)}return r(o)})})}function zs(e,t,r,n){ee(e),ee(t),ee(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?On(e,t,r,n):t.unlink(e,n)})})}function Ys(e,t,r){let n;ee(e),ee(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?In(e,t,r):t.unlinkSync(e)}function On(e,t,r,n){ee(e),ee(t),ee(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?zh(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function zh(e,t,r){ee(e),ee(t),ee(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return t.rmdir(e,r);i.forEach(a=>{Jo(Nc.join(e,a),t,l=>{if(!s){if(l)return r(s=l);--o===0&&t.rmdir(e,r)}})})})}function xc(e,t){let r;t=t||{},Fc(t),ee(e,"rimraf: missing path"),ee.strictEqual(typeof e,"string","rimraf: path should be a string"),ee(t,"rimraf: missing options"),ee.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&Rr&&Ys(e,t,n)}try{r&&r.isDirectory()?In(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return Rr?Ys(e,t,n):In(e,t,n);if(n.code!=="EISDIR")throw n;In(e,t,n)}}function In(e,t,r){ee(e),ee(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Yh(e,t);else if(n.code!=="ENOENT")throw n}}function Yh(e,t){if(ee(e),ee(t),t.readdirSync(e).forEach(r=>xc(Nc.join(e,r),t)),Rr){const r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}var Xh=Jo;Jo.sync=xc;const Fn=Pe,Jh=Ie.fromCallback,Lc=Xh;function Kh(e,t){if(Fn.rm)return Fn.rm(e,{recursive:!0,force:!0},t);Lc(e,t)}function Qh(e){if(Fn.rmSync)return Fn.rmSync(e,{recursive:!0,force:!0});Lc.sync(e)}var Yn={remove:Jh(Kh),removeSync:Qh};const Zh=Ie.fromPromise,Uc=xt,kc=K,Mc=Qe,jc=Yn,Xs=Zh(async function(t){let r;try{r=await Uc.readdir(t)}catch{return Mc.mkdirs(t)}return Promise.all(r.map(n=>jc.remove(kc.join(t,n))))});function Js(e){let t;try{t=Uc.readdirSync(e)}catch{return Mc.mkdirsSync(e)}t.forEach(r=>{r=kc.join(e,r),jc.removeSync(r)})}var ep={emptyDirSync:Js,emptydirSync:Js,emptyDir:Xs,emptydir:Xs};const tp=Ie.fromCallback,Bc=K,ft=Pe,qc=Qe;function rp(e,t){function r(){ft.writeFile(e,"",n=>{if(n)return t(n);t()})}ft.stat(e,(n,i)=>{if(!n&&i.isFile())return t();const o=Bc.dirname(e);ft.stat(o,(s,a)=>{if(s)return s.code==="ENOENT"?qc.mkdirs(o,l=>{if(l)return t(l);r()}):t(s);a.isDirectory()?r():ft.readdir(o,l=>{if(l)return t(l)})})})}function np(e){let t;try{t=ft.statSync(e)}catch{}if(t&&t.isFile())return;const r=Bc.dirname(e);try{ft.statSync(r).isDirectory()||ft.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")qc.mkdirsSync(r);else throw n}ft.writeFileSync(e,"")}var ip={createFile:tp(rp),createFileSync:np};const op=Ie.fromCallback,Hc=K,ut=Pe,Gc=Qe,sp=Lt.pathExists,{areIdentical:Wc}=ar;function ap(e,t,r){function n(i,o){ut.link(i,o,s=>{if(s)return r(s);r(null)})}ut.lstat(t,(i,o)=>{ut.lstat(e,(s,a)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);if(o&&Wc(a,o))return r(null);const l=Hc.dirname(t);sp(l,(f,c)=>{if(f)return r(f);if(c)return n(e,t);Gc.mkdirs(l,u=>{if(u)return r(u);n(e,t)})})})})}function lp(e,t){let r;try{r=ut.lstatSync(t)}catch{}try{const o=ut.lstatSync(e);if(r&&Wc(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}const n=Hc.dirname(t);return ut.existsSync(n)||Gc.mkdirsSync(n),ut.linkSync(e,t)}var cp={createLink:op(ap),createLinkSync:lp};const dt=K,Ar=Pe,up=Lt.pathExists;function fp(e,t,r){if(dt.isAbsolute(e))return Ar.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{const n=dt.dirname(t),i=dt.join(n,e);return up(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:e}):Ar.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:e,toDst:dt.relative(n,e)})))}}function dp(e,t){let r;if(dt.isAbsolute(e)){if(r=Ar.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{const n=dt.dirname(t),i=dt.join(n,e);if(r=Ar.existsSync(i),r)return{toCwd:i,toDst:e};if(r=Ar.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:dt.relative(n,e)}}}var hp={symlinkPaths:fp,symlinkPathsSync:dp};const Vc=Pe;function pp(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);Vc.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function mp(e,t){let r;if(t)return t;try{r=Vc.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}var gp={symlinkType:pp,symlinkTypeSync:mp};const yp=Ie.fromCallback,zc=K,He=xt,Yc=Qe,Ep=Yc.mkdirs,vp=Yc.mkdirsSync,Xc=hp,wp=Xc.symlinkPaths,_p=Xc.symlinkPathsSync,Jc=gp,Sp=Jc.symlinkType,Ap=Jc.symlinkTypeSync,bp=Lt.pathExists,{areIdentical:Kc}=ar;function Tp(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,He.lstat(t,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([He.stat(e),He.stat(t)]).then(([s,a])=>{if(Kc(s,a))return n(null);Ks(e,t,r,n)}):Ks(e,t,r,n)})}function Ks(e,t,r,n){wp(e,t,(i,o)=>{if(i)return n(i);e=o.toDst,Sp(o.toCwd,r,(s,a)=>{if(s)return n(s);const l=zc.dirname(t);bp(l,(f,c)=>{if(f)return n(f);if(c)return He.symlink(e,t,a,n);Ep(l,u=>{if(u)return n(u);He.symlink(e,t,a,n)})})})})}function Cp(e,t,r){let n;try{n=He.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){const a=He.statSync(e),l=He.statSync(t);if(Kc(a,l))return}const i=_p(e,t);e=i.toDst,r=Ap(i.toCwd,r);const o=zc.dirname(t);return He.existsSync(o)||vp(o),He.symlinkSync(e,t,r)}var $p={createSymlink:yp(Tp),createSymlinkSync:Cp};const{createFile:Qs,createFileSync:Zs}=ip,{createLink:ea,createLinkSync:ta}=cp,{createSymlink:ra,createSymlinkSync:na}=$p;var Op={createFile:Qs,createFileSync:Zs,ensureFile:Qs,ensureFileSync:Zs,createLink:ea,createLinkSync:ta,ensureLink:ea,ensureLinkSync:ta,createSymlink:ra,createSymlinkSync:na,ensureSymlink:ra,ensureSymlinkSync:na};function Ip(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){const o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o}function Pp(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var Ko={stringify:Ip,stripBom:Pp};let nr;try{nr=Pe}catch{nr=Le}const Xn=Ie,{stringify:Qc,stripBom:Zc}=Ko;async function Rp(e,t={}){typeof t=="string"&&(t={encoding:t});const r=t.fs||nr,n="throws"in t?t.throws:!0;let i=await Xn.fromCallback(r.readFile)(e,t);i=Zc(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(s){if(n)throw s.message=`${e}: ${s.message}`,s;return null}return o}const Dp=Xn.fromPromise(Rp);function Np(e,t={}){typeof t=="string"&&(t={encoding:t});const r=t.fs||nr,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=Zc(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function Fp(e,t,r={}){const n=r.fs||nr,i=Qc(t,r);await Xn.fromCallback(n.writeFile)(e,i,r)}const xp=Xn.fromPromise(Fp);function Lp(e,t,r={}){const n=r.fs||nr,i=Qc(t,r);return n.writeFileSync(e,i,r)}const Up={readFile:Dp,readFileSync:Np,writeFile:xp,writeFileSync:Lp};var kp=Up;const pn=kp;var Mp={readJson:pn.readFile,readJsonSync:pn.readFileSync,writeJson:pn.writeFile,writeJsonSync:pn.writeFileSync};const jp=Ie.fromCallback,br=Pe,eu=K,tu=Qe,Bp=Lt.pathExists;function qp(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");const i=eu.dirname(e);Bp(i,(o,s)=>{if(o)return n(o);if(s)return br.writeFile(e,t,r,n);tu.mkdirs(i,a=>{if(a)return n(a);br.writeFile(e,t,r,n)})})}function Hp(e,...t){const r=eu.dirname(e);if(br.existsSync(r))return br.writeFileSync(e,...t);tu.mkdirsSync(r),br.writeFileSync(e,...t)}var Qo={outputFile:jp(qp),outputFileSync:Hp};const{stringify:Gp}=Ko,{outputFile:Wp}=Qo;async function Vp(e,t,r={}){const n=Gp(t,r);await Wp(e,n,r)}var zp=Vp;const{stringify:Yp}=Ko,{outputFileSync:Xp}=Qo;function Jp(e,t,r){const n=Yp(t,r);Xp(e,n,r)}var Kp=Jp;const Qp=Ie.fromPromise,Oe=Mp;Oe.outputJson=Qp(zp);Oe.outputJsonSync=Kp;Oe.outputJSON=Oe.outputJson;Oe.outputJSONSync=Oe.outputJsonSync;Oe.writeJSON=Oe.writeJson;Oe.writeJSONSync=Oe.writeJsonSync;Oe.readJSON=Oe.readJson;Oe.readJSONSync=Oe.readJsonSync;var Zp=Oe;const em=Pe,Oo=K,tm=Xo.copy,ru=Yn.remove,rm=Qe.mkdirp,nm=Lt.pathExists,ia=ar;function im(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};const i=r.overwrite||r.clobber||!1;ia.checkPaths(e,t,"move",r,(o,s)=>{if(o)return n(o);const{srcStat:a,isChangingCase:l=!1}=s;ia.checkParentPaths(e,a,t,"move",f=>{if(f)return n(f);if(om(t))return oa(e,t,i,l,n);rm(Oo.dirname(t),c=>c?n(c):oa(e,t,i,l,n))})})}function om(e){const t=Oo.dirname(e);return Oo.parse(t).root===t}function oa(e,t,r,n,i){if(n)return Ti(e,t,r,i);if(r)return ru(t,o=>o?i(o):Ti(e,t,r,i));nm(t,(o,s)=>o?i(o):s?i(new Error("dest already exists.")):Ti(e,t,r,i))}function Ti(e,t,r,n){em.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):sm(e,t,r,n):n())}function sm(e,t,r,n){tm(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):ru(e,n))}var am=im;const nu=Pe,Io=K,lm=Xo.copySync,iu=Yn.removeSync,cm=Qe.mkdirpSync,sa=ar;function um(e,t,r){r=r||{};const n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=sa.checkPathsSync(e,t,"move",r);return sa.checkParentPathsSync(e,i,t,"move"),fm(t)||cm(Io.dirname(t)),dm(e,t,n,o)}function fm(e){const t=Io.dirname(e);return Io.parse(t).root===t}function dm(e,t,r,n){if(n)return Ci(e,t,r);if(r)return iu(t),Ci(e,t,r);if(nu.existsSync(t))throw new Error("dest already exists.");return Ci(e,t,r)}function Ci(e,t,r){try{nu.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return hm(e,t,r)}}function hm(e,t,r){return lm(e,t,{overwrite:r,errorOnExist:!0}),iu(e)}var pm=um;const mm=Ie.fromCallback;var gm={move:mm(am),moveSync:pm},wt={...xt,...Xo,...ep,...Op,...Zp,...Qe,...gm,...Qo,...Lt,...Yn},nt={},pt={},ge={},mt={};Object.defineProperty(mt,"__esModule",{value:!0});mt.CancellationError=mt.CancellationToken=void 0;const ym=Wn;class Em extends ym.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(t){this.removeParentCancelHandler(),this._parent=t,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(t){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,t!=null&&(this.parent=t)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(t){this.cancelled?t():this.once("cancel",t)}createPromise(t){if(this.cancelled)return Promise.reject(new Po);const r=()=>{if(n!=null)try{this.removeListener("cancel",n),n=null}catch{}};let n=null;return new Promise((i,o)=>{let s=null;if(n=()=>{try{s!=null&&(s(),s=null)}finally{o(new Po)}},this.cancelled){n();return}this.onCancel(n),t(i,o,a=>{s=a})}).then(i=>(r(),i)).catch(i=>{throw r(),i})}removeParentCancelHandler(){const t=this._parent;t!=null&&this.parentCancelHandler!=null&&(t.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}}mt.CancellationToken=Em;class Po extends Error{constructor(){super("cancelled")}}mt.CancellationError=Po;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.newError=vm;function vm(e,t){const r=new Error(e);return r.code=t,r}var $e={},Ro={exports:{}},mn={exports:{}},$i,aa;function wm(){if(aa)return $i;aa=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,o=n*365.25;$i=function(c,u){u=u||{};var h=typeof c;if(h==="string"&&c.length>0)return s(c);if(h==="number"&&isFinite(c))return u.long?l(c):a(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function s(c){if(c=String(c),!(c.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(u){var h=parseFloat(u[1]),m=(u[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return h*o;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(c){var u=Math.abs(c);return u>=n?Math.round(c/n)+"d":u>=r?Math.round(c/r)+"h":u>=t?Math.round(c/t)+"m":u>=e?Math.round(c/e)+"s":c+"ms"}function l(c){var u=Math.abs(c);return u>=n?f(c,u,n,"day"):u>=r?f(c,u,r,"hour"):u>=t?f(c,u,t,"minute"):u>=e?f(c,u,e,"second"):c+" ms"}function f(c,u,h,m){var w=u>=h*1.5;return Math.round(c/h)+" "+m+(w?"s":"")}return $i}var Oi,la;function ou(){if(la)return Oi;la=1;function e(t){n.debug=n,n.default=n,n.coerce=f,n.disable=a,n.enable=o,n.enabled=l,n.humanize=wm(),n.destroy=c,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function r(u){let h=0;for(let m=0;m<u.length;m++)h=(h<<5)-h+u.charCodeAt(m),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=r;function n(u){let h,m=null,w,E;function _(...A){if(!_.enabled)return;const b=_,D=Number(new Date),x=D-(h||D);b.diff=x,b.prev=h,b.curr=D,h=D,A[0]=n.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let B=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(j,ce)=>{if(j==="%%")return"%";B++;const y=n.formatters[ce];if(typeof y=="function"){const z=A[B];j=y.call(b,z),A.splice(B,1),B--}return j}),n.formatArgs.call(b,A),(b.log||n.log).apply(b,A)}return _.namespace=u,_.useColors=n.useColors(),_.color=n.selectColor(u),_.extend=i,_.destroy=n.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(w!==n.namespaces&&(w=n.namespaces,E=n.enabled(u)),E),set:A=>{m=A}}),typeof n.init=="function"&&n.init(_),_}function i(u,h){const m=n(this.namespace+(typeof h>"u"?":":h)+u);return m.log=this.log,m}function o(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];const h=(typeof u=="string"?u:"").trim().replace(" ",",").split(",").filter(Boolean);for(const m of h)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function s(u,h){let m=0,w=0,E=-1,_=0;for(;m<u.length;)if(w<h.length&&(h[w]===u[m]||h[w]==="*"))h[w]==="*"?(E=w,_=m,w++):(m++,w++);else if(E!==-1)w=E+1,_++,m=_;else return!1;for(;w<h.length&&h[w]==="*";)w++;return w===h.length}function a(){const u=[...n.names,...n.skips.map(h=>"-"+h)].join(",");return n.enable(""),u}function l(u){for(const h of n.skips)if(s(u,h))return!1;for(const h of n.names)if(s(u,h))return!0;return!1}function f(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Oi=e,Oi}var ca;function _m(){return ca||(ca=1,function(e,t){t.formatArgs=n,t.save=i,t.load=o,t.useColors=r,t.storage=s(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;l.splice(1,0,f,"color: inherit");let c=0,u=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(c++,h==="%c"&&(u=c))}),l.splice(u,0,f)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function o(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=ou()(t);const{formatters:a}=e.exports;a.j=function(l){try{return JSON.stringify(l)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}(mn,mn.exports)),mn.exports}var gn={exports:{}},Ii,ua;function Sm(){return ua||(ua=1,Ii=(e,t=process.argv)=>{const r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}),Ii}var Pi,fa;function Am(){if(fa)return Pi;fa=1;const e=vt,t=pc,r=Sm(),{env:n}=process;let i;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?i=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(i=1),"FORCE_COLOR"in n&&(n.FORCE_COLOR==="true"?i=1:n.FORCE_COLOR==="false"?i=0:i=n.FORCE_COLOR.length===0?1:Math.min(parseInt(n.FORCE_COLOR,10),3));function o(l){return l===0?!1:{level:l,hasBasic:!0,has256:l>=2,has16m:l>=3}}function s(l,f){if(i===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(l&&!f&&i===void 0)return 0;const c=i||0;if(n.TERM==="dumb")return c;if(process.platform==="win32"){const u=e.release().split(".");return Number(u[0])>=10&&Number(u[2])>=10586?Number(u[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(u=>u in n)||n.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if(n.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in n){const u=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return u>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:c}function a(l){const f=s(l,l&&l.isTTY);return o(f)}return Pi={supportsColor:a,stdout:o(s(!0,t.isatty(1))),stderr:o(s(!0,t.isatty(2)))},Pi}var da;function bm(){return da||(da=1,function(e,t){const r=pc,n=Gn;t.init=c,t.log=a,t.formatArgs=o,t.save=l,t.load=f,t.useColors=i,t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const h=Am();h&&(h.stderr||h).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(h=>/^debug_/i.test(h)).reduce((h,m)=>{const w=m.substring(6).toLowerCase().replace(/_([a-z])/g,(_,A)=>A.toUpperCase());let E=process.env[m];return/^(yes|on|true|enabled)$/i.test(E)?E=!0:/^(no|off|false|disabled)$/i.test(E)?E=!1:E==="null"?E=null:E=Number(E),h[w]=E,h},{});function i(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:r.isatty(process.stderr.fd)}function o(h){const{namespace:m,useColors:w}=this;if(w){const E=this.color,_="\x1B[3"+(E<8?E:"8;5;"+E),A=`  ${_};1m${m} \x1B[0m`;h[0]=A+h[0].split(`
`).join(`
`+A),h.push(_+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else h[0]=s()+m+" "+h[0]}function s(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function a(...h){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...h)+`
`)}function l(h){h?process.env.DEBUG=h:delete process.env.DEBUG}function f(){return process.env.DEBUG}function c(h){h.inspectOpts={};const m=Object.keys(t.inspectOpts);for(let w=0;w<m.length;w++)h.inspectOpts[m[w]]=t.inspectOpts[m[w]]}e.exports=ou()(t);const{formatters:u}=e.exports;u.o=function(h){return this.inspectOpts.colors=this.useColors,n.inspect(h,this.inspectOpts).split(`
`).map(m=>m.trim()).join(" ")},u.O=function(h){return this.inspectOpts.colors=this.useColors,n.inspect(h,this.inspectOpts)}}(gn,gn.exports)),gn.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ro.exports=_m():Ro.exports=bm();var Tm=Ro.exports,Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.ProgressCallbackTransform=void 0;const Cm=qr;class $m extends Cm.Transform{constructor(t,r,n){super(),this.total=t,this.cancellationToken=r,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(t,r,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=i+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),n(null,t)}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,t(null)}}Vr.ProgressCallbackTransform=$m;Object.defineProperty($e,"__esModule",{value:!0});$e.DigestTransform=$e.HttpExecutor=$e.HttpError=void 0;$e.createHttpError=Do;$e.parseJson=xm;$e.configureRequestOptionsFromUrl=au;$e.configureRequestUrl=es;$e.safeGetHeader=tr;$e.configureRequestOptions=Ln;$e.safeStringifyJson=Un;const Om=Gr,Im=Tm,Pm=Le,Rm=qr,su=sr,Dm=mt,ha=lr,Nm=Vr,gr=(0,Im.default)("electron-builder");function Do(e,t=null){return new Zo(e.statusCode||-1,`${e.statusCode} ${e.statusMessage}`+(t==null?"":`
`+JSON.stringify(t,null,"  "))+`
Headers: `+Un(e.headers),t)}const Fm=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class Zo extends Error{constructor(t,r=`HTTP error: ${Fm.get(t)||t}`,n=null){super(r),this.statusCode=t,this.description=n,this.name="HttpError",this.code=`HTTP_ERROR_${t}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}$e.HttpError=Zo;function xm(e){return e.then(t=>t==null||t.length===0?null:JSON.parse(t))}class xn{constructor(){this.maxRedirects=10}request(t,r=new Dm.CancellationToken,n){Ln(t);const i=n==null?void 0:JSON.stringify(n),o=i?Buffer.from(i):void 0;if(o!=null){gr(i);const{headers:s,...a}=t;t={method:"post",headers:{"Content-Type":"application/json","Content-Length":o.length,...s},...a}}return this.doApiRequest(t,r,s=>s.end(o))}doApiRequest(t,r,n,i=0){return gr.enabled&&gr(`Request: ${Un(t)}`),r.createPromise((o,s,a)=>{const l=this.createRequest(t,f=>{try{this.handleResponse(f,t,r,o,s,i,n)}catch(c){s(c)}});this.addErrorAndTimeoutHandlers(l,s,t.timeout),this.addRedirectHandlers(l,t,s,i,f=>{this.doApiRequest(f,r,n,i).then(o).catch(s)}),n(l,s),a(()=>l.abort())})}addRedirectHandlers(t,r,n,i,o){}addErrorAndTimeoutHandlers(t,r,n=60*1e3){this.addTimeOutHandler(t,r,n),t.on("error",r),t.on("aborted",()=>{r(new Error("Request has been aborted by the server"))})}handleResponse(t,r,n,i,o,s,a){var l;if(gr.enabled&&gr(`Response: ${t.statusCode} ${t.statusMessage}, request options: ${Un(r)}`),t.statusCode===404){o(Do(t,`method: ${r.method||"GET"} url: ${r.protocol||"https:"}//${r.hostname}${r.port?`:${r.port}`:""}${r.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(t.statusCode===204){i();return}const f=(l=t.statusCode)!==null&&l!==void 0?l:0,c=f>=300&&f<400,u=tr(t,"location");if(c&&u!=null){if(s>this.maxRedirects){o(this.createMaxRedirectError());return}this.doApiRequest(xn.prepareRedirectUrlOptions(u,r),n,a,s).then(i).catch(o);return}t.setEncoding("utf8");let h="";t.on("error",o),t.on("data",m=>h+=m),t.on("end",()=>{try{if(t.statusCode!=null&&t.statusCode>=400){const m=tr(t,"content-type"),w=m!=null&&(Array.isArray(m)?m.find(E=>E.includes("json"))!=null:m.includes("json"));o(Do(t,`method: ${r.method||"GET"} url: ${r.protocol||"https:"}//${r.hostname}${r.port?`:${r.port}`:""}${r.path}

          Data:
          ${w?JSON.stringify(JSON.parse(h)):h}
          `))}else i(h.length===0?null:h)}catch(m){o(m)}})}async downloadToBuffer(t,r){return await r.cancellationToken.createPromise((n,i,o)=>{const s=[],a={headers:r.headers||void 0,redirect:"manual"};es(t,a),Ln(a),this.doDownload(a,{destination:null,options:r,onCancel:o,callback:l=>{l==null?n(Buffer.concat(s)):i(l)},responseHandler:(l,f)=>{let c=0;l.on("data",u=>{if(c+=u.length,c>524288e3){f(new Error("Maximum allowed size is 500 MB"));return}s.push(u)}),l.on("end",()=>{f(null)})}},0)})}doDownload(t,r,n){const i=this.createRequest(t,o=>{if(o.statusCode>=400){r.callback(new Error(`Cannot download "${t.protocol||"https:"}//${t.hostname}${t.path}", status ${o.statusCode}: ${o.statusMessage}`));return}o.on("error",r.callback);const s=tr(o,"location");if(s!=null){n<this.maxRedirects?this.doDownload(xn.prepareRedirectUrlOptions(s,t),r,n++):r.callback(this.createMaxRedirectError());return}r.responseHandler==null?Um(r,o):r.responseHandler(o,r.callback)});this.addErrorAndTimeoutHandlers(i,r.callback,t.timeout),this.addRedirectHandlers(i,t,r.callback,n,o=>{this.doDownload(o,r,n++)}),i.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(t,r,n){t.on("socket",i=>{i.setTimeout(n,()=>{t.abort(),r(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(t,r){const n=au(t,{...r}),i=n.headers;if(i!=null&&i.authorization){const o=new su.URL(t);(o.hostname.endsWith(".amazonaws.com")||o.searchParams.has("X-Amz-Credential"))&&delete i.authorization}return n}static retryOnServerError(t,r=3){for(let n=0;;n++)try{return t()}catch(i){if(n<r&&(i instanceof Zo&&i.isServerError()||i.code==="EPIPE"))continue;throw i}}}$e.HttpExecutor=xn;function au(e,t){const r=Ln(t);return es(new su.URL(e),r),r}function es(e,t){t.protocol=e.protocol,t.hostname=e.hostname,e.port?t.port=e.port:t.port&&delete t.port,t.path=e.pathname+e.search}class No extends Rm.Transform{get actual(){return this._actual}constructor(t,r="sha512",n="base64"){super(),this.expected=t,this.algorithm=r,this.encoding=n,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,Om.createHash)(r)}_transform(t,r,n){this.digester.update(t),n(null,t)}_flush(t){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(r){t(r);return}t(null)}validate(){if(this._actual==null)throw(0,ha.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,ha.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}$e.DigestTransform=No;function Lm(e,t,r){return e!=null&&t!=null&&e!==t?(r(new Error(`checksum mismatch: expected ${t} but got ${e} (X-Checksum-Sha2 header)`)),!1):!0}function tr(e,t){const r=e.headers[t];return r==null?null:Array.isArray(r)?r.length===0?null:r[r.length-1]:r}function Um(e,t){if(!Lm(tr(t,"X-Checksum-Sha2"),e.options.sha2,e.callback))return;const r=[];if(e.options.onProgress!=null){const s=tr(t,"content-length");s!=null&&r.push(new Nm.ProgressCallbackTransform(parseInt(s,10),e.options.cancellationToken,e.options.onProgress))}const n=e.options.sha512;n!=null?r.push(new No(n,"sha512",n.length===128&&!n.includes("+")&&!n.includes("Z")&&!n.includes("=")?"hex":"base64")):e.options.sha2!=null&&r.push(new No(e.options.sha2,"sha256","hex"));const i=(0,Pm.createWriteStream)(e.destination);r.push(i);let o=t;for(const s of r)s.on("error",a=>{i.close(),e.options.cancellationToken.cancelled||e.callback(a)}),o=o.pipe(s);i.on("finish",()=>{i.close(e.callback)})}function Ln(e,t,r){r!=null&&(e.method=r),e.headers={...e.headers};const n=e.headers;return t!=null&&(n.authorization=t.startsWith("Basic")||t.startsWith("Bearer")?t:`token ${t}`),n["User-Agent"]==null&&(n["User-Agent"]="electron-builder"),(r==null||r==="GET"||n["Cache-Control"]==null)&&(n["Cache-Control"]="no-cache"),e.protocol==null&&process.versions.electron!=null&&(e.protocol="https:"),e}function Un(e,t){return JSON.stringify(e,(r,n)=>r.endsWith("Authorization")||r.endsWith("authorization")||r.endsWith("Password")||r.endsWith("PASSWORD")||r.endsWith("Token")||r.includes("password")||r.includes("token")||t!=null&&t.has(r)?"<stripped sensitive data>":n,2)}var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.MemoLazy=void 0;class km{constructor(t,r){this.selector=t,this.creator=r,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const t=this.selector();if(this._value!==void 0&&lu(this.selected,t))return this._value;this.selected=t;const r=this.creator(t);return this.value=r,r}set value(t){this._value=t}}Jn.MemoLazy=km;function lu(e,t){if(typeof e=="object"&&e!==null&&(typeof t=="object"&&t!==null)){const i=Object.keys(e),o=Object.keys(t);return i.length===o.length&&i.every(s=>lu(e[s],t[s]))}return e===t}var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.githubUrl=Mm;Kn.getS3LikeProviderBaseUrl=jm;function Mm(e,t="github.com"){return`${e.protocol||"https"}://${e.host||t}`}function jm(e){const t=e.provider;if(t==="s3")return Bm(e);if(t==="spaces")return qm(e);throw new Error(`Not supported provider: ${t}`)}function Bm(e){let t;if(e.accelerate==!0)t=`https://${e.bucket}.s3-accelerate.amazonaws.com`;else if(e.endpoint!=null)t=`${e.endpoint}/${e.bucket}`;else if(e.bucket.includes(".")){if(e.region==null)throw new Error(`Bucket name "${e.bucket}" includes a dot, but S3 region is missing`);e.region==="us-east-1"?t=`https://s3.amazonaws.com/${e.bucket}`:t=`https://s3-${e.region}.amazonaws.com/${e.bucket}`}else e.region==="cn-north-1"?t=`https://${e.bucket}.s3.${e.region}.amazonaws.com.cn`:t=`https://${e.bucket}.s3.amazonaws.com`;return cu(t,e.path)}function cu(e,t){return t!=null&&t.length>0&&(t.startsWith("/")||(e+="/"),e+=t),e}function qm(e){if(e.name==null)throw new Error("name is missing");if(e.region==null)throw new Error("region is missing");return cu(`https://${e.name}.${e.region}.digitaloceanspaces.com`,e.path)}var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.retry=uu;const Hm=mt;async function uu(e,t,r,n=0,i=0,o){var s;const a=new Hm.CancellationToken;try{return await e()}catch(l){if((!((s=o==null?void 0:o(l))!==null&&s!==void 0)||s)&&t>0&&!a.cancelled)return await new Promise(f=>setTimeout(f,r+n*i)),await uu(e,t-1,r,n,i+1,o);throw l}}var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.parseDn=Gm;function Gm(e){let t=!1,r=null,n="",i=0;e=e.trim();const o=new Map;for(let s=0;s<=e.length;s++){if(s===e.length){r!==null&&o.set(r,n);break}const a=e[s];if(t){if(a==='"'){t=!1;continue}}else{if(a==='"'){t=!0;continue}if(a==="\\"){s++;const l=parseInt(e.slice(s,s+2),16);Number.isNaN(l)?n+=e[s]:(s++,n+=String.fromCharCode(l));continue}if(r===null&&a==="="){r=n,n="";continue}if(a===","||a===";"||a==="+"){r!==null&&o.set(r,n),r=null,n="";continue}}if(a===" "&&!t){if(n.length===0)continue;if(s>i){let l=s;for(;e[l]===" ";)l++;i=l}if(i>=e.length||e[i]===","||e[i]===";"||r===null&&e[i]==="="||r!==null&&e[i]==="+"){s=i-1;continue}}n+=a}return o}var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.nil=ir.UUID=void 0;const fu=Gr,du=lr,Wm="options.name must be either a string or a Buffer",pa=(0,fu.randomBytes)(16);pa[0]=pa[0]|1;const Pn={},X=[];for(let e=0;e<256;e++){const t=(e+256).toString(16).substr(1);Pn[t]=e,X[e]=t}class Ft{constructor(t){this.ascii=null,this.binary=null;const r=Ft.check(t);if(!r)throw new Error("not a UUID");this.version=r.version,r.format==="ascii"?this.ascii=t:this.binary=t}static v5(t,r){return Vm(t,"sha1",80,r)}toString(){return this.ascii==null&&(this.ascii=zm(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(t,r=0){if(typeof t=="string")return t=t.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(t)?t==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(Pn[t[14]+t[15]]&240)>>4,variant:ma((Pn[t[19]+t[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(t)){if(t.length<r+16)return!1;let n=0;for(;n<16&&t[r+n]===0;n++);return n===16?{version:void 0,variant:"nil",format:"binary"}:{version:(t[r+6]&240)>>4,variant:ma((t[r+8]&224)>>5),format:"binary"}}throw(0,du.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(t){const r=Buffer.allocUnsafe(16);let n=0;for(let i=0;i<16;i++)r[i]=Pn[t[n++]+t[n++]],(i===3||i===5||i===7||i===9)&&(n+=1);return r}}ir.UUID=Ft;Ft.OID=Ft.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function ma(e){switch(e){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var Tr;(function(e){e[e.ASCII=0]="ASCII",e[e.BINARY=1]="BINARY",e[e.OBJECT=2]="OBJECT"})(Tr||(Tr={}));function Vm(e,t,r,n,i=Tr.ASCII){const o=(0,fu.createHash)(t);if(typeof e!="string"&&!Buffer.isBuffer(e))throw(0,du.newError)(Wm,"ERR_INVALID_UUID_NAME");o.update(n),o.update(e);const a=o.digest();let l;switch(i){case Tr.BINARY:a[6]=a[6]&15|r,a[8]=a[8]&63|128,l=a;break;case Tr.OBJECT:a[6]=a[6]&15|r,a[8]=a[8]&63|128,l=new Ft(a);break;default:l=X[a[0]]+X[a[1]]+X[a[2]]+X[a[3]]+"-"+X[a[4]]+X[a[5]]+"-"+X[a[6]&15|r]+X[a[7]]+"-"+X[a[8]&63|128]+X[a[9]]+"-"+X[a[10]]+X[a[11]]+X[a[12]]+X[a[13]]+X[a[14]]+X[a[15]];break}return l}function zm(e){return X[e[0]]+X[e[1]]+X[e[2]]+X[e[3]]+"-"+X[e[4]]+X[e[5]]+"-"+X[e[6]]+X[e[7]]+"-"+X[e[8]]+X[e[9]]+"-"+X[e[10]]+X[e[11]]+X[e[12]]+X[e[13]]+X[e[14]]+X[e[15]]}ir.nil=new Ft("00000000-0000-0000-0000-000000000000");var zr={},hu={};(function(e){(function(t){t.parser=function(p,d){return new n(p,d)},t.SAXParser=n,t.SAXStream=c,t.createStream=f,t.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(p,d){if(!(this instanceof n))return new n(p,d);var T=this;o(T),T.q=T.c="",T.bufferCheckPosition=t.MAX_BUFFER_LENGTH,T.opt=d||{},T.opt.lowercase=T.opt.lowercase||T.opt.lowercasetags,T.looseCase=T.opt.lowercase?"toLowerCase":"toUpperCase",T.tags=[],T.closed=T.closedRoot=T.sawRoot=!1,T.tag=T.error=null,T.strict=!!p,T.noscript=!!(p||T.opt.noscript),T.state=y.BEGIN,T.strictEntities=T.opt.strictEntities,T.ENTITIES=T.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),T.attribList=[],T.opt.xmlns&&(T.ns=Object.create(E)),T.opt.unquotedAttributeValues===void 0&&(T.opt.unquotedAttributeValues=!p),T.trackPosition=T.opt.position!==!1,T.trackPosition&&(T.position=T.line=T.column=0),H(T,"onready")}Object.create||(Object.create=function(p){function d(){}d.prototype=p;var T=new d;return T}),Object.keys||(Object.keys=function(p){var d=[];for(var T in p)p.hasOwnProperty(T)&&d.push(T);return d});function i(p){for(var d=Math.max(t.MAX_BUFFER_LENGTH,10),T=0,S=0,J=r.length;S<J;S++){var ne=p[r[S]].length;if(ne>d)switch(r[S]){case"textNode":Q(p);break;case"cdata":M(p,"oncdata",p.cdata),p.cdata="";break;case"script":M(p,"onscript",p.script),p.script="";break;default:$(p,"Max buffer length exceeded: "+r[S])}T=Math.max(T,ne)}var ae=t.MAX_BUFFER_LENGTH-T;p.bufferCheckPosition=ae+p.position}function o(p){for(var d=0,T=r.length;d<T;d++)p[r[d]]=""}function s(p){Q(p),p.cdata!==""&&(M(p,"oncdata",p.cdata),p.cdata=""),p.script!==""&&(M(p,"onscript",p.script),p.script="")}n.prototype={end:function(){R(this)},write:ze,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var a;try{a=require("stream").Stream}catch{a=function(){}}a||(a=function(){});var l=t.EVENTS.filter(function(p){return p!=="error"&&p!=="end"});function f(p,d){return new c(p,d)}function c(p,d){if(!(this instanceof c))return new c(p,d);a.apply(this),this._parser=new n(p,d),this.writable=!0,this.readable=!0;var T=this;this._parser.onend=function(){T.emit("end")},this._parser.onerror=function(S){T.emit("error",S),T._parser.error=null},this._decoder=null,l.forEach(function(S){Object.defineProperty(T,"on"+S,{get:function(){return T._parser["on"+S]},set:function(J){if(!J)return T.removeAllListeners(S),T._parser["on"+S]=J,J;T.on(S,J)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(a.prototype,{constructor:{value:c}}),c.prototype.write=function(p){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(p)){if(!this._decoder){var d=Ud.StringDecoder;this._decoder=new d("utf8")}p=this._decoder.write(p)}return this._parser.write(p.toString()),this.emit("data",p),!0},c.prototype.end=function(p){return p&&p.length&&this.write(p),this._parser.end(),!0},c.prototype.on=function(p,d){var T=this;return!T._parser["on"+p]&&l.indexOf(p)!==-1&&(T._parser["on"+p]=function(){var S=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);S.splice(0,0,p),T.emit.apply(T,S)}),a.prototype.on.call(T,p,d)};var u="[CDATA[",h="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/2000/xmlns/",E={xml:m,xmlns:w},_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function x(p){return p===" "||p===`
`||p==="\r"||p==="	"}function B(p){return p==='"'||p==="'"}function q(p){return p===">"||x(p)}function j(p,d){return p.test(d)}function ce(p,d){return!j(p,d)}var y=0;t.STATE={BEGIN:y++,BEGIN_WHITESPACE:y++,TEXT:y++,TEXT_ENTITY:y++,OPEN_WAKA:y++,SGML_DECL:y++,SGML_DECL_QUOTED:y++,DOCTYPE:y++,DOCTYPE_QUOTED:y++,DOCTYPE_DTD:y++,DOCTYPE_DTD_QUOTED:y++,COMMENT_STARTING:y++,COMMENT:y++,COMMENT_ENDING:y++,COMMENT_ENDED:y++,CDATA:y++,CDATA_ENDING:y++,CDATA_ENDING_2:y++,PROC_INST:y++,PROC_INST_BODY:y++,PROC_INST_ENDING:y++,OPEN_TAG:y++,OPEN_TAG_SLASH:y++,ATTRIB:y++,ATTRIB_NAME:y++,ATTRIB_NAME_SAW_WHITE:y++,ATTRIB_VALUE:y++,ATTRIB_VALUE_QUOTED:y++,ATTRIB_VALUE_CLOSED:y++,ATTRIB_VALUE_UNQUOTED:y++,ATTRIB_VALUE_ENTITY_Q:y++,ATTRIB_VALUE_ENTITY_U:y++,CLOSE_TAG:y++,CLOSE_TAG_SAW_WHITE:y++,SCRIPT:y++,SCRIPT_ENDING:y++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(p){var d=t.ENTITIES[p],T=typeof d=="number"?String.fromCharCode(d):d;t.ENTITIES[p]=T});for(var z in t.STATE)t.STATE[t.STATE[z]]=z;y=t.STATE;function H(p,d,T){p[d]&&p[d](T)}function M(p,d,T){p.textNode&&Q(p),H(p,d,T)}function Q(p){p.textNode=I(p.opt,p.textNode),p.textNode&&H(p,"ontext",p.textNode),p.textNode=""}function I(p,d){return p.trim&&(d=d.trim()),p.normalize&&(d=d.replace(/\s+/g," ")),d}function $(p,d){return Q(p),p.trackPosition&&(d+=`
Line: `+p.line+`
Column: `+p.column+`
Char: `+p.c),d=new Error(d),p.error=d,H(p,"onerror",d),p}function R(p){return p.sawRoot&&!p.closedRoot&&C(p,"Unclosed root tag"),p.state!==y.BEGIN&&p.state!==y.BEGIN_WHITESPACE&&p.state!==y.TEXT&&$(p,"Unexpected end"),Q(p),p.c="",p.closed=!0,H(p,"onend"),n.call(p,p.strict,p.opt),p}function C(p,d){if(typeof p!="object"||!(p instanceof n))throw new Error("bad call to strictFail");p.strict&&$(p,d)}function N(p){p.strict||(p.tagName=p.tagName[p.looseCase]());var d=p.tags[p.tags.length-1]||p,T=p.tag={name:p.tagName,attributes:{}};p.opt.xmlns&&(T.ns=d.ns),p.attribList.length=0,M(p,"onopentagstart",T)}function P(p,d){var T=p.indexOf(":"),S=T<0?["",p]:p.split(":"),J=S[0],ne=S[1];return d&&p==="xmlns"&&(J="xmlns",ne=""),{prefix:J,local:ne}}function k(p){if(p.strict||(p.attribName=p.attribName[p.looseCase]()),p.attribList.indexOf(p.attribName)!==-1||p.tag.attributes.hasOwnProperty(p.attribName)){p.attribName=p.attribValue="";return}if(p.opt.xmlns){var d=P(p.attribName,!0),T=d.prefix,S=d.local;if(T==="xmlns")if(S==="xml"&&p.attribValue!==m)C(p,"xml: prefix must be bound to "+m+`
Actual: `+p.attribValue);else if(S==="xmlns"&&p.attribValue!==w)C(p,"xmlns: prefix must be bound to "+w+`
Actual: `+p.attribValue);else{var J=p.tag,ne=p.tags[p.tags.length-1]||p;J.ns===ne.ns&&(J.ns=Object.create(ne.ns)),J.ns[S]=p.attribValue}p.attribList.push([p.attribName,p.attribValue])}else p.tag.attributes[p.attribName]=p.attribValue,M(p,"onattribute",{name:p.attribName,value:p.attribValue});p.attribName=p.attribValue=""}function Y(p,d){if(p.opt.xmlns){var T=p.tag,S=P(p.tagName);T.prefix=S.prefix,T.local=S.local,T.uri=T.ns[S.prefix]||"",T.prefix&&!T.uri&&(C(p,"Unbound namespace prefix: "+JSON.stringify(p.tagName)),T.uri=S.prefix);var J=p.tags[p.tags.length-1]||p;T.ns&&J.ns!==T.ns&&Object.keys(T.ns).forEach(function(rn){M(p,"onopennamespace",{prefix:rn,uri:T.ns[rn]})});for(var ne=0,ae=p.attribList.length;ne<ae;ne++){var ye=p.attribList[ne],_e=ye[0],it=ye[1],fe=P(_e,!0),je=fe.prefix,mi=fe.local,tn=je===""?"":T.ns[je]||"",fr={name:_e,value:it,prefix:je,local:mi,uri:tn};je&&je!=="xmlns"&&!tn&&(C(p,"Unbound namespace prefix: "+JSON.stringify(je)),fr.uri=je),p.tag.attributes[_e]=fr,M(p,"onattribute",fr)}p.attribList.length=0}p.tag.isSelfClosing=!!d,p.sawRoot=!0,p.tags.push(p.tag),M(p,"onopentag",p.tag),d||(!p.noscript&&p.tagName.toLowerCase()==="script"?p.state=y.SCRIPT:p.state=y.TEXT,p.tag=null,p.tagName=""),p.attribName=p.attribValue="",p.attribList.length=0}function G(p){if(!p.tagName){C(p,"Weird empty close tag."),p.textNode+="</>",p.state=y.TEXT;return}if(p.script){if(p.tagName!=="script"){p.script+="</"+p.tagName+">",p.tagName="",p.state=y.SCRIPT;return}M(p,"onscript",p.script),p.script=""}var d=p.tags.length,T=p.tagName;p.strict||(T=T[p.looseCase]());for(var S=T;d--;){var J=p.tags[d];if(J.name!==S)C(p,"Unexpected close tag");else break}if(d<0){C(p,"Unmatched closing tag: "+p.tagName),p.textNode+="</"+p.tagName+">",p.state=y.TEXT;return}p.tagName=T;for(var ne=p.tags.length;ne-- >d;){var ae=p.tag=p.tags.pop();p.tagName=p.tag.name,M(p,"onclosetag",p.tagName);var ye={};for(var _e in ae.ns)ye[_e]=ae.ns[_e];var it=p.tags[p.tags.length-1]||p;p.opt.xmlns&&ae.ns!==it.ns&&Object.keys(ae.ns).forEach(function(fe){var je=ae.ns[fe];M(p,"onclosenamespace",{prefix:fe,uri:je})})}d===0&&(p.closedRoot=!0),p.tagName=p.attribValue=p.attribName="",p.attribList.length=0,p.state=y.TEXT}function Z(p){var d=p.entity,T=d.toLowerCase(),S,J="";return p.ENTITIES[d]?p.ENTITIES[d]:p.ENTITIES[T]?p.ENTITIES[T]:(d=T,d.charAt(0)==="#"&&(d.charAt(1)==="x"?(d=d.slice(2),S=parseInt(d,16),J=S.toString(16)):(d=d.slice(1),S=parseInt(d,10),J=S.toString(10))),d=d.replace(/^0+/,""),isNaN(S)||J.toLowerCase()!==d?(C(p,"Invalid character entity"),"&"+p.entity+";"):String.fromCodePoint(S))}function he(p,d){d==="<"?(p.state=y.OPEN_WAKA,p.startTagPosition=p.position):x(d)||(C(p,"Non-whitespace before first tag."),p.textNode=d,p.state=y.TEXT)}function U(p,d){var T="";return d<p.length&&(T=p.charAt(d)),T}function ze(p){var d=this;if(this.error)throw this.error;if(d.closed)return $(d,"Cannot write after close. Assign an onready handler.");if(p===null)return R(d);typeof p=="object"&&(p=p.toString());for(var T=0,S="";S=U(p,T++),d.c=S,!!S;)switch(d.trackPosition&&(d.position++,S===`
`?(d.line++,d.column=0):d.column++),d.state){case y.BEGIN:if(d.state=y.BEGIN_WHITESPACE,S==="\uFEFF")continue;he(d,S);continue;case y.BEGIN_WHITESPACE:he(d,S);continue;case y.TEXT:if(d.sawRoot&&!d.closedRoot){for(var J=T-1;S&&S!=="<"&&S!=="&";)S=U(p,T++),S&&d.trackPosition&&(d.position++,S===`
`?(d.line++,d.column=0):d.column++);d.textNode+=p.substring(J,T-1)}S==="<"&&!(d.sawRoot&&d.closedRoot&&!d.strict)?(d.state=y.OPEN_WAKA,d.startTagPosition=d.position):(!x(S)&&(!d.sawRoot||d.closedRoot)&&C(d,"Text data outside of root node."),S==="&"?d.state=y.TEXT_ENTITY:d.textNode+=S);continue;case y.SCRIPT:S==="<"?d.state=y.SCRIPT_ENDING:d.script+=S;continue;case y.SCRIPT_ENDING:S==="/"?d.state=y.CLOSE_TAG:(d.script+="<"+S,d.state=y.SCRIPT);continue;case y.OPEN_WAKA:if(S==="!")d.state=y.SGML_DECL,d.sgmlDecl="";else if(!x(S))if(j(_,S))d.state=y.OPEN_TAG,d.tagName=S;else if(S==="/")d.state=y.CLOSE_TAG,d.tagName="";else if(S==="?")d.state=y.PROC_INST,d.procInstName=d.procInstBody="";else{if(C(d,"Unencoded <"),d.startTagPosition+1<d.position){var ne=d.position-d.startTagPosition;S=new Array(ne).join(" ")+S}d.textNode+="<"+S,d.state=y.TEXT}continue;case y.SGML_DECL:if(d.sgmlDecl+S==="--"){d.state=y.COMMENT,d.comment="",d.sgmlDecl="";continue}d.doctype&&d.doctype!==!0&&d.sgmlDecl?(d.state=y.DOCTYPE_DTD,d.doctype+="<!"+d.sgmlDecl+S,d.sgmlDecl=""):(d.sgmlDecl+S).toUpperCase()===u?(M(d,"onopencdata"),d.state=y.CDATA,d.sgmlDecl="",d.cdata=""):(d.sgmlDecl+S).toUpperCase()===h?(d.state=y.DOCTYPE,(d.doctype||d.sawRoot)&&C(d,"Inappropriately located doctype declaration"),d.doctype="",d.sgmlDecl=""):S===">"?(M(d,"onsgmldeclaration",d.sgmlDecl),d.sgmlDecl="",d.state=y.TEXT):(B(S)&&(d.state=y.SGML_DECL_QUOTED),d.sgmlDecl+=S);continue;case y.SGML_DECL_QUOTED:S===d.q&&(d.state=y.SGML_DECL,d.q=""),d.sgmlDecl+=S;continue;case y.DOCTYPE:S===">"?(d.state=y.TEXT,M(d,"ondoctype",d.doctype),d.doctype=!0):(d.doctype+=S,S==="["?d.state=y.DOCTYPE_DTD:B(S)&&(d.state=y.DOCTYPE_QUOTED,d.q=S));continue;case y.DOCTYPE_QUOTED:d.doctype+=S,S===d.q&&(d.q="",d.state=y.DOCTYPE);continue;case y.DOCTYPE_DTD:S==="]"?(d.doctype+=S,d.state=y.DOCTYPE):S==="<"?(d.state=y.OPEN_WAKA,d.startTagPosition=d.position):B(S)?(d.doctype+=S,d.state=y.DOCTYPE_DTD_QUOTED,d.q=S):d.doctype+=S;continue;case y.DOCTYPE_DTD_QUOTED:d.doctype+=S,S===d.q&&(d.state=y.DOCTYPE_DTD,d.q="");continue;case y.COMMENT:S==="-"?d.state=y.COMMENT_ENDING:d.comment+=S;continue;case y.COMMENT_ENDING:S==="-"?(d.state=y.COMMENT_ENDED,d.comment=I(d.opt,d.comment),d.comment&&M(d,"oncomment",d.comment),d.comment=""):(d.comment+="-"+S,d.state=y.COMMENT);continue;case y.COMMENT_ENDED:S!==">"?(C(d,"Malformed comment"),d.comment+="--"+S,d.state=y.COMMENT):d.doctype&&d.doctype!==!0?d.state=y.DOCTYPE_DTD:d.state=y.TEXT;continue;case y.CDATA:S==="]"?d.state=y.CDATA_ENDING:d.cdata+=S;continue;case y.CDATA_ENDING:S==="]"?d.state=y.CDATA_ENDING_2:(d.cdata+="]"+S,d.state=y.CDATA);continue;case y.CDATA_ENDING_2:S===">"?(d.cdata&&M(d,"oncdata",d.cdata),M(d,"onclosecdata"),d.cdata="",d.state=y.TEXT):S==="]"?d.cdata+="]":(d.cdata+="]]"+S,d.state=y.CDATA);continue;case y.PROC_INST:S==="?"?d.state=y.PROC_INST_ENDING:x(S)?d.state=y.PROC_INST_BODY:d.procInstName+=S;continue;case y.PROC_INST_BODY:if(!d.procInstBody&&x(S))continue;S==="?"?d.state=y.PROC_INST_ENDING:d.procInstBody+=S;continue;case y.PROC_INST_ENDING:S===">"?(M(d,"onprocessinginstruction",{name:d.procInstName,body:d.procInstBody}),d.procInstName=d.procInstBody="",d.state=y.TEXT):(d.procInstBody+="?"+S,d.state=y.PROC_INST_BODY);continue;case y.OPEN_TAG:j(A,S)?d.tagName+=S:(N(d),S===">"?Y(d):S==="/"?d.state=y.OPEN_TAG_SLASH:(x(S)||C(d,"Invalid character in tag name"),d.state=y.ATTRIB));continue;case y.OPEN_TAG_SLASH:S===">"?(Y(d,!0),G(d)):(C(d,"Forward-slash in opening tag not followed by >"),d.state=y.ATTRIB);continue;case y.ATTRIB:if(x(S))continue;S===">"?Y(d):S==="/"?d.state=y.OPEN_TAG_SLASH:j(_,S)?(d.attribName=S,d.attribValue="",d.state=y.ATTRIB_NAME):C(d,"Invalid attribute name");continue;case y.ATTRIB_NAME:S==="="?d.state=y.ATTRIB_VALUE:S===">"?(C(d,"Attribute without value"),d.attribValue=d.attribName,k(d),Y(d)):x(S)?d.state=y.ATTRIB_NAME_SAW_WHITE:j(A,S)?d.attribName+=S:C(d,"Invalid attribute name");continue;case y.ATTRIB_NAME_SAW_WHITE:if(S==="=")d.state=y.ATTRIB_VALUE;else{if(x(S))continue;C(d,"Attribute without value"),d.tag.attributes[d.attribName]="",d.attribValue="",M(d,"onattribute",{name:d.attribName,value:""}),d.attribName="",S===">"?Y(d):j(_,S)?(d.attribName=S,d.state=y.ATTRIB_NAME):(C(d,"Invalid attribute name"),d.state=y.ATTRIB)}continue;case y.ATTRIB_VALUE:if(x(S))continue;B(S)?(d.q=S,d.state=y.ATTRIB_VALUE_QUOTED):(d.opt.unquotedAttributeValues||$(d,"Unquoted attribute value"),d.state=y.ATTRIB_VALUE_UNQUOTED,d.attribValue=S);continue;case y.ATTRIB_VALUE_QUOTED:if(S!==d.q){S==="&"?d.state=y.ATTRIB_VALUE_ENTITY_Q:d.attribValue+=S;continue}k(d),d.q="",d.state=y.ATTRIB_VALUE_CLOSED;continue;case y.ATTRIB_VALUE_CLOSED:x(S)?d.state=y.ATTRIB:S===">"?Y(d):S==="/"?d.state=y.OPEN_TAG_SLASH:j(_,S)?(C(d,"No whitespace between attributes"),d.attribName=S,d.attribValue="",d.state=y.ATTRIB_NAME):C(d,"Invalid attribute name");continue;case y.ATTRIB_VALUE_UNQUOTED:if(!q(S)){S==="&"?d.state=y.ATTRIB_VALUE_ENTITY_U:d.attribValue+=S;continue}k(d),S===">"?Y(d):d.state=y.ATTRIB;continue;case y.CLOSE_TAG:if(d.tagName)S===">"?G(d):j(A,S)?d.tagName+=S:d.script?(d.script+="</"+d.tagName,d.tagName="",d.state=y.SCRIPT):(x(S)||C(d,"Invalid tagname in closing tag"),d.state=y.CLOSE_TAG_SAW_WHITE);else{if(x(S))continue;ce(_,S)?d.script?(d.script+="</"+S,d.state=y.SCRIPT):C(d,"Invalid tagname in closing tag."):d.tagName=S}continue;case y.CLOSE_TAG_SAW_WHITE:if(x(S))continue;S===">"?G(d):C(d,"Invalid characters in closing tag");continue;case y.TEXT_ENTITY:case y.ATTRIB_VALUE_ENTITY_Q:case y.ATTRIB_VALUE_ENTITY_U:var ae,ye;switch(d.state){case y.TEXT_ENTITY:ae=y.TEXT,ye="textNode";break;case y.ATTRIB_VALUE_ENTITY_Q:ae=y.ATTRIB_VALUE_QUOTED,ye="attribValue";break;case y.ATTRIB_VALUE_ENTITY_U:ae=y.ATTRIB_VALUE_UNQUOTED,ye="attribValue";break}if(S===";"){var _e=Z(d);d.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(_e)?(d.entity="",d.state=ae,d.write(_e)):(d[ye]+=_e,d.entity="",d.state=ae)}else j(d.entity.length?D:b,S)?d.entity+=S:(C(d,"Invalid character in entity name"),d[ye]+="&"+d.entity+S,d.entity="",d.state=ae);continue;default:throw new Error(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&i(d),d}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var p=String.fromCharCode,d=Math.floor,T=function(){var S=16384,J=[],ne,ae,ye=-1,_e=arguments.length;if(!_e)return"";for(var it="";++ye<_e;){var fe=Number(arguments[ye]);if(!isFinite(fe)||fe<0||fe>1114111||d(fe)!==fe)throw RangeError("Invalid code point: "+fe);fe<=65535?J.push(fe):(fe-=65536,ne=(fe>>10)+55296,ae=fe%1024+56320,J.push(ne,ae)),(ye+1===_e||J.length>S)&&(it+=p.apply(null,J),J.length=0)}return it};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:T,configurable:!0,writable:!0}):String.fromCodePoint=T}()})(e)})(hu);Object.defineProperty(zr,"__esModule",{value:!0});zr.XElement=void 0;zr.parseXml=Km;const Ym=hu,yn=lr;class pu{constructor(t){if(this.name=t,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!t)throw(0,yn.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!Jm(t))throw(0,yn.newError)(`Invalid element name: ${t}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(t){const r=this.attributes===null?null:this.attributes[t];if(r==null)throw(0,yn.newError)(`No attribute "${t}"`,"ERR_XML_MISSED_ATTRIBUTE");return r}removeAttribute(t){this.attributes!==null&&delete this.attributes[t]}element(t,r=!1,n=null){const i=this.elementOrNull(t,r);if(i===null)throw(0,yn.newError)(n||`No element "${t}"`,"ERR_XML_MISSED_ELEMENT");return i}elementOrNull(t,r=!1){if(this.elements===null)return null;for(const n of this.elements)if(ga(n,t,r))return n;return null}getElements(t,r=!1){return this.elements===null?[]:this.elements.filter(n=>ga(n,t,r))}elementValueOrEmpty(t,r=!1){const n=this.elementOrNull(t,r);return n===null?"":n.value}}zr.XElement=pu;const Xm=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function Jm(e){return Xm.test(e)}function ga(e,t,r){const n=e.name;return n===t||r===!0&&n.length===t.length&&n.toLowerCase()===t.toLowerCase()}function Km(e){let t=null;const r=Ym.parser(!0,{}),n=[];return r.onopentag=i=>{const o=new pu(i.name);if(o.attributes=i.attributes,t===null)t=o;else{const s=n[n.length-1];s.elements==null&&(s.elements=[]),s.elements.push(o)}n.push(o)},r.onclosetag=()=>{n.pop()},r.ontext=i=>{n.length>0&&(n[n.length-1].value=i)},r.oncdata=i=>{const o=n[n.length-1];o.value=i,o.isCData=!0},r.onerror=i=>{throw i},r.write(e),t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.XElement=e.parseXml=e.UUID=e.parseDn=e.retry=e.githubUrl=e.getS3LikeProviderBaseUrl=e.ProgressCallbackTransform=e.MemoLazy=e.safeStringifyJson=e.safeGetHeader=e.parseJson=e.HttpExecutor=e.HttpError=e.DigestTransform=e.createHttpError=e.configureRequestUrl=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.newError=e.CancellationToken=e.CancellationError=void 0,e.asArray=u;var t=mt;Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return t.CancellationError}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}});var r=lr;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return r.newError}});var n=$e;Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return n.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return n.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return n.configureRequestUrl}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return n.createHttpError}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return n.DigestTransform}}),Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return n.HttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return n.HttpExecutor}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return n.parseJson}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return n.safeGetHeader}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return n.safeStringifyJson}});var i=Jn;Object.defineProperty(e,"MemoLazy",{enumerable:!0,get:function(){return i.MemoLazy}});var o=Vr;Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return o.ProgressCallbackTransform}});var s=Kn;Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return s.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return s.githubUrl}});var a=ts;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return a.retry}});var l=rs;Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return l.parseDn}});var f=ir;Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return f.UUID}});var c=zr;Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return c.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return c.XElement}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function u(h){return h==null?[]:Array.isArray(h)?h:[h]}})(ge);var we={},ns={},Ge={};function mu(e){return typeof e>"u"||e===null}function Qm(e){return typeof e=="object"&&e!==null}function Zm(e){return Array.isArray(e)?e:mu(e)?[]:[e]}function eg(e,t){var r,n,i,o;if(t)for(o=Object.keys(t),r=0,n=o.length;r<n;r+=1)i=o[r],e[i]=t[i];return e}function tg(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function rg(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Ge.isNothing=mu;Ge.isObject=Qm;Ge.toArray=Zm;Ge.repeat=tg;Ge.isNegativeZero=rg;Ge.extend=eg;function gu(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Dr(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=gu(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Dr.prototype=Object.create(Error.prototype);Dr.prototype.constructor=Dr;Dr.prototype.toString=function(t){return this.name+": "+gu(this,t)};var Yr=Dr,_r=Ge;function Ri(e,t,r,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-t>a&&(o=" ... ",t=n-a+o.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:o+e.slice(t,r).replace(/\t/g,"")+s,pos:n-t+o.length}}function Di(e,t){return _r.repeat(" ",t-e.length)+e}function ng(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(e.buffer);)i.push(o.index),n.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",l,f,c=Math.min(e.line+t.linesAfter,i.length).toString().length,u=t.maxLength-(t.indent+c+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)f=Ri(e.buffer,n[s-l],i[s-l],e.position-(n[s]-n[s-l]),u),a=_r.repeat(" ",t.indent)+Di((e.line-l+1).toString(),c)+" | "+f.str+`
`+a;for(f=Ri(e.buffer,n[s],i[s],e.position,u),a+=_r.repeat(" ",t.indent)+Di((e.line+1).toString(),c)+" | "+f.str+`
`,a+=_r.repeat("-",t.indent+c+3+f.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=i.length);l++)f=Ri(e.buffer,n[s+l],i[s+l],e.position-(n[s]-n[s+l]),u),a+=_r.repeat(" ",t.indent)+Di((e.line+l+1).toString(),c)+" | "+f.str+`
`;return a.replace(/\n$/,"")}var ig=ng,ya=Yr,og=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],sg=["scalar","sequence","mapping"];function ag(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function lg(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(og.indexOf(r)===-1)throw new ya('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=ag(t.styleAliases||null),sg.indexOf(this.kind)===-1)throw new ya('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Re=lg,yr=Yr,Ni=Re;function Ea(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function cg(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function Fo(e){return this.extend(e)}Fo.prototype.extend=function(t){var r=[],n=[];if(t instanceof Ni)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new yr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ni))throw new yr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new yr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new yr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ni))throw new yr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Fo.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Ea(i,"implicit"),i.compiledExplicit=Ea(i,"explicit"),i.compiledTypeMap=cg(i.compiledImplicit,i.compiledExplicit),i};var yu=Fo,ug=Re,Eu=new ug("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),fg=Re,vu=new fg("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),dg=Re,wu=new dg("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),hg=yu,_u=new hg({explicit:[Eu,vu,wu]}),pg=Re;function mg(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function gg(){return null}function yg(e){return e===null}var Su=new pg("tag:yaml.org,2002:null",{kind:"scalar",resolve:mg,construct:gg,predicate:yg,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Eg=Re;function vg(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function wg(e){return e==="true"||e==="True"||e==="TRUE"}function _g(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Au=new Eg("tag:yaml.org,2002:bool",{kind:"scalar",resolve:vg,construct:wg,predicate:_g,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),Sg=Ge,Ag=Re;function bg(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Tg(e){return 48<=e&&e<=55}function Cg(e){return 48<=e&&e<=57}function $g(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!bg(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Tg(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!Cg(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Og(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Ig(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Sg.isNegativeZero(e)}var bu=new Ag("tag:yaml.org,2002:int",{kind:"scalar",resolve:$g,construct:Og,predicate:Ig,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Tu=Ge,Pg=Re,Rg=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Dg(e){return!(e===null||!Rg.test(e)||e[e.length-1]==="_")}function Ng(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var Fg=/^[-+]?[0-9]+e/;function xg(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Tu.isNegativeZero(e))return"-0.0";return r=e.toString(10),Fg.test(r)?r.replace("e",".e"):r}function Lg(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Tu.isNegativeZero(e))}var Cu=new Pg("tag:yaml.org,2002:float",{kind:"scalar",resolve:Dg,construct:Ng,predicate:Lg,represent:xg,defaultStyle:"lowercase"}),$u=_u.extend({implicit:[Su,Au,bu,Cu]}),Ou=$u,Ug=Re,Iu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Pu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function kg(e){return e===null?!1:Iu.exec(e)!==null||Pu.exec(e)!==null}function Mg(e){var t,r,n,i,o,s,a,l=0,f=null,c,u,h;if(t=Iu.exec(e),t===null&&(t=Pu.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(c=+t[10],u=+(t[11]||0),f=(c*60+u)*6e4,t[9]==="-"&&(f=-f)),h=new Date(Date.UTC(r,n,i,o,s,a,l)),f&&h.setTime(h.getTime()-f),h}function jg(e){return e.toISOString()}var Ru=new Ug("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:kg,construct:Mg,instanceOf:Date,represent:jg}),Bg=Re;function qg(e){return e==="<<"||e===null}var Du=new Bg("tag:yaml.org,2002:merge",{kind:"scalar",resolve:qg}),Hg=Re,is=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Gg(e){if(e===null)return!1;var t,r,n=0,i=e.length,o=is;for(r=0;r<i;r++)if(t=o.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function Wg(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,o=is,s=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function Vg(e){var t="",r=0,n,i,o=e.length,s=is;for(n=0;n<o;n++)n%3===0&&n&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[n];return i=o%3,i===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):i===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):i===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}function zg(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Nu=new Hg("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Gg,construct:Wg,predicate:zg,represent:Vg}),Yg=Re,Xg=Object.prototype.hasOwnProperty,Jg=Object.prototype.toString;function Kg(e){if(e===null)return!0;var t=[],r,n,i,o,s,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],s=!1,Jg.call(i)!=="[object Object]")return!1;for(o in i)if(Xg.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function Qg(e){return e!==null?e:[]}var Fu=new Yg("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Kg,construct:Qg}),Zg=Re,e0=Object.prototype.toString;function t0(e){if(e===null)return!0;var t,r,n,i,o,s=e;for(o=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],e0.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[t]=[i[0],n[i[0]]]}return!0}function r0(e){if(e===null)return[];var t,r,n,i,o,s=e;for(o=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],i=Object.keys(n),o[t]=[i[0],n[i[0]]];return o}var xu=new Zg("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:t0,construct:r0}),n0=Re,i0=Object.prototype.hasOwnProperty;function o0(e){if(e===null)return!0;var t,r=e;for(t in r)if(i0.call(r,t)&&r[t]!==null)return!1;return!0}function s0(e){return e!==null?e:{}}var Lu=new n0("tag:yaml.org,2002:set",{kind:"mapping",resolve:o0,construct:s0}),os=Ou.extend({implicit:[Ru,Du],explicit:[Nu,Fu,xu,Lu]}),Pt=Ge,Uu=Yr,a0=ig,l0=os,gt=Object.prototype.hasOwnProperty,kn=1,ku=2,Mu=3,Mn=4,Fi=1,c0=2,va=3,u0=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,f0=/[\x85\u2028\u2029]/,d0=/[,\[\]\{\}]/,ju=/^(?:!|!!|![a-z\-]+!)$/i,Bu=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function wa(e){return Object.prototype.toString.call(e)}function Ke(e){return e===10||e===13}function Nt(e){return e===9||e===32}function Fe(e){return e===9||e===32||e===10||e===13}function Yt(e){return e===44||e===91||e===93||e===123||e===125}function h0(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function p0(e){return e===120?2:e===117?4:e===85?8:0}function m0(e){return 48<=e&&e<=57?e-48:-1}function _a(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function g0(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var qu=new Array(256),Hu=new Array(256);for(var Bt=0;Bt<256;Bt++)qu[Bt]=_a(Bt)?1:0,Hu[Bt]=_a(Bt);function y0(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||l0,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Gu(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=a0(r),new Uu(t,r)}function L(e,t){throw Gu(e,t)}function jn(e,t){e.onWarning&&e.onWarning.call(null,Gu(e,t))}var Sa={YAML:function(t,r,n){var i,o,s;t.version!==null&&L(t,"duplication of %YAML directive"),n.length!==1&&L(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&L(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&L(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&jn(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,o;n.length!==2&&L(t,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],ju.test(i)||L(t,"ill-formed tag handle (first argument) of the TAG directive"),gt.call(t.tagMap,i)&&L(t,'there is a previously declared suffix for "'+i+'" tag handle'),Bu.test(o)||L(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{L(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function ht(e,t,r,n){var i,o,s,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||L(e,"expected valid JSON character");else u0.test(a)&&L(e,"the stream contains non-printable characters");e.result+=a}}function Aa(e,t,r,n){var i,o,s,a;for(Pt.isObject(r)||L(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],gt.call(t,o)||(t[o]=r[o],n[o]=!0)}function Xt(e,t,r,n,i,o,s,a,l){var f,c;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),f=0,c=i.length;f<c;f+=1)Array.isArray(i[f])&&L(e,"nested arrays are not supported inside keys"),typeof i=="object"&&wa(i[f])==="[object Object]"&&(i[f]="[object Object]");if(typeof i=="object"&&wa(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(f=0,c=o.length;f<c;f+=1)Aa(e,t,o[f],r);else Aa(e,t,o,r);else!e.json&&!gt.call(r,i)&&gt.call(t,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,L(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete r[i];return t}function ss(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):L(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ue(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Nt(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Ke(i))for(ss(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&jn(e,"deficient indentation"),n}function Qn(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Fe(r)))}function as(e,t){t===1?e.result+=" ":t>1&&(e.result+=Pt.repeat(`
`,t-1))}function E0(e,t,r){var n,i,o,s,a,l,f,c,u=e.kind,h=e.result,m;if(m=e.input.charCodeAt(e.position),Fe(m)||Yt(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(i=e.input.charCodeAt(e.position+1),Fe(i)||r&&Yt(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;m!==0;){if(m===58){if(i=e.input.charCodeAt(e.position+1),Fe(i)||r&&Yt(i))break}else if(m===35){if(n=e.input.charCodeAt(e.position-1),Fe(n))break}else{if(e.position===e.lineStart&&Qn(e)||r&&Yt(m))break;if(Ke(m))if(l=e.line,f=e.lineStart,c=e.lineIndent,ue(e,!1,-1),e.lineIndent>=t){a=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=f,e.lineIndent=c;break}}a&&(ht(e,o,s,!1),as(e,e.line-l),o=s=e.position,a=!1),Nt(m)||(s=e.position+1),m=e.input.charCodeAt(++e.position)}return ht(e,o,s,!1),e.result?!0:(e.kind=u,e.result=h,!1)}function v0(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(ht(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else Ke(r)?(ht(e,n,i,!0),as(e,ue(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Qn(e)?L(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);L(e,"unexpected end of the stream within a single quoted scalar")}function w0(e,t){var r,n,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return ht(e,r,e.position,!0),e.position++,!0;if(a===92){if(ht(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Ke(a))ue(e,!1,t);else if(a<256&&qu[a])e.result+=Hu[a],e.position++;else if((s=p0(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=h0(a))>=0?o=(o<<4)+s:L(e,"expected hexadecimal character");e.result+=g0(o),e.position++}else L(e,"unknown escape sequence");r=n=e.position}else Ke(a)?(ht(e,r,n,!0),as(e,ue(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Qn(e)?L(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}L(e,"unexpected end of the stream within a double quoted scalar")}function _0(e,t){var r=!0,n,i,o,s=e.tag,a,l=e.anchor,f,c,u,h,m,w=Object.create(null),E,_,A,b;if(b=e.input.charCodeAt(e.position),b===91)c=93,m=!1,a=[];else if(b===123)c=125,m=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),b=e.input.charCodeAt(++e.position);b!==0;){if(ue(e,!0,t),b=e.input.charCodeAt(e.position),b===c)return e.position++,e.tag=s,e.anchor=l,e.kind=m?"mapping":"sequence",e.result=a,!0;r?b===44&&L(e,"expected the node content, but found ','"):L(e,"missed comma between flow collection entries"),_=E=A=null,u=h=!1,b===63&&(f=e.input.charCodeAt(e.position+1),Fe(f)&&(u=h=!0,e.position++,ue(e,!0,t))),n=e.line,i=e.lineStart,o=e.position,or(e,t,kn,!1,!0),_=e.tag,E=e.result,ue(e,!0,t),b=e.input.charCodeAt(e.position),(h||e.line===n)&&b===58&&(u=!0,b=e.input.charCodeAt(++e.position),ue(e,!0,t),or(e,t,kn,!1,!0),A=e.result),m?Xt(e,a,w,_,E,A,n,i,o):u?a.push(Xt(e,null,w,_,E,A,n,i,o)):a.push(E),ue(e,!0,t),b=e.input.charCodeAt(e.position),b===44?(r=!0,b=e.input.charCodeAt(++e.position)):r=!1}L(e,"unexpected end of the stream within a flow collection")}function S0(e,t){var r,n,i=Fi,o=!1,s=!1,a=t,l=0,f=!1,c,u;if(u=e.input.charCodeAt(e.position),u===124)n=!1;else if(u===62)n=!0;else return!1;for(e.kind="scalar",e.result="";u!==0;)if(u=e.input.charCodeAt(++e.position),u===43||u===45)Fi===i?i=u===43?va:c0:L(e,"repeat of a chomping mode identifier");else if((c=m0(u))>=0)c===0?L(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?L(e,"repeat of an indentation width identifier"):(a=t+c-1,s=!0);else break;if(Nt(u)){do u=e.input.charCodeAt(++e.position);while(Nt(u));if(u===35)do u=e.input.charCodeAt(++e.position);while(!Ke(u)&&u!==0)}for(;u!==0;){for(ss(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Ke(u)){l++;continue}if(e.lineIndent<a){i===va?e.result+=Pt.repeat(`
`,o?1+l:l):i===Fi&&o&&(e.result+=`
`);break}for(n?Nt(u)?(f=!0,e.result+=Pt.repeat(`
`,o?1+l:l)):f?(f=!1,e.result+=Pt.repeat(`
`,l+1)):l===0?o&&(e.result+=" "):e.result+=Pt.repeat(`
`,l):e.result+=Pt.repeat(`
`,o?1+l:l),o=!0,s=!0,l=0,r=e.position;!Ke(u)&&u!==0;)u=e.input.charCodeAt(++e.position);ht(e,r,e.position,!1)}return!0}function ba(e,t){var r,n=e.tag,i=e.anchor,o=[],s,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,L(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!Fe(s))));){if(a=!0,e.position++,ue(e,!0,-1)&&e.lineIndent<=t){o.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,or(e,t,Mu,!1,!0),o.push(e.result),ue(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)L(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function A0(e,t,r){var n,i,o,s,a,l,f=e.tag,c=e.anchor,u={},h=Object.create(null),m=null,w=null,E=null,_=!1,A=!1,b;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),b=e.input.charCodeAt(e.position);b!==0;){if(!_&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,L(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),o=e.line,(b===63||b===58)&&Fe(n))b===63?(_&&(Xt(e,u,h,m,w,null,s,a,l),m=w=E=null),A=!0,_=!0,i=!0):_?(_=!1,i=!0):L(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,b=n;else{if(s=e.line,a=e.lineStart,l=e.position,!or(e,r,ku,!1,!0))break;if(e.line===o){for(b=e.input.charCodeAt(e.position);Nt(b);)b=e.input.charCodeAt(++e.position);if(b===58)b=e.input.charCodeAt(++e.position),Fe(b)||L(e,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(Xt(e,u,h,m,w,null,s,a,l),m=w=E=null),A=!0,_=!1,i=!1,m=e.tag,w=e.result;else if(A)L(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=f,e.anchor=c,!0}else if(A)L(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=f,e.anchor=c,!0}if((e.line===o||e.lineIndent>t)&&(_&&(s=e.line,a=e.lineStart,l=e.position),or(e,t,Mn,!0,i)&&(_?w=e.result:E=e.result),_||(Xt(e,u,h,m,w,E,s,a,l),m=w=E=null),ue(e,!0,-1),b=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&b!==0)L(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return _&&Xt(e,u,h,m,w,null,s,a,l),A&&(e.tag=f,e.anchor=c,e.kind="mapping",e.result=u),A}function b0(e){var t,r=!1,n=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&L(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):L(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Fe(s);)s===33&&(n?L(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),ju.test(i)||L(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),d0.test(o)&&L(e,"tag suffix cannot contain flow indicator characters")}o&&!Bu.test(o)&&L(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{L(e,"tag name is malformed: "+o)}return r?e.tag=o:gt.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:L(e,'undeclared tag handle "'+i+'"'),!0}function T0(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&L(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Fe(r)&&!Yt(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&L(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function C0(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Fe(n)&&!Yt(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&L(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),gt.call(e.anchorMap,r)||L(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],ue(e,!0,-1),!0}function or(e,t,r,n,i){var o,s,a,l=1,f=!1,c=!1,u,h,m,w,E,_;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=Mn===r||Mu===r,n&&ue(e,!0,-1)&&(f=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;b0(e)||T0(e);)ue(e,!0,-1)?(f=!0,a=o,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=f||i),(l===1||Mn===r)&&(kn===r||ku===r?E=t:E=t+1,_=e.position-e.lineStart,l===1?a&&(ba(e,_)||A0(e,_,E))||_0(e,E)?c=!0:(s&&S0(e,E)||v0(e,E)||w0(e,E)?c=!0:C0(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&L(e,"alias node should not have any properties")):E0(e,E,kn===r)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(c=a&&ba(e,_))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&L(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,h=e.implicitTypes.length;u<h;u+=1)if(w=e.implicitTypes[u],w.resolve(e.result)){e.result=w.construct(e.result),e.tag=w.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(gt.call(e.typeMap[e.kind||"fallback"],e.tag))w=e.typeMap[e.kind||"fallback"][e.tag];else for(w=null,m=e.typeMap.multi[e.kind||"fallback"],u=0,h=m.length;u<h;u+=1)if(e.tag.slice(0,m[u].tag.length)===m[u].tag){w=m[u];break}w||L(e,"unknown tag !<"+e.tag+">"),e.result!==null&&w.kind!==e.kind&&L(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+w.kind+'", not "'+e.kind+'"'),w.resolve(e.result,e.tag)?(e.result=w.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):L(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function $0(e){var t=e.position,r,n,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(ue(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!Fe(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&L(e,"directive name must not be less than one character in length");s!==0;){for(;Nt(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Ke(s));break}if(Ke(s))break;for(r=e.position;s!==0&&!Fe(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}s!==0&&ss(e),gt.call(Sa,n)?Sa[n](e,n,i):jn(e,'unknown document directive "'+n+'"')}if(ue(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ue(e,!0,-1)):o&&L(e,"directives end mark is expected"),or(e,e.lineIndent-1,Mn,!1,!0),ue(e,!0,-1),e.checkLineBreaks&&f0.test(e.input.slice(t,e.position))&&jn(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Qn(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ue(e,!0,-1));return}if(e.position<e.length-1)L(e,"end of the stream or a document separator is expected");else return}function Wu(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new y0(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,L(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)$0(r);return r.documents}function O0(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=Wu(e,r);if(typeof t!="function")return n;for(var i=0,o=n.length;i<o;i+=1)t(n[i])}function I0(e,t){var r=Wu(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Uu("expected a single document in the stream, but found more")}}ns.loadAll=O0;ns.load=I0;var Vu={},Zn=Ge,Xr=Yr,P0=os,zu=Object.prototype.toString,Yu=Object.prototype.hasOwnProperty,ls=65279,R0=9,Nr=10,D0=13,N0=32,F0=33,x0=34,xo=35,L0=37,U0=38,k0=39,M0=42,Xu=44,j0=45,Bn=58,B0=61,q0=62,H0=63,G0=64,Ju=91,Ku=93,W0=96,Qu=123,V0=124,Zu=125,be={};be[0]="\\0";be[7]="\\a";be[8]="\\b";be[9]="\\t";be[10]="\\n";be[11]="\\v";be[12]="\\f";be[13]="\\r";be[27]="\\e";be[34]='\\"';be[92]="\\\\";be[133]="\\N";be[160]="\\_";be[8232]="\\L";be[8233]="\\P";var z0=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Y0=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function X0(e,t){var r,n,i,o,s,a,l;if(t===null)return{};for(r={},n=Object.keys(t),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&Yu.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[s]=a;return r}function J0(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Xr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Zn.repeat("0",n-t.length)+t}var K0=1,Fr=2;function Q0(e){this.schema=e.schema||P0,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Zn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=X0(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Fr:K0,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ta(e,t){for(var r=Zn.repeat(" ",t),n=0,i=-1,o="",s,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(s=e.slice(n),n=a):(s=e.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function Lo(e,t){return`
`+Zn.repeat(" ",e.indent*t)}function Z0(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function qn(e){return e===N0||e===R0}function xr(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==ls||65536<=e&&e<=1114111}function Ca(e){return xr(e)&&e!==ls&&e!==D0&&e!==Nr}function $a(e,t,r){var n=Ca(e),i=n&&!qn(e);return(r?n:n&&e!==Xu&&e!==Ju&&e!==Ku&&e!==Qu&&e!==Zu)&&e!==xo&&!(t===Bn&&!i)||Ca(t)&&!qn(t)&&e===xo||t===Bn&&i}function ey(e){return xr(e)&&e!==ls&&!qn(e)&&e!==j0&&e!==H0&&e!==Bn&&e!==Xu&&e!==Ju&&e!==Ku&&e!==Qu&&e!==Zu&&e!==xo&&e!==U0&&e!==M0&&e!==F0&&e!==V0&&e!==B0&&e!==q0&&e!==k0&&e!==x0&&e!==L0&&e!==G0&&e!==W0}function ty(e){return!qn(e)&&e!==Bn}function Sr(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function ef(e){var t=/^\n* /;return t.test(e)}var tf=1,Uo=2,rf=3,nf=4,zt=5;function ry(e,t,r,n,i,o,s,a){var l,f=0,c=null,u=!1,h=!1,m=n!==-1,w=-1,E=ey(Sr(e,0))&&ty(Sr(e,e.length-1));if(t||s)for(l=0;l<e.length;f>=65536?l+=2:l++){if(f=Sr(e,l),!xr(f))return zt;E=E&&$a(f,c,a),c=f}else{for(l=0;l<e.length;f>=65536?l+=2:l++){if(f=Sr(e,l),f===Nr)u=!0,m&&(h=h||l-w-1>n&&e[w+1]!==" ",w=l);else if(!xr(f))return zt;E=E&&$a(f,c,a),c=f}h=h||m&&l-w-1>n&&e[w+1]!==" "}return!u&&!h?E&&!s&&!i(e)?tf:o===Fr?zt:Uo:r>9&&ef(e)?zt:s?o===Fr?zt:Uo:h?nf:rf}function ny(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===Fr?'""':"''";if(!e.noCompatMode&&(z0.indexOf(t)!==-1||Y0.test(t)))return e.quotingType===Fr?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=n||e.flowLevel>-1&&r>=e.flowLevel;function l(f){return Z0(e,f)}switch(ry(t,a,e.indent,s,l,e.quotingType,e.forceQuotes&&!n,i)){case tf:return t;case Uo:return"'"+t.replace(/'/g,"''")+"'";case rf:return"|"+Oa(t,e.indent)+Ia(Ta(t,o));case nf:return">"+Oa(t,e.indent)+Ia(Ta(iy(t,s),o));case zt:return'"'+oy(t)+'"';default:throw new Xr("impossible error: invalid scalar style")}}()}function Oa(e,t){var r=ef(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Ia(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function iy(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var f=e.indexOf(`
`);return f=f!==-1?f:e.length,r.lastIndex=f,Pa(e.slice(0,f),t)}(),i=e[0]===`
`||e[0]===" ",o,s;s=r.exec(e);){var a=s[1],l=s[2];o=l[0]===" ",n+=a+(!i&&!o&&l!==""?`
`:"")+Pa(l,t),i=o}return n}function Pa(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,o,s=0,a=0,l="";n=r.exec(e);)a=n.index,a-i>t&&(o=s>i?s:a,l+=`
`+e.slice(i,o),i=o+1),s=a;return l+=`
`,e.length-i>t&&s>i?l+=e.slice(i,s)+`
`+e.slice(s+1):l+=e.slice(i),l.slice(1)}function oy(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=Sr(e,i),n=be[r],!n&&xr(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||J0(r);return t}function sy(e,t,r){var n="",i=e.tag,o,s,a;for(o=0,s=r.length;o<s;o+=1)a=r[o],e.replacer&&(a=e.replacer.call(r,String(o),a)),(rt(e,t,a,!1,!1)||typeof a>"u"&&rt(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function Ra(e,t,r,n){var i="",o=e.tag,s,a,l;for(s=0,a=r.length;s<a;s+=1)l=r[s],e.replacer&&(l=e.replacer.call(r,String(s),l)),(rt(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&rt(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Lo(e,t)),e.dump&&Nr===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function ay(e,t,r){var n="",i=e.tag,o=Object.keys(r),s,a,l,f,c;for(s=0,a=o.length;s<a;s+=1)c="",n!==""&&(c+=", "),e.condenseFlow&&(c+='"'),l=o[s],f=r[l],e.replacer&&(f=e.replacer.call(r,l,f)),rt(e,t,l,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),rt(e,t,f,!1,!1)&&(c+=e.dump,n+=c));e.tag=i,e.dump="{"+n+"}"}function ly(e,t,r,n){var i="",o=e.tag,s=Object.keys(r),a,l,f,c,u,h;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new Xr("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)h="",(!n||i!=="")&&(h+=Lo(e,t)),f=s[a],c=r[f],e.replacer&&(c=e.replacer.call(r,f,c)),rt(e,t+1,f,!0,!0,!0)&&(u=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,u&&(e.dump&&Nr===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,u&&(h+=Lo(e,t)),rt(e,t+1,c,!0,u)&&(e.dump&&Nr===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,i+=h));e.tag=o,e.dump=i||"{}"}function Da(e,t,r){var n,i,o,s,a,l;for(i=r?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,zu.call(a.represent)==="[object Function]")n=a.represent(t,l);else if(Yu.call(a.represent,l))n=a.represent[l](t,l);else throw new Xr("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=n}return!0}return!1}function rt(e,t,r,n,i,o,s){e.tag=null,e.dump=r,Da(e,r,!1)||Da(e,r,!0);var a=zu.call(e.dump),l=n,f;n&&(n=e.flowLevel<0||e.flowLevel>t);var c=a==="[object Object]"||a==="[object Array]",u,h;if(c&&(u=e.duplicates.indexOf(r),h=u!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&t>0)&&(i=!1),h&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(c&&h&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(ly(e,t,e.dump,i),h&&(e.dump="&ref_"+u+e.dump)):(ay(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?Ra(e,t-1,e.dump,i):Ra(e,t,e.dump,i),h&&(e.dump="&ref_"+u+e.dump)):(sy(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&ny(e,e.dump,t,o,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Xr("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(f=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",e.dump=f+" "+e.dump)}return!0}function cy(e,t){var r=[],n=[],i,o;for(ko(e,r,n),i=0,o=n.length;i<o;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(o)}function ko(e,t,r){var n,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)ko(e[i],t,r);else for(n=Object.keys(e),i=0,o=n.length;i<o;i+=1)ko(e[n[i]],t,r)}function uy(e,t){t=t||{};var r=new Q0(t);r.noRefs||cy(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),rt(r,0,n,!0,!0)?r.dump+`
`:""}Vu.dump=uy;var of=ns,fy=Vu;function cs(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}we.Type=Re;we.Schema=yu;we.FAILSAFE_SCHEMA=_u;we.JSON_SCHEMA=$u;we.CORE_SCHEMA=Ou;we.DEFAULT_SCHEMA=os;we.load=of.load;we.loadAll=of.loadAll;we.dump=fy.dump;we.YAMLException=Yr;we.types={binary:Nu,float:Cu,map:wu,null:Su,pairs:xu,set:Lu,timestamp:Ru,bool:Au,int:bu,merge:Du,omap:Fu,seq:vu,str:Eu};we.safeLoad=cs("safeLoad","load");we.safeLoadAll=cs("safeLoadAll","loadAll");we.safeDump=cs("safeDump","dump");var ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.Lazy=void 0;class dy{constructor(t){this._value=null,this.creator=t}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const t=this.creator();return this.value=t,t}set value(t){this._value=t,this.creator=null}}ei.Lazy=dy;var Mo={exports:{}};const hy="2.0.0",sf=256,py=Number.MAX_SAFE_INTEGER||9007199254740991,my=16,gy=sf-6,yy=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ti={MAX_LENGTH:sf,MAX_SAFE_COMPONENT_LENGTH:my,MAX_SAFE_BUILD_LENGTH:gy,MAX_SAFE_INTEGER:py,RELEASE_TYPES:yy,SEMVER_SPEC_VERSION:hy,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Ey=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var ri=Ey;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=ti,o=ri;t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],f=t.safeSrc=[],c=t.t={};let u=0;const h="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",i],[h,n]],w=_=>{for(const[A,b]of m)_=_.split(`${A}*`).join(`${A}{0,${b}}`).split(`${A}+`).join(`${A}{1,${b}}`);return _},E=(_,A,b)=>{const D=w(A),x=u++;o(_,x,A),c[_]=x,l[x]=A,f[x]=D,s[x]=new RegExp(A,b?"g":void 0),a[x]=new RegExp(D,b?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),E("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),E("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${h}+`),E("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),E("FULL",`^${l[c.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),E("LOOSE",`^${l[c.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),E("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),E("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",l[c.COERCE],!0),E("COERCERTLFULL",l[c.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",E("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",E("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Mo,Mo.exports);var Jr=Mo.exports;const vy=Object.freeze({loose:!0}),wy=Object.freeze({}),_y=e=>e?typeof e!="object"?vy:e:wy;var us=_y;const Na=/^[0-9]+$/,af=(e,t)=>{const r=Na.test(e),n=Na.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},Sy=(e,t)=>af(t,e);var lf={compareIdentifiers:af,rcompareIdentifiers:Sy};const En=ri,{MAX_LENGTH:Fa,MAX_SAFE_INTEGER:vn}=ti,{safeRe:xa,safeSrc:La,t:wn}=Jr,Ay=us,{compareIdentifiers:qt}=lf;let by=class Je{constructor(t,r){if(r=Ay(r),t instanceof Je){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Fa)throw new TypeError(`version is longer than ${Fa} characters`);En("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?xa[wn.LOOSE]:xa[wn.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>vn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vn||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<vn)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(En("SemVer.compare",this.version,this.options,t),!(t instanceof Je)){if(typeof t=="string"&&t===this.version)return 0;t=new Je(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Je||(t=new Je(t,this.options)),qt(this.major,t.major)||qt(this.minor,t.minor)||qt(this.patch,t.patch)}comparePre(t){if(t instanceof Je||(t=new Je(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(En("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return qt(n,i)}while(++r)}compareBuild(t){t instanceof Je||(t=new Je(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(En("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return qt(n,i)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const i=new RegExp(`^${this.options.loose?La[wn.PRERELEASELOOSE]:La[wn.PRERELEASE]}$`),o=`-${r}`.match(i);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),qt(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var De=by;const Ua=De,Ty=(e,t,r=!1)=>{if(e instanceof Ua)return e;try{return new Ua(e,t)}catch(n){if(!r)return null;throw n}};var cr=Ty;const Cy=cr,$y=(e,t)=>{const r=Cy(e,t);return r?r.version:null};var Oy=$y;const Iy=cr,Py=(e,t)=>{const r=Iy(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var Ry=Py;const ka=De,Dy=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new ka(e instanceof ka?e.version:e,r).inc(t,n,i).version}catch{return null}};var Ny=Dy;const Ma=cr,Fy=(e,t)=>{const r=Ma(e,null,!0),n=Ma(t,null,!0),i=r.compare(n);if(i===0)return null;const o=i>0,s=o?r:n,a=o?n:r,l=!!s.prerelease.length;if(!!a.prerelease.length&&!l){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}const c=l?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"};var xy=Fy;const Ly=De,Uy=(e,t)=>new Ly(e,t).major;var ky=Uy;const My=De,jy=(e,t)=>new My(e,t).minor;var By=jy;const qy=De,Hy=(e,t)=>new qy(e,t).patch;var Gy=Hy;const Wy=cr,Vy=(e,t)=>{const r=Wy(e,t);return r&&r.prerelease.length?r.prerelease:null};var zy=Vy;const ja=De,Yy=(e,t,r)=>new ja(e,r).compare(new ja(t,r));var We=Yy;const Xy=We,Jy=(e,t,r)=>Xy(t,e,r);var Ky=Jy;const Qy=We,Zy=(e,t)=>Qy(e,t,!0);var eE=Zy;const Ba=De,tE=(e,t,r)=>{const n=new Ba(e,r),i=new Ba(t,r);return n.compare(i)||n.compareBuild(i)};var fs=tE;const rE=fs,nE=(e,t)=>e.sort((r,n)=>rE(r,n,t));var iE=nE;const oE=fs,sE=(e,t)=>e.sort((r,n)=>oE(n,r,t));var aE=sE;const lE=We,cE=(e,t,r)=>lE(e,t,r)>0;var ni=cE;const uE=We,fE=(e,t,r)=>uE(e,t,r)<0;var ds=fE;const dE=We,hE=(e,t,r)=>dE(e,t,r)===0;var cf=hE;const pE=We,mE=(e,t,r)=>pE(e,t,r)!==0;var uf=mE;const gE=We,yE=(e,t,r)=>gE(e,t,r)>=0;var hs=yE;const EE=We,vE=(e,t,r)=>EE(e,t,r)<=0;var ps=vE;const wE=cf,_E=uf,SE=ni,AE=hs,bE=ds,TE=ps,CE=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return wE(e,r,n);case"!=":return _E(e,r,n);case">":return SE(e,r,n);case">=":return AE(e,r,n);case"<":return bE(e,r,n);case"<=":return TE(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var ff=CE;const $E=De,OE=cr,{safeRe:_n,t:Sn}=Jr,IE=(e,t)=>{if(e instanceof $E)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?_n[Sn.COERCEFULL]:_n[Sn.COERCE]);else{const l=t.includePrerelease?_n[Sn.COERCERTLFULL]:_n[Sn.COERCERTL];let f;for(;(f=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||f.index+f[0].length!==r.index+r[0].length)&&(r=f),l.lastIndex=f.index+f[1].length+f[2].length;l.lastIndex=-1}if(r===null)return null;const n=r[2],i=r[3]||"0",o=r[4]||"0",s=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return OE(`${n}.${i}.${o}${s}${a}`,t)};var PE=IE;class RE{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,r)}return this}}var DE=RE,xi,qa;function Ve(){if(qa)return xi;qa=1;const e=/\s+/g;class t{constructor($,R){if(R=i(R),$ instanceof t)return $.loose===!!R.loose&&$.includePrerelease===!!R.includePrerelease?$:new t($.raw,R);if($ instanceof o)return this.raw=$.value,this.set=[[$]],this.formatted=void 0,this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=$.trim().replace(e," "),this.set=this.raw.split("||").map(C=>this.parseRange(C.trim())).filter(C=>C.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const C=this.set[0];if(this.set=this.set.filter(N=>!E(N[0])),this.set.length===0)this.set=[C];else if(this.set.length>1){for(const N of this.set)if(N.length===1&&_(N[0])){this.set=[N];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let $=0;$<this.set.length;$++){$>0&&(this.formatted+="||");const R=this.set[$];for(let C=0;C<R.length;C++)C>0&&(this.formatted+=" "),this.formatted+=R[C].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange($){const C=((this.options.includePrerelease&&m)|(this.options.loose&&w))+":"+$,N=n.get(C);if(N)return N;const P=this.options.loose,k=P?l[f.HYPHENRANGELOOSE]:l[f.HYPHENRANGE];$=$.replace(k,M(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(l[f.COMPARATORTRIM],c),s("comparator trim",$),$=$.replace(l[f.TILDETRIM],u),s("tilde trim",$),$=$.replace(l[f.CARETTRIM],h),s("caret trim",$);let Y=$.split(" ").map(U=>b(U,this.options)).join(" ").split(/\s+/).map(U=>H(U,this.options));P&&(Y=Y.filter(U=>(s("loose invalid filter",U,this.options),!!U.match(l[f.COMPARATORLOOSE])))),s("range list",Y);const G=new Map,Z=Y.map(U=>new o(U,this.options));for(const U of Z){if(E(U))return[U];G.set(U.value,U)}G.size>1&&G.has("")&&G.delete("");const he=[...G.values()];return n.set(C,he),he}intersects($,R){if(!($ instanceof t))throw new TypeError("a Range is required");return this.set.some(C=>A(C,R)&&$.set.some(N=>A(N,R)&&C.every(P=>N.every(k=>P.intersects(k,R)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new a($,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(Q(this.set[R],$,this.options))return!0;return!1}}xi=t;const r=DE,n=new r,i=us,o=ii(),s=ri,a=De,{safeRe:l,t:f,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:h}=Jr,{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:w}=ti,E=I=>I.value==="<0.0.0-0",_=I=>I.value==="",A=(I,$)=>{let R=!0;const C=I.slice();let N=C.pop();for(;R&&C.length;)R=C.every(P=>N.intersects(P,$)),N=C.pop();return R},b=(I,$)=>(s("comp",I,$),I=q(I,$),s("caret",I),I=x(I,$),s("tildes",I),I=ce(I,$),s("xrange",I),I=z(I,$),s("stars",I),I),D=I=>!I||I.toLowerCase()==="x"||I==="*",x=(I,$)=>I.trim().split(/\s+/).map(R=>B(R,$)).join(" "),B=(I,$)=>{const R=$.loose?l[f.TILDELOOSE]:l[f.TILDE];return I.replace(R,(C,N,P,k,Y)=>{s("tilde",I,C,N,P,k,Y);let G;return D(N)?G="":D(P)?G=`>=${N}.0.0 <${+N+1}.0.0-0`:D(k)?G=`>=${N}.${P}.0 <${N}.${+P+1}.0-0`:Y?(s("replaceTilde pr",Y),G=`>=${N}.${P}.${k}-${Y} <${N}.${+P+1}.0-0`):G=`>=${N}.${P}.${k} <${N}.${+P+1}.0-0`,s("tilde return",G),G})},q=(I,$)=>I.trim().split(/\s+/).map(R=>j(R,$)).join(" "),j=(I,$)=>{s("caret",I,$);const R=$.loose?l[f.CARETLOOSE]:l[f.CARET],C=$.includePrerelease?"-0":"";return I.replace(R,(N,P,k,Y,G)=>{s("caret",I,N,P,k,Y,G);let Z;return D(P)?Z="":D(k)?Z=`>=${P}.0.0${C} <${+P+1}.0.0-0`:D(Y)?P==="0"?Z=`>=${P}.${k}.0${C} <${P}.${+k+1}.0-0`:Z=`>=${P}.${k}.0${C} <${+P+1}.0.0-0`:G?(s("replaceCaret pr",G),P==="0"?k==="0"?Z=`>=${P}.${k}.${Y}-${G} <${P}.${k}.${+Y+1}-0`:Z=`>=${P}.${k}.${Y}-${G} <${P}.${+k+1}.0-0`:Z=`>=${P}.${k}.${Y}-${G} <${+P+1}.0.0-0`):(s("no pr"),P==="0"?k==="0"?Z=`>=${P}.${k}.${Y}${C} <${P}.${k}.${+Y+1}-0`:Z=`>=${P}.${k}.${Y}${C} <${P}.${+k+1}.0-0`:Z=`>=${P}.${k}.${Y} <${+P+1}.0.0-0`),s("caret return",Z),Z})},ce=(I,$)=>(s("replaceXRanges",I,$),I.split(/\s+/).map(R=>y(R,$)).join(" ")),y=(I,$)=>{I=I.trim();const R=$.loose?l[f.XRANGELOOSE]:l[f.XRANGE];return I.replace(R,(C,N,P,k,Y,G)=>{s("xRange",I,C,N,P,k,Y,G);const Z=D(P),he=Z||D(k),U=he||D(Y),ze=U;return N==="="&&ze&&(N=""),G=$.includePrerelease?"-0":"",Z?N===">"||N==="<"?C="<0.0.0-0":C="*":N&&ze?(he&&(k=0),Y=0,N===">"?(N=">=",he?(P=+P+1,k=0,Y=0):(k=+k+1,Y=0)):N==="<="&&(N="<",he?P=+P+1:k=+k+1),N==="<"&&(G="-0"),C=`${N+P}.${k}.${Y}${G}`):he?C=`>=${P}.0.0${G} <${+P+1}.0.0-0`:U&&(C=`>=${P}.${k}.0${G} <${P}.${+k+1}.0-0`),s("xRange return",C),C})},z=(I,$)=>(s("replaceStars",I,$),I.trim().replace(l[f.STAR],"")),H=(I,$)=>(s("replaceGTE0",I,$),I.trim().replace(l[$.includePrerelease?f.GTE0PRE:f.GTE0],"")),M=I=>($,R,C,N,P,k,Y,G,Z,he,U,ze)=>(D(C)?R="":D(N)?R=`>=${C}.0.0${I?"-0":""}`:D(P)?R=`>=${C}.${N}.0${I?"-0":""}`:k?R=`>=${R}`:R=`>=${R}${I?"-0":""}`,D(Z)?G="":D(he)?G=`<${+Z+1}.0.0-0`:D(U)?G=`<${Z}.${+he+1}.0-0`:ze?G=`<=${Z}.${he}.${U}-${ze}`:I?G=`<${Z}.${he}.${+U+1}-0`:G=`<=${G}`,`${R} ${G}`.trim()),Q=(I,$,R)=>{for(let C=0;C<I.length;C++)if(!I[C].test($))return!1;if($.prerelease.length&&!R.includePrerelease){for(let C=0;C<I.length;C++)if(s(I[C].semver),I[C].semver!==o.ANY&&I[C].semver.prerelease.length>0){const N=I[C].semver;if(N.major===$.major&&N.minor===$.minor&&N.patch===$.patch)return!0}return!1}return!0};return xi}var Li,Ha;function ii(){if(Ha)return Li;Ha=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,u){if(u=r(u),c instanceof t){if(c.loose===!!u.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,u),this.options=u,this.loose=!!u.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const u=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],h=c.match(u);if(!h)throw new TypeError(`Invalid comparator: ${c}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new a(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,u){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,u).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,u).test(c.semver):(u=r(u),u.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,u)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,u)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Li=t;const r=us,{safeRe:n,t:i}=Jr,o=ff,s=ri,a=De,l=Ve();return Li}const NE=Ve(),FE=(e,t,r)=>{try{t=new NE(t,r)}catch{return!1}return t.test(e)};var oi=FE;const xE=Ve(),LE=(e,t)=>new xE(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var UE=LE;const kE=De,ME=Ve(),jE=(e,t,r)=>{let n=null,i=null,o=null;try{o=new ME(t,r)}catch{return null}return e.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new kE(n,r))}),n};var BE=jE;const qE=De,HE=Ve(),GE=(e,t,r)=>{let n=null,i=null,o=null;try{o=new HE(t,r)}catch{return null}return e.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new qE(n,r))}),n};var WE=GE;const Ui=De,VE=Ve(),Ga=ni,zE=(e,t)=>{e=new VE(e,t);let r=new Ui("0.0.0");if(e.test(r)||(r=new Ui("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const i=e.set[n];let o=null;i.forEach(s=>{const a=new Ui(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||Ga(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||Ga(r,o))&&(r=o)}return r&&e.test(r)?r:null};var YE=zE;const XE=Ve(),JE=(e,t)=>{try{return new XE(e,t).range||"*"}catch{return null}};var KE=JE;const QE=De,df=ii(),{ANY:ZE}=df,ev=Ve(),tv=oi,Wa=ni,Va=ds,rv=ps,nv=hs,iv=(e,t,r,n)=>{e=new QE(e,n),t=new ev(t,n);let i,o,s,a,l;switch(r){case">":i=Wa,o=rv,s=Va,a=">",l=">=";break;case"<":i=Va,o=nv,s=Wa,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(tv(e,t,n))return!1;for(let f=0;f<t.set.length;++f){const c=t.set[f];let u=null,h=null;if(c.forEach(m=>{m.semver===ZE&&(m=new df(">=0.0.0")),u=u||m,h=h||m,i(m.semver,u.semver,n)?u=m:s(m.semver,h.semver,n)&&(h=m)}),u.operator===a||u.operator===l||(!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===l&&s(e,h.semver))return!1}return!0};var ms=iv;const ov=ms,sv=(e,t,r)=>ov(e,t,">",r);var av=sv;const lv=ms,cv=(e,t,r)=>lv(e,t,"<",r);var uv=cv;const za=Ve(),fv=(e,t,r)=>(e=new za(e,r),t=new za(t,r),e.intersects(t,r));var dv=fv;const hv=oi,pv=We;var mv=(e,t,r)=>{const n=[];let i=null,o=null;const s=e.sort((c,u)=>pv(c,u,r));for(const c of s)hv(c,t,r)?(o=c,i||(i=c)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);const a=[];for(const[c,u]of n)c===u?a.push(c):!u&&c===s[0]?a.push("*"):u?c===s[0]?a.push(`<=${u}`):a.push(`${c} - ${u}`):a.push(`>=${c}`);const l=a.join(" || "),f=typeof t.raw=="string"?t.raw:String(t);return l.length<f.length?l:t};const Ya=Ve(),gs=ii(),{ANY:ki}=gs,Er=oi,ys=We,gv=(e,t,r={})=>{if(e===t)return!0;e=new Ya(e,r),t=new Ya(t,r);let n=!1;e:for(const i of e.set){for(const o of t.set){const s=Ev(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},yv=[new gs(">=0.0.0-0")],Xa=[new gs(">=0.0.0")],Ev=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===ki){if(t.length===1&&t[0].semver===ki)return!0;r.includePrerelease?e=yv:e=Xa}if(t.length===1&&t[0].semver===ki){if(r.includePrerelease)return!0;t=Xa}const n=new Set;let i,o;for(const m of e)m.operator===">"||m.operator===">="?i=Ja(i,m,r):m.operator==="<"||m.operator==="<="?o=Ka(o,m,r):n.add(m.semver);if(n.size>1)return null;let s;if(i&&o){if(s=ys(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(const m of n){if(i&&!Er(m,String(i),r)||o&&!Er(m,String(o),r))return null;for(const w of t)if(!Er(m,String(w),r))return!1;return!0}let a,l,f,c,u=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;u&&u.prerelease.length===1&&o.operator==="<"&&u.prerelease[0]===0&&(u=!1);for(const m of t){if(c=c||m.operator===">"||m.operator===">=",f=f||m.operator==="<"||m.operator==="<=",i){if(h&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===h.major&&m.semver.minor===h.minor&&m.semver.patch===h.patch&&(h=!1),m.operator===">"||m.operator===">="){if(a=Ja(i,m,r),a===m&&a!==i)return!1}else if(i.operator===">="&&!Er(i.semver,String(m),r))return!1}if(o){if(u&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===u.major&&m.semver.minor===u.minor&&m.semver.patch===u.patch&&(u=!1),m.operator==="<"||m.operator==="<="){if(l=Ka(o,m,r),l===m&&l!==o)return!1}else if(o.operator==="<="&&!Er(o.semver,String(m),r))return!1}if(!m.operator&&(o||i)&&s!==0)return!1}return!(i&&f&&!o&&s!==0||o&&c&&!i&&s!==0||h||u)},Ja=(e,t,r)=>{if(!e)return t;const n=ys(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Ka=(e,t,r)=>{if(!e)return t;const n=ys(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var vv=gv;const Mi=Jr,Qa=ti,wv=De,Za=lf,_v=cr,Sv=Oy,Av=Ry,bv=Ny,Tv=xy,Cv=ky,$v=By,Ov=Gy,Iv=zy,Pv=We,Rv=Ky,Dv=eE,Nv=fs,Fv=iE,xv=aE,Lv=ni,Uv=ds,kv=cf,Mv=uf,jv=hs,Bv=ps,qv=ff,Hv=PE,Gv=ii(),Wv=Ve(),Vv=oi,zv=UE,Yv=BE,Xv=WE,Jv=YE,Kv=KE,Qv=ms,Zv=av,ew=uv,tw=dv,rw=mv,nw=vv;var hf={parse:_v,valid:Sv,clean:Av,inc:bv,diff:Tv,major:Cv,minor:$v,patch:Ov,prerelease:Iv,compare:Pv,rcompare:Rv,compareLoose:Dv,compareBuild:Nv,sort:Fv,rsort:xv,gt:Lv,lt:Uv,eq:kv,neq:Mv,gte:jv,lte:Bv,cmp:qv,coerce:Hv,Comparator:Gv,Range:Wv,satisfies:Vv,toComparators:zv,maxSatisfying:Yv,minSatisfying:Xv,minVersion:Jv,validRange:Kv,outside:Qv,gtr:Zv,ltr:ew,intersects:tw,simplifyRange:rw,subset:nw,SemVer:wv,re:Mi.re,src:Mi.src,tokens:Mi.t,SEMVER_SPEC_VERSION:Qa.SEMVER_SPEC_VERSION,RELEASE_TYPES:Qa.RELEASE_TYPES,compareIdentifiers:Za.compareIdentifiers,rcompareIdentifiers:Za.rcompareIdentifiers},Kr={},Hn={exports:{}};Hn.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",i=1,o=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",f="[object AsyncFunction]",c="[object Boolean]",u="[object Date]",h="[object Error]",m="[object Function]",w="[object GeneratorFunction]",E="[object Map]",_="[object Number]",A="[object Null]",b="[object Object]",D="[object Promise]",x="[object Proxy]",B="[object RegExp]",q="[object Set]",j="[object String]",ce="[object Symbol]",y="[object Undefined]",z="[object WeakMap]",H="[object ArrayBuffer]",M="[object DataView]",Q="[object Float32Array]",I="[object Float64Array]",$="[object Int8Array]",R="[object Int16Array]",C="[object Int32Array]",N="[object Uint8Array]",P="[object Uint8ClampedArray]",k="[object Uint16Array]",Y="[object Uint32Array]",G=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,he=/^(?:0|[1-9]\d*)$/,U={};U[Q]=U[I]=U[$]=U[R]=U[C]=U[N]=U[P]=U[k]=U[Y]=!0,U[a]=U[l]=U[H]=U[c]=U[M]=U[u]=U[h]=U[m]=U[E]=U[_]=U[b]=U[B]=U[q]=U[j]=U[z]=!1;var ze=typeof Ce=="object"&&Ce&&Ce.Object===Object&&Ce,p=typeof self=="object"&&self&&self.Object===Object&&self,d=ze||p||Function("return this")(),T=t&&!t.nodeType&&t,S=T&&!0&&e&&!e.nodeType&&e,J=S&&S.exports===T,ne=J&&ze.process,ae=function(){try{return ne&&ne.binding&&ne.binding("util")}catch{}}(),ye=ae&&ae.isTypedArray;function _e(g,v){for(var O=-1,F=g==null?0:g.length,re=0,W=[];++O<F;){var le=g[O];v(le,O,g)&&(W[re++]=le)}return W}function it(g,v){for(var O=-1,F=v.length,re=g.length;++O<F;)g[re+O]=v[O];return g}function fe(g,v){for(var O=-1,F=g==null?0:g.length;++O<F;)if(v(g[O],O,g))return!0;return!1}function je(g,v){for(var O=-1,F=Array(g);++O<g;)F[O]=v(O);return F}function mi(g){return function(v){return g(v)}}function tn(g,v){return g.has(v)}function fr(g,v){return g==null?void 0:g[v]}function rn(g){var v=-1,O=Array(g.size);return g.forEach(function(F,re){O[++v]=[re,F]}),O}function Df(g,v){return function(O){return g(v(O))}}function Nf(g){var v=-1,O=Array(g.size);return g.forEach(function(F){O[++v]=F}),O}var Ff=Array.prototype,xf=Function.prototype,nn=Object.prototype,gi=d["__core-js_shared__"],Ss=xf.toString,Ye=nn.hasOwnProperty,As=function(){var g=/[^.]+$/.exec(gi&&gi.keys&&gi.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),bs=nn.toString,Lf=RegExp("^"+Ss.call(Ye).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ts=J?d.Buffer:void 0,on=d.Symbol,Cs=d.Uint8Array,$s=nn.propertyIsEnumerable,Uf=Ff.splice,St=on?on.toStringTag:void 0,Os=Object.getOwnPropertySymbols,kf=Ts?Ts.isBuffer:void 0,Mf=Df(Object.keys,Object),yi=Mt(d,"DataView"),dr=Mt(d,"Map"),Ei=Mt(d,"Promise"),vi=Mt(d,"Set"),wi=Mt(d,"WeakMap"),hr=Mt(Object,"create"),jf=Tt(yi),Bf=Tt(dr),qf=Tt(Ei),Hf=Tt(vi),Gf=Tt(wi),Is=on?on.prototype:void 0,_i=Is?Is.valueOf:void 0;function At(g){var v=-1,O=g==null?0:g.length;for(this.clear();++v<O;){var F=g[v];this.set(F[0],F[1])}}function Wf(){this.__data__=hr?hr(null):{},this.size=0}function Vf(g){var v=this.has(g)&&delete this.__data__[g];return this.size-=v?1:0,v}function zf(g){var v=this.__data__;if(hr){var O=v[g];return O===n?void 0:O}return Ye.call(v,g)?v[g]:void 0}function Yf(g){var v=this.__data__;return hr?v[g]!==void 0:Ye.call(v,g)}function Xf(g,v){var O=this.__data__;return this.size+=this.has(g)?0:1,O[g]=hr&&v===void 0?n:v,this}At.prototype.clear=Wf,At.prototype.delete=Vf,At.prototype.get=zf,At.prototype.has=Yf,At.prototype.set=Xf;function Ze(g){var v=-1,O=g==null?0:g.length;for(this.clear();++v<O;){var F=g[v];this.set(F[0],F[1])}}function Jf(){this.__data__=[],this.size=0}function Kf(g){var v=this.__data__,O=an(v,g);if(O<0)return!1;var F=v.length-1;return O==F?v.pop():Uf.call(v,O,1),--this.size,!0}function Qf(g){var v=this.__data__,O=an(v,g);return O<0?void 0:v[O][1]}function Zf(g){return an(this.__data__,g)>-1}function ed(g,v){var O=this.__data__,F=an(O,g);return F<0?(++this.size,O.push([g,v])):O[F][1]=v,this}Ze.prototype.clear=Jf,Ze.prototype.delete=Kf,Ze.prototype.get=Qf,Ze.prototype.has=Zf,Ze.prototype.set=ed;function bt(g){var v=-1,O=g==null?0:g.length;for(this.clear();++v<O;){var F=g[v];this.set(F[0],F[1])}}function td(){this.size=0,this.__data__={hash:new At,map:new(dr||Ze),string:new At}}function rd(g){var v=ln(this,g).delete(g);return this.size-=v?1:0,v}function nd(g){return ln(this,g).get(g)}function id(g){return ln(this,g).has(g)}function od(g,v){var O=ln(this,g),F=O.size;return O.set(g,v),this.size+=O.size==F?0:1,this}bt.prototype.clear=td,bt.prototype.delete=rd,bt.prototype.get=nd,bt.prototype.has=id,bt.prototype.set=od;function sn(g){var v=-1,O=g==null?0:g.length;for(this.__data__=new bt;++v<O;)this.add(g[v])}function sd(g){return this.__data__.set(g,n),this}function ad(g){return this.__data__.has(g)}sn.prototype.add=sn.prototype.push=sd,sn.prototype.has=ad;function ot(g){var v=this.__data__=new Ze(g);this.size=v.size}function ld(){this.__data__=new Ze,this.size=0}function cd(g){var v=this.__data__,O=v.delete(g);return this.size=v.size,O}function ud(g){return this.__data__.get(g)}function fd(g){return this.__data__.has(g)}function dd(g,v){var O=this.__data__;if(O instanceof Ze){var F=O.__data__;if(!dr||F.length<r-1)return F.push([g,v]),this.size=++O.size,this;O=this.__data__=new bt(F)}return O.set(g,v),this.size=O.size,this}ot.prototype.clear=ld,ot.prototype.delete=cd,ot.prototype.get=ud,ot.prototype.has=fd,ot.prototype.set=dd;function hd(g,v){var O=cn(g),F=!O&&Od(g),re=!O&&!F&&Si(g),W=!O&&!F&&!re&&ks(g),le=O||F||re||W,pe=le?je(g.length,String):[],Ee=pe.length;for(var ie in g)Ye.call(g,ie)&&!(le&&(ie=="length"||re&&(ie=="offset"||ie=="parent")||W&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||Ad(ie,Ee)))&&pe.push(ie);return pe}function an(g,v){for(var O=g.length;O--;)if(Fs(g[O][0],v))return O;return-1}function pd(g,v,O){var F=v(g);return cn(g)?F:it(F,O(g))}function pr(g){return g==null?g===void 0?y:A:St&&St in Object(g)?_d(g):$d(g)}function Ps(g){return mr(g)&&pr(g)==a}function Rs(g,v,O,F,re){return g===v?!0:g==null||v==null||!mr(g)&&!mr(v)?g!==g&&v!==v:md(g,v,O,F,Rs,re)}function md(g,v,O,F,re,W){var le=cn(g),pe=cn(v),Ee=le?l:st(g),ie=pe?l:st(v);Ee=Ee==a?b:Ee,ie=ie==a?b:ie;var xe=Ee==b,Be=ie==b,Se=Ee==ie;if(Se&&Si(g)){if(!Si(v))return!1;le=!0,xe=!1}if(Se&&!xe)return W||(W=new ot),le||ks(g)?Ds(g,v,O,F,re,W):vd(g,v,Ee,O,F,re,W);if(!(O&i)){var Ue=xe&&Ye.call(g,"__wrapped__"),ke=Be&&Ye.call(v,"__wrapped__");if(Ue||ke){var at=Ue?g.value():g,et=ke?v.value():v;return W||(W=new ot),re(at,et,O,F,W)}}return Se?(W||(W=new ot),wd(g,v,O,F,re,W)):!1}function gd(g){if(!Us(g)||Td(g))return!1;var v=xs(g)?Lf:Z;return v.test(Tt(g))}function yd(g){return mr(g)&&Ls(g.length)&&!!U[pr(g)]}function Ed(g){if(!Cd(g))return Mf(g);var v=[];for(var O in Object(g))Ye.call(g,O)&&O!="constructor"&&v.push(O);return v}function Ds(g,v,O,F,re,W){var le=O&i,pe=g.length,Ee=v.length;if(pe!=Ee&&!(le&&Ee>pe))return!1;var ie=W.get(g);if(ie&&W.get(v))return ie==v;var xe=-1,Be=!0,Se=O&o?new sn:void 0;for(W.set(g,v),W.set(v,g);++xe<pe;){var Ue=g[xe],ke=v[xe];if(F)var at=le?F(ke,Ue,xe,v,g,W):F(Ue,ke,xe,g,v,W);if(at!==void 0){if(at)continue;Be=!1;break}if(Se){if(!fe(v,function(et,Ct){if(!tn(Se,Ct)&&(Ue===et||re(Ue,et,O,F,W)))return Se.push(Ct)})){Be=!1;break}}else if(!(Ue===ke||re(Ue,ke,O,F,W))){Be=!1;break}}return W.delete(g),W.delete(v),Be}function vd(g,v,O,F,re,W,le){switch(O){case M:if(g.byteLength!=v.byteLength||g.byteOffset!=v.byteOffset)return!1;g=g.buffer,v=v.buffer;case H:return!(g.byteLength!=v.byteLength||!W(new Cs(g),new Cs(v)));case c:case u:case _:return Fs(+g,+v);case h:return g.name==v.name&&g.message==v.message;case B:case j:return g==v+"";case E:var pe=rn;case q:var Ee=F&i;if(pe||(pe=Nf),g.size!=v.size&&!Ee)return!1;var ie=le.get(g);if(ie)return ie==v;F|=o,le.set(g,v);var xe=Ds(pe(g),pe(v),F,re,W,le);return le.delete(g),xe;case ce:if(_i)return _i.call(g)==_i.call(v)}return!1}function wd(g,v,O,F,re,W){var le=O&i,pe=Ns(g),Ee=pe.length,ie=Ns(v),xe=ie.length;if(Ee!=xe&&!le)return!1;for(var Be=Ee;Be--;){var Se=pe[Be];if(!(le?Se in v:Ye.call(v,Se)))return!1}var Ue=W.get(g);if(Ue&&W.get(v))return Ue==v;var ke=!0;W.set(g,v),W.set(v,g);for(var at=le;++Be<Ee;){Se=pe[Be];var et=g[Se],Ct=v[Se];if(F)var Ms=le?F(Ct,et,Se,v,g,W):F(et,Ct,Se,g,v,W);if(!(Ms===void 0?et===Ct||re(et,Ct,O,F,W):Ms)){ke=!1;break}at||(at=Se=="constructor")}if(ke&&!at){var un=g.constructor,fn=v.constructor;un!=fn&&"constructor"in g&&"constructor"in v&&!(typeof un=="function"&&un instanceof un&&typeof fn=="function"&&fn instanceof fn)&&(ke=!1)}return W.delete(g),W.delete(v),ke}function Ns(g){return pd(g,Rd,Sd)}function ln(g,v){var O=g.__data__;return bd(v)?O[typeof v=="string"?"string":"hash"]:O.map}function Mt(g,v){var O=fr(g,v);return gd(O)?O:void 0}function _d(g){var v=Ye.call(g,St),O=g[St];try{g[St]=void 0;var F=!0}catch{}var re=bs.call(g);return F&&(v?g[St]=O:delete g[St]),re}var Sd=Os?function(g){return g==null?[]:(g=Object(g),_e(Os(g),function(v){return $s.call(g,v)}))}:Dd,st=pr;(yi&&st(new yi(new ArrayBuffer(1)))!=M||dr&&st(new dr)!=E||Ei&&st(Ei.resolve())!=D||vi&&st(new vi)!=q||wi&&st(new wi)!=z)&&(st=function(g){var v=pr(g),O=v==b?g.constructor:void 0,F=O?Tt(O):"";if(F)switch(F){case jf:return M;case Bf:return E;case qf:return D;case Hf:return q;case Gf:return z}return v});function Ad(g,v){return v=v??s,!!v&&(typeof g=="number"||he.test(g))&&g>-1&&g%1==0&&g<v}function bd(g){var v=typeof g;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?g!=="__proto__":g===null}function Td(g){return!!As&&As in g}function Cd(g){var v=g&&g.constructor,O=typeof v=="function"&&v.prototype||nn;return g===O}function $d(g){return bs.call(g)}function Tt(g){if(g!=null){try{return Ss.call(g)}catch{}try{return g+""}catch{}}return""}function Fs(g,v){return g===v||g!==g&&v!==v}var Od=Ps(function(){return arguments}())?Ps:function(g){return mr(g)&&Ye.call(g,"callee")&&!$s.call(g,"callee")},cn=Array.isArray;function Id(g){return g!=null&&Ls(g.length)&&!xs(g)}var Si=kf||Nd;function Pd(g,v){return Rs(g,v)}function xs(g){if(!Us(g))return!1;var v=pr(g);return v==m||v==w||v==f||v==x}function Ls(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=s}function Us(g){var v=typeof g;return g!=null&&(v=="object"||v=="function")}function mr(g){return g!=null&&typeof g=="object"}var ks=ye?mi(ye):yd;function Rd(g){return Id(g)?hd(g):Ed(g)}function Dd(){return[]}function Nd(){return!1}e.exports=Pd})(Hn,Hn.exports);var iw=Hn.exports;Object.defineProperty(Kr,"__esModule",{value:!0});Kr.DownloadedUpdateHelper=void 0;Kr.createTempUpdateFile=cw;const ow=Gr,sw=Le,el=iw,Ot=wt,Cr=K;class aw{constructor(t){this.cacheDir=t,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return Cr.join(this.cacheDir,"pending")}async validateDownloadedPath(t,r,n,i){if(this.versionInfo!=null&&this.file===t&&this.fileInfo!=null)return el(this.versionInfo,r)&&el(this.fileInfo.info,n.info)&&await(0,Ot.pathExists)(t)?t:null;const o=await this.getValidCachedUpdateFile(n,i);return o===null?null:(i.info(`Update has already been downloaded to ${t}).`),this._file=o,o)}async setDownloadedFile(t,r,n,i,o,s){this._file=t,this._packageFile=r,this.versionInfo=n,this.fileInfo=i,this._downloadedFileInfo={fileName:o,sha512:i.info.sha512,isAdminRightsRequired:i.info.isAdminRightsRequired===!0},s&&await(0,Ot.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,Ot.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(t,r){const n=this.getUpdateInfoFile();if(!await(0,Ot.pathExists)(n))return null;let o;try{o=await(0,Ot.readJson)(n)}catch(f){let c="No cached update info available";return f.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),c+=` (error on read: ${f.message})`),r.info(c),null}if(!((o==null?void 0:o.fileName)!==null))return r.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(t.info.sha512!==o.sha512)return r.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${o.sha512}, expected: ${t.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const a=Cr.join(this.cacheDirForPendingUpdate,o.fileName);if(!await(0,Ot.pathExists)(a))return r.info("Cached update file doesn't exist"),null;const l=await lw(a);return t.info.sha512!==l?(r.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${l}, expected: ${t.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=o,a)}getUpdateInfoFile(){return Cr.join(this.cacheDirForPendingUpdate,"update-info.json")}}Kr.DownloadedUpdateHelper=aw;function lw(e,t="sha512",r="base64",n){return new Promise((i,o)=>{const s=(0,ow.createHash)(t);s.on("error",o).setEncoding(r),(0,sw.createReadStream)(e,{...n,highWaterMark:1024*1024}).on("error",o).on("end",()=>{s.end(),i(s.read())}).pipe(s,{end:!1})})}async function cw(e,t,r){let n=0,i=Cr.join(t,e);for(let o=0;o<3;o++)try{return await(0,Ot.unlink)(i),i}catch(s){if(s.code==="ENOENT")return i;r.warn(`Error on remove temp update file: ${s}`),i=Cr.join(t,`${n++}-${e}`)}return i}var si={},Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.getAppCacheDir=fw;const ji=K,uw=vt;function fw(){const e=(0,uw.homedir)();let t;return process.platform==="win32"?t=process.env.LOCALAPPDATA||ji.join(e,"AppData","Local"):process.platform==="darwin"?t=ji.join(e,"Library","Caches"):t=process.env.XDG_CACHE_HOME||ji.join(e,".cache"),t}Object.defineProperty(si,"__esModule",{value:!0});si.ElectronAppAdapter=void 0;const tl=K,dw=Es;class hw{constructor(t=se.app){this.app=t}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?tl.join(process.resourcesPath,"app-update.yml"):tl.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,dw.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(t){this.app.once("quit",(r,n)=>t(n))}}si.ElectronAppAdapter=hw;var pf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.NET_SESSION_NAME=void 0,e.getNetSession=r;const t=ge;e.NET_SESSION_NAME="electron-updater";function r(){return se.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}class n extends t.HttpExecutor{constructor(o){super(),this.proxyLoginCallback=o,this.cachedSession=null}async download(o,s,a){return await a.cancellationToken.createPromise((l,f,c)=>{const u={headers:a.headers||void 0,redirect:"manual"};(0,t.configureRequestUrl)(o,u),(0,t.configureRequestOptions)(u),this.doDownload(u,{destination:s,options:a,onCancel:c,callback:h=>{h==null?l(s):f(h)},responseHandler:null},0)})}createRequest(o,s){o.headers&&o.headers.Host&&(o.host=o.headers.Host,delete o.headers.Host),this.cachedSession==null&&(this.cachedSession=r());const a=se.net.request({...o,session:this.cachedSession});return a.on("response",s),this.proxyLoginCallback!=null&&a.on("login",this.proxyLoginCallback),a}addRedirectHandlers(o,s,a,l,f){o.on("redirect",(c,u,h)=>{o.abort(),l>this.maxRedirects?a(this.createMaxRedirectError()):f(t.HttpExecutor.prepareRedirectUrlOptions(h,s))})}}e.ElectronHttpExecutor=n})(pf);var Qr={},Me={},pw="[object Symbol]",mf=/[\\^$.*+?()[\]{}|]/g,mw=RegExp(mf.source),gw=typeof Ce=="object"&&Ce&&Ce.Object===Object&&Ce,yw=typeof self=="object"&&self&&self.Object===Object&&self,Ew=gw||yw||Function("return this")(),vw=Object.prototype,ww=vw.toString,rl=Ew.Symbol,nl=rl?rl.prototype:void 0,il=nl?nl.toString:void 0;function _w(e){if(typeof e=="string")return e;if(Aw(e))return il?il.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Sw(e){return!!e&&typeof e=="object"}function Aw(e){return typeof e=="symbol"||Sw(e)&&ww.call(e)==pw}function bw(e){return e==null?"":_w(e)}function Tw(e){return e=bw(e),e&&mw.test(e)?e.replace(mf,"\\$&"):e}var Cw=Tw;Object.defineProperty(Me,"__esModule",{value:!0});Me.newBaseUrl=Ow;Me.newUrlFromBase=jo;Me.getChannelFilename=Iw;Me.blockmapFiles=Pw;const gf=sr,$w=Cw;function Ow(e){const t=new gf.URL(e);return t.pathname.endsWith("/")||(t.pathname+="/"),t}function jo(e,t,r=!1){const n=new gf.URL(e,t),i=t.search;return i!=null&&i.length!==0?n.search=i:r&&(n.search=`noCache=${Date.now().toString(32)}`),n}function Iw(e){return`${e}.yml`}function Pw(e,t,r){const n=jo(`${e.pathname}.blockmap`,e);return[jo(`${e.pathname.replace(new RegExp($w(r),"g"),t)}.blockmap`,e),n]}var de={};Object.defineProperty(de,"__esModule",{value:!0});de.Provider=void 0;de.findFile=Nw;de.parseUpdateInfo=Fw;de.getFileList=yf;de.resolveFiles=xw;const yt=ge,Rw=we,ol=Me;class Dw{constructor(t){this.runtimeOptions=t,this.requestHeaders=null,this.executor=t.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const t=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(t==="x64"?"":`-${t}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(t){return`${t}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(t){this.requestHeaders=t}httpRequest(t,r,n){return this.executor.request(this.createRequestOptions(t,r),n)}createRequestOptions(t,r){const n={};return this.requestHeaders==null?r!=null&&(n.headers=r):n.headers=r==null?this.requestHeaders:{...this.requestHeaders,...r},(0,yt.configureRequestUrl)(t,n),n}}de.Provider=Dw;function Nw(e,t,r){if(e.length===0)throw(0,yt.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const n=e.find(i=>i.url.pathname.toLowerCase().endsWith(`.${t}`));return n??(r==null?e[0]:e.find(i=>!r.some(o=>i.url.pathname.toLowerCase().endsWith(`.${o}`))))}function Fw(e,t,r){if(e==null)throw(0,yt.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${r}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let n;try{n=(0,Rw.load)(e)}catch(i){throw(0,yt.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${r}): ${i.stack||i.message}, rawData: ${e}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return n}function yf(e){const t=e.files;if(t!=null&&t.length>0)return t;if(e.path!=null)return[{url:e.path,sha2:e.sha2,sha512:e.sha512}];throw(0,yt.newError)(`No files provided: ${(0,yt.safeStringifyJson)(e)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function xw(e,t,r=n=>n){const i=yf(e).map(a=>{if(a.sha2==null&&a.sha512==null)throw(0,yt.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,yt.safeStringifyJson)(a)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,ol.newUrlFromBase)(r(a.url),t),info:a}}),o=e.packages,s=o==null?null:o[process.arch]||o.ia32;return s!=null&&(i[0].packageInfo={...s,path:(0,ol.newUrlFromBase)(r(s.path),t).href}),i}Object.defineProperty(Qr,"__esModule",{value:!0});Qr.GenericProvider=void 0;const sl=ge,Bi=Me,qi=de;class Lw extends qi.Provider{constructor(t,r,n){super(n),this.configuration=t,this.updater=r,this.baseUrl=(0,Bi.newBaseUrl)(this.configuration.url)}get channel(){const t=this.updater.channel||this.configuration.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){const t=(0,Bi.getChannelFilename)(this.channel),r=(0,Bi.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);for(let n=0;;n++)try{return(0,qi.parseUpdateInfo)(await this.httpRequest(r),t,r)}catch(i){if(i instanceof sl.HttpError&&i.statusCode===404)throw(0,sl.newError)(`Cannot find channel "${t}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&n<3){await new Promise((o,s)=>{try{setTimeout(o,1e3*n)}catch(a){s(a)}});continue}throw i}}resolveFiles(t){return(0,qi.resolveFiles)(t,this.baseUrl)}}Qr.GenericProvider=Lw;var ai={},li={};Object.defineProperty(li,"__esModule",{value:!0});li.BitbucketProvider=void 0;const al=ge,Hi=Me,Gi=de;class Uw extends Gi.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=r;const{owner:i,slug:o}=t;this.baseUrl=(0,Hi.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${o}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const t=new al.CancellationToken,r=(0,Hi.getChannelFilename)(this.getCustomChannelName(this.channel)),n=(0,Hi.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(n,void 0,t);return(0,Gi.parseUpdateInfo)(i,r,n)}catch(i){throw(0,al.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,Gi.resolveFiles)(t,this.baseUrl)}toString(){const{owner:t,slug:r}=this.configuration;return`Bitbucket (owner: ${t}, slug: ${r}, channel: ${this.channel})`}}li.BitbucketProvider=Uw;var Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.GitHubProvider=Et.BaseGitHubProvider=void 0;Et.computeReleaseNotes=vf;const tt=ge,Jt=hf,kw=sr,Kt=Me,Bo=de,Wi=/\/tag\/([^/]+)$/;class Ef extends Bo.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.options=t,this.baseUrl=(0,Kt.newBaseUrl)((0,tt.githubUrl)(t,r));const i=r==="github.com"?"api.github.com":r;this.baseApiUrl=(0,Kt.newBaseUrl)((0,tt.githubUrl)(t,i))}computeGithubBasePath(t){const r=this.options.host;return r&&!["github.com","api.github.com"].includes(r)?`/api/v3${t}`:t}}Et.BaseGitHubProvider=Ef;class Mw extends Ef{constructor(t,r,n){super(t,"github.com",n),this.options=t,this.updater=r}get channel(){const t=this.updater.channel||this.options.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){var t,r,n,i,o;const s=new tt.CancellationToken,a=await this.httpRequest((0,Kt.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},s),l=(0,tt.parseXml)(a);let f=l.element("entry",!1,"No published versions on GitHub"),c=null;try{if(this.updater.allowPrerelease){const _=((t=this.updater)===null||t===void 0?void 0:t.channel)||((r=Jt.prerelease(this.updater.currentVersion))===null||r===void 0?void 0:r[0])||null;if(_===null)c=Wi.exec(f.element("link").attribute("href"))[1];else for(const A of l.getElements("entry")){const b=Wi.exec(A.element("link").attribute("href"));if(b===null)continue;const D=b[1],x=((n=Jt.prerelease(D))===null||n===void 0?void 0:n[0])||null,B=!_||["alpha","beta"].includes(_),q=x!==null&&!["alpha","beta"].includes(String(x));if(B&&!q&&!(_==="beta"&&x==="alpha")){c=D;break}if(x&&x===_){c=D;break}}}else{c=await this.getLatestTagName(s);for(const _ of l.getElements("entry"))if(Wi.exec(_.element("link").attribute("href"))[1]===c){f=_;break}}}catch(_){throw(0,tt.newError)(`Cannot parse releases feed: ${_.stack||_.message},
XML:
${a}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(c==null)throw(0,tt.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let u,h="",m="";const w=async _=>{h=(0,Kt.getChannelFilename)(_),m=(0,Kt.newUrlFromBase)(this.getBaseDownloadPath(String(c),h),this.baseUrl);const A=this.createRequestOptions(m);try{return await this.executor.request(A,s)}catch(b){throw b instanceof tt.HttpError&&b.statusCode===404?(0,tt.newError)(`Cannot find ${h} in the latest release artifacts (${m}): ${b.stack||b.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):b}};try{let _=this.channel;this.updater.allowPrerelease&&(!((i=Jt.prerelease(c))===null||i===void 0)&&i[0])&&(_=this.getCustomChannelName(String((o=Jt.prerelease(c))===null||o===void 0?void 0:o[0]))),u=await w(_)}catch(_){if(this.updater.allowPrerelease)u=await w(this.getDefaultChannelName());else throw _}const E=(0,Bo.parseUpdateInfo)(u,h,m);return E.releaseName==null&&(E.releaseName=f.elementValueOrEmpty("title")),E.releaseNotes==null&&(E.releaseNotes=vf(this.updater.currentVersion,this.updater.fullChangelog,l,f)),{tag:c,...E}}async getLatestTagName(t){const r=this.options,n=r.host==null||r.host==="github.com"?(0,Kt.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new kw.URL(`${this.computeGithubBasePath(`/repos/${r.owner}/${r.repo}/releases`)}/latest`,this.baseApiUrl);try{const i=await this.httpRequest(n,{Accept:"application/json"},t);return i==null?null:JSON.parse(i).tag_name}catch(i){throw(0,tt.newError)(`Unable to find latest version on GitHub (${n}), please ensure a production release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(t){return(0,Bo.resolveFiles)(t,this.baseUrl,r=>this.getBaseDownloadPath(t.tag,r.replace(/ /g,"-")))}getBaseDownloadPath(t,r){return`${this.basePath}/download/${t}/${r}`}}Et.GitHubProvider=Mw;function ll(e){const t=e.elementValueOrEmpty("content");return t==="No content."?"":t}function vf(e,t,r,n){if(!t)return ll(n);const i=[];for(const o of r.getElements("entry")){const s=/\/tag\/v?([^/]+)$/.exec(o.element("link").attribute("href"))[1];Jt.lt(e,s)&&i.push({version:s,note:ll(o)})}return i.sort((o,s)=>Jt.rcompare(o.version,s.version))}var ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.KeygenProvider=void 0;const cl=ge,Vi=Me,zi=de;class jw extends zi.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=r,this.defaultHostname="api.keygen.sh";const i=this.configuration.host||this.defaultHostname;this.baseUrl=(0,Vi.newBaseUrl)(`https://${i}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const t=new cl.CancellationToken,r=(0,Vi.getChannelFilename)(this.getCustomChannelName(this.channel)),n=(0,Vi.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(n,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},t);return(0,zi.parseUpdateInfo)(i,r,n)}catch(i){throw(0,cl.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,zi.resolveFiles)(t,this.baseUrl)}toString(){const{account:t,product:r,platform:n}=this.configuration;return`Keygen (account: ${t}, product: ${r}, platform: ${n}, channel: ${this.channel})`}}ci.KeygenProvider=jw;var ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.PrivateGitHubProvider=void 0;const Ht=ge,Bw=we,qw=K,ul=sr,fl=Me,Hw=Et,Gw=de;class Ww extends Hw.BaseGitHubProvider{constructor(t,r,n,i){super(t,"api.github.com",i),this.updater=r,this.token=n}createRequestOptions(t,r){const n=super.createRequestOptions(t,r);return n.redirect="manual",n}async getLatestVersion(){const t=new Ht.CancellationToken,r=(0,fl.getChannelFilename)(this.getDefaultChannelName()),n=await this.getLatestVersionInfo(t),i=n.assets.find(a=>a.name===r);if(i==null)throw(0,Ht.newError)(`Cannot find ${r} in the release ${n.html_url||n.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const o=new ul.URL(i.url);let s;try{s=(0,Bw.load)(await this.httpRequest(o,this.configureHeaders("application/octet-stream"),t))}catch(a){throw a instanceof Ht.HttpError&&a.statusCode===404?(0,Ht.newError)(`Cannot find ${r} in the latest release artifacts (${o}): ${a.stack||a.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):a}return s.assets=n.assets,s}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(t){return{accept:t,authorization:`token ${this.token}`}}async getLatestVersionInfo(t){const r=this.updater.allowPrerelease;let n=this.basePath;r||(n=`${n}/latest`);const i=(0,fl.newUrlFromBase)(n,this.baseUrl);try{const o=JSON.parse(await this.httpRequest(i,this.configureHeaders("application/vnd.github.v3+json"),t));return r?o.find(s=>s.prerelease)||o[0]:o}catch(o){throw(0,Ht.newError)(`Unable to find latest version on GitHub (${i}), please ensure a production release exists: ${o.stack||o.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(t){return(0,Gw.getFileList)(t).map(r=>{const n=qw.posix.basename(r.url).replace(/ /g,"-"),i=t.assets.find(o=>o!=null&&o.name===n);if(i==null)throw(0,Ht.newError)(`Cannot find asset "${n}" in: ${JSON.stringify(t.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new ul.URL(i.url),info:r}})}}ui.PrivateGitHubProvider=Ww;Object.defineProperty(ai,"__esModule",{value:!0});ai.isUrlProbablySupportMultiRangeRequests=wf;ai.createClient=Jw;const An=ge,Vw=li,dl=Qr,zw=Et,Yw=ci,Xw=ui;function wf(e){return!e.includes("s3.amazonaws.com")}function Jw(e,t,r){if(typeof e=="string")throw(0,An.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const n=e.provider;switch(n){case"github":{const i=e,o=(i.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||i.token;return o==null?new zw.GitHubProvider(i,t,r):new Xw.PrivateGitHubProvider(i,t,o,r)}case"bitbucket":return new Vw.BitbucketProvider(e,t,r);case"keygen":return new Yw.KeygenProvider(e,t,r);case"s3":case"spaces":return new dl.GenericProvider({provider:"generic",url:(0,An.getS3LikeProviderBaseUrl)(e),channel:e.channel||null},t,{...r,isUseMultipleRangeRequest:!1});case"generic":{const i=e;return new dl.GenericProvider(i,t,{...r,isUseMultipleRangeRequest:i.useMultipleRangeRequest!==!1&&wf(i.url)})}case"custom":{const i=e,o=i.updateProvider;if(!o)throw(0,An.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new o(i,t,r)}default:throw(0,An.newError)(`Unsupported provider: ${n}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}var fi={},Zr={},ur={},Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.OperationKind=void 0;Ut.computeOperations=Kw;var Rt;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(Rt||(Ut.OperationKind=Rt={}));function Kw(e,t,r){const n=pl(e.files),i=pl(t.files);let o=null;const s=t.files[0],a=[],l=s.name,f=n.get(l);if(f==null)throw new Error(`no file ${l} in old blockmap`);const c=i.get(l);let u=0;const{checksumToOffset:h,checksumToOldSize:m}=Zw(n.get(l),f.offset,r);let w=s.offset;for(let E=0;E<c.checksums.length;w+=c.sizes[E],E++){const _=c.sizes[E],A=c.checksums[E];let b=h.get(A);b!=null&&m.get(A)!==_&&(r.warn(`Checksum ("${A}") matches, but size differs (old: ${m.get(A)}, new: ${_})`),b=void 0),b===void 0?(u++,o!=null&&o.kind===Rt.DOWNLOAD&&o.end===w?o.end+=_:(o={kind:Rt.DOWNLOAD,start:w,end:w+_},hl(o,a,A,E))):o!=null&&o.kind===Rt.COPY&&o.end===b?o.end+=_:(o={kind:Rt.COPY,start:b,end:b+_},hl(o,a,A,E))}return u>0&&r.info(`File${s.name==="file"?"":" "+s.name} has ${u} changed blocks`),a}const Qw=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function hl(e,t,r,n){if(Qw&&t.length!==0){const i=t[t.length-1];if(i.kind===e.kind&&e.start<i.end&&e.start>i.start){const o=[i.start,i.end,e.start,e.end].reduce((s,a)=>s<a?s:a);throw new Error(`operation (block index: ${n}, checksum: ${r}, kind: ${Rt[e.kind]}) overlaps previous operation (checksum: ${r}):
abs: ${i.start} until ${i.end} and ${e.start} until ${e.end}
rel: ${i.start-o} until ${i.end-o} and ${e.start-o} until ${e.end-o}`)}}t.push(e)}function Zw(e,t,r){const n=new Map,i=new Map;let o=t;for(let s=0;s<e.checksums.length;s++){const a=e.checksums[s],l=e.sizes[s],f=i.get(a);if(f===void 0)n.set(a,o),i.set(a,l);else if(r.debug!=null){const c=f===l?"(same size)":`(size: ${f}, this size: ${l})`;r.debug(`${a} duplicated in blockmap ${c}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}o+=l}return{checksumToOffset:n,checksumToOldSize:i}}function pl(e){const t=new Map;for(const r of e)t.set(r.name,r);return t}Object.defineProperty(ur,"__esModule",{value:!0});ur.DataSplitter=void 0;ur.copyData=_f;const bn=ge,e_=Le,t_=qr,r_=Ut,ml=Buffer.from(`\r
\r
`);var ct;(function(e){e[e.INIT=0]="INIT",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY"})(ct||(ct={}));function _f(e,t,r,n,i){const o=(0,e_.createReadStream)("",{fd:r,autoClose:!1,start:e.start,end:e.end-1});o.on("error",n),o.once("end",i),o.pipe(t,{end:!1})}class n_ extends t_.Writable{constructor(t,r,n,i,o,s){super(),this.out=t,this.options=r,this.partIndexToTaskIndex=n,this.partIndexToLength=o,this.finishHandler=s,this.partIndex=-1,this.headerListBuffer=null,this.readState=ct.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=i.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(t,r,n){if(this.isFinished){console.error(`Trailing ignored data: ${t.length} bytes`);return}this.handleData(t).then(n).catch(n)}async handleData(t){let r=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,bn.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const n=Math.min(this.ignoreByteCount,t.length);this.ignoreByteCount-=n,r=n}else if(this.remainingPartDataCount>0){const n=Math.min(this.remainingPartDataCount,t.length);this.remainingPartDataCount-=n,await this.processPartData(t,0,n),r=n}if(r!==t.length){if(this.readState===ct.HEADER){const n=this.searchHeaderListEnd(t,r);if(n===-1)return;r=n,this.readState=ct.BODY,this.headerListBuffer=null}for(;;){if(this.readState===ct.BODY)this.readState=ct.INIT;else{this.partIndex++;let s=this.partIndexToTaskIndex.get(this.partIndex);if(s==null)if(this.isFinished)s=this.options.end;else throw(0,bn.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const a=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(a<s)await this.copyExistingData(a,s);else if(a>s)throw(0,bn.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(r=this.searchHeaderListEnd(t,r),r===-1){this.readState=ct.HEADER;return}}const n=this.partIndexToLength[this.partIndex],i=r+n,o=Math.min(i,t.length);if(await this.processPartStarted(t,r,o),this.remainingPartDataCount=n-(o-r),this.remainingPartDataCount>0)return;if(r=i+this.boundaryLength,r>=t.length){this.ignoreByteCount=this.boundaryLength-(t.length-i);return}}}}copyExistingData(t,r){return new Promise((n,i)=>{const o=()=>{if(t===r){n();return}const s=this.options.tasks[t];if(s.kind!==r_.OperationKind.COPY){i(new Error("Task kind must be COPY"));return}_f(s,this.out,this.options.oldFileFd,i,()=>{t++,o()})};o()})}searchHeaderListEnd(t,r){const n=t.indexOf(ml,r);if(n!==-1)return n+ml.length;const i=r===0?t:t.slice(r);return this.headerListBuffer==null?this.headerListBuffer=i:this.headerListBuffer=Buffer.concat([this.headerListBuffer,i]),-1}onPartEnd(){const t=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==t)throw(0,bn.newError)(`Expected length: ${t} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(t,r,n){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(t,r,n)}processPartData(t,r,n){this.actualPartLength+=n-r;const i=this.out;return i.write(r===0&&t.length===n?t:t.slice(r,n))?Promise.resolve():new Promise((o,s)=>{i.on("error",s),i.once("drain",()=>{i.removeListener("error",s),o()})})}}ur.DataSplitter=n_;var di={};Object.defineProperty(di,"__esModule",{value:!0});di.executeTasksUsingMultipleRangeRequests=i_;di.checkIsRangesSupported=Ho;const qo=ge,gl=ur,yl=Ut;function i_(e,t,r,n,i){const o=s=>{if(s>=t.length){e.fileMetadataBuffer!=null&&r.write(e.fileMetadataBuffer),r.end();return}const a=s+1e3;o_(e,{tasks:t,start:s,end:Math.min(t.length,a),oldFileFd:n},r,()=>o(a),i)};return o}function o_(e,t,r,n,i){let o="bytes=",s=0;const a=new Map,l=[];for(let u=t.start;u<t.end;u++){const h=t.tasks[u];h.kind===yl.OperationKind.DOWNLOAD&&(o+=`${h.start}-${h.end-1}, `,a.set(s,u),s++,l.push(h.end-h.start))}if(s<=1){const u=h=>{if(h>=t.end){n();return}const m=t.tasks[h++];if(m.kind===yl.OperationKind.COPY)(0,gl.copyData)(m,r,t.oldFileFd,i,()=>u(h));else{const w=e.createRequestOptions();w.headers.Range=`bytes=${m.start}-${m.end-1}`;const E=e.httpExecutor.createRequest(w,_=>{Ho(_,i)&&(_.pipe(r,{end:!1}),_.once("end",()=>u(h)))});e.httpExecutor.addErrorAndTimeoutHandlers(E,i),E.end()}};u(t.start);return}const f=e.createRequestOptions();f.headers.Range=o.substring(0,o.length-2);const c=e.httpExecutor.createRequest(f,u=>{if(!Ho(u,i))return;const h=(0,qo.safeGetHeader)(u,"content-type"),m=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(h);if(m==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${h}"`));return}const w=new gl.DataSplitter(r,t,a,m[1]||m[2],l,n);w.on("error",i),u.pipe(w),u.on("end",()=>{setTimeout(()=>{c.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(c,i),c.end()}function Ho(e,t){if(e.statusCode>=400)return t((0,qo.createHttpError)(e)),!1;if(e.statusCode!==206){const r=(0,qo.safeGetHeader)(e,"accept-ranges");if(r==null||r==="none")return t(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.ProgressDifferentialDownloadCallbackTransform=void 0;const s_=qr;var Qt;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(Qt||(Qt={}));class a_ extends s_.Transform{constructor(t,r,n){super(),this.progressDifferentialDownloadInfo=t,this.cancellationToken=r,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=Qt.COPY,this.nextUpdate=this.start+1e3}_transform(t,r,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}if(this.operationType==Qt.COPY){n(null,t);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=i+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),n(null,t)}beginFileCopy(){this.operationType=Qt.COPY}beginRangeDownload(){this.operationType=Qt.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,t(null)}}hi.ProgressDifferentialDownloadCallbackTransform=a_;Object.defineProperty(Zr,"__esModule",{value:!0});Zr.DifferentialDownloader=void 0;const vr=ge,Yi=wt,l_=Le,c_=ur,u_=sr,Tn=Ut,El=di,f_=hi;class d_{constructor(t,r,n){this.blockAwareFileInfo=t,this.httpExecutor=r,this.options=n,this.fileMetadataBuffer=null,this.logger=n.logger}createRequestOptions(){const t={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,vr.configureRequestUrl)(this.options.newUrl,t),(0,vr.configureRequestOptions)(t),t}doDownload(t,r){if(t.version!==r.version)throw new Error(`version is different (${t.version} - ${r.version}), full download is required`);const n=this.logger,i=(0,Tn.computeOperations)(t,r,n);n.debug!=null&&n.debug(JSON.stringify(i,null,2));let o=0,s=0;for(const l of i){const f=l.end-l.start;l.kind===Tn.OperationKind.DOWNLOAD?o+=f:s+=f}const a=this.blockAwareFileInfo.size;if(o+s+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==a)throw new Error(`Internal error, size mismatch: downloadSize: ${o}, copySize: ${s}, newSize: ${a}`);return n.info(`Full: ${vl(a)}, To download: ${vl(o)} (${Math.round(o/(a/100))}%)`),this.downloadFile(i)}downloadFile(t){const r=[],n=()=>Promise.all(r.map(i=>(0,Yi.close)(i.descriptor).catch(o=>{this.logger.error(`cannot close file "${i.path}": ${o}`)})));return this.doDownloadFile(t,r).then(n).catch(i=>n().catch(o=>{try{this.logger.error(`cannot close files: ${o}`)}catch(s){try{console.error(s)}catch{}}throw i}).then(()=>{throw i}))}async doDownloadFile(t,r){const n=await(0,Yi.open)(this.options.oldFile,"r");r.push({descriptor:n,path:this.options.oldFile});const i=await(0,Yi.open)(this.options.newFile,"w");r.push({descriptor:i,path:this.options.newFile});const o=(0,l_.createWriteStream)(this.options.newFile,{fd:i});await new Promise((s,a)=>{const l=[];let f;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const A=[];let b=0;for(const x of t)x.kind===Tn.OperationKind.DOWNLOAD&&(A.push(x.end-x.start),b+=x.end-x.start);const D={expectedByteCounts:A,grandTotal:b};f=new f_.ProgressDifferentialDownloadCallbackTransform(D,this.options.cancellationToken,this.options.onProgress),l.push(f)}const c=new vr.DigestTransform(this.blockAwareFileInfo.sha512);c.isValidateOnEnd=!1,l.push(c),o.on("finish",()=>{o.close(()=>{r.splice(1,1);try{c.validate()}catch(A){a(A);return}s(void 0)})}),l.push(o);let u=null;for(const A of l)A.on("error",a),u==null?u=A:u=u.pipe(A);const h=l[0];let m;if(this.options.isUseMultipleRangeRequest){m=(0,El.executeTasksUsingMultipleRangeRequests)(this,t,h,n,a),m(0);return}let w=0,E=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const _=this.createRequestOptions();_.redirect="manual",m=A=>{var b,D;if(A>=t.length){this.fileMetadataBuffer!=null&&h.write(this.fileMetadataBuffer),h.end();return}const x=t[A++];if(x.kind===Tn.OperationKind.COPY){f&&f.beginFileCopy(),(0,c_.copyData)(x,h,n,a,()=>m(A));return}const B=`bytes=${x.start}-${x.end-1}`;_.headers.range=B,(D=(b=this.logger)===null||b===void 0?void 0:b.debug)===null||D===void 0||D.call(b,`download range: ${B}`),f&&f.beginRangeDownload();const q=this.httpExecutor.createRequest(_,j=>{j.on("error",a),j.on("aborted",()=>{a(new Error("response has been aborted by the server"))}),j.statusCode>=400&&a((0,vr.createHttpError)(j)),j.pipe(h,{end:!1}),j.once("end",()=>{f&&f.endRangeDownload(),++w===100?(w=0,setTimeout(()=>m(A),1e3)):m(A)})});q.on("redirect",(j,ce,y)=>{this.logger.info(`Redirect to ${h_(y)}`),E=y,(0,vr.configureRequestUrl)(new u_.URL(E),_),q.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(q,a),q.end()},m(0)})}async readRemoteBytes(t,r){const n=Buffer.allocUnsafe(r+1-t),i=this.createRequestOptions();i.headers.range=`bytes=${t}-${r}`;let o=0;if(await this.request(i,s=>{s.copy(n,o),o+=s.length}),o!==n.length)throw new Error(`Received data length ${o} is not equal to expected ${n.length}`);return n}request(t,r){return new Promise((n,i)=>{const o=this.httpExecutor.createRequest(t,s=>{(0,El.checkIsRangesSupported)(s,i)&&(s.on("error",i),s.on("aborted",()=>{i(new Error("response has been aborted by the server"))}),s.on("data",r),s.on("end",()=>n()))});this.httpExecutor.addErrorAndTimeoutHandlers(o,i),o.end()})}}Zr.DifferentialDownloader=d_;function vl(e,t=" KB"){return new Intl.NumberFormat("en").format((e/1024).toFixed(2))+t}function h_(e){const t=e.indexOf("?");return t<0?e:e.substring(0,t)}Object.defineProperty(fi,"__esModule",{value:!0});fi.GenericDifferentialDownloader=void 0;const p_=Zr;class m_ extends p_.DifferentialDownloader{download(t,r){return this.doDownload(t,r)}}fi.GenericDifferentialDownloader=m_;var _t={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.CancellationToken=void 0,e.addHandler=n;const t=ge;Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class r{constructor(o){this.emitter=o}login(o){n(this.emitter,"login",o)}progress(o){n(this.emitter,e.DOWNLOAD_PROGRESS,o)}updateDownloaded(o){n(this.emitter,e.UPDATE_DOWNLOADED,o)}updateCancelled(o){n(this.emitter,"update-cancelled",o)}}e.UpdaterSignal=r;function n(i,o,s){i.on(o,s)}})(_t);Object.defineProperty(pt,"__esModule",{value:!0});pt.NoOpLogger=pt.AppUpdater=void 0;const Te=ge,g_=Gr,y_=vt,E_=Wn,Gt=wt,v_=we,Xi=ei,$t=K,It=hf,wl=Kr,w_=si,_l=pf,__=Qr,Ji=ai,S_=mc,A_=Me,b_=fi,Wt=_t;class vs extends E_.EventEmitter{get channel(){return this._channel}set channel(t){if(this._channel!=null){if(typeof t!="string")throw(0,Te.newError)(`Channel must be a string, but got: ${t}`,"ERR_UPDATER_INVALID_CHANNEL");if(t.length===0)throw(0,Te.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=t,this.allowDowngrade=!0}addAuthHeader(t){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:t})}get netSession(){return(0,_l.getNetSession)()}get logger(){return this._logger}set logger(t){this._logger=t??new Sf}set updateConfigPath(t){this.clientPromise=null,this._appUpdateConfigPath=t,this.configOnDisk=new Xi.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(t){t&&(this._isUpdateSupported=t)}constructor(t,r){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new Wt.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=o=>this.checkIfUpdateSupported(o),this.clientPromise=null,this.stagingUserIdPromise=new Xi.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new Xi.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",o=>{this._logger.error(`Error: ${o.stack||o.message}`)}),r==null?(this.app=new w_.ElectronAppAdapter,this.httpExecutor=new _l.ElectronHttpExecutor((o,s)=>this.emit("login",o,s))):(this.app=r,this.httpExecutor=null);const n=this.app.version,i=(0,It.parse)(n);if(i==null)throw(0,Te.newError)(`App version is not a valid semver version: "${n}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=i,this.allowPrerelease=T_(i),t!=null&&(this.setFeedURL(t),typeof t!="string"&&t.requestHeaders&&(this.requestHeaders=t.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(t){const r=this.createProviderRuntimeOptions();let n;typeof t=="string"?n=new __.GenericProvider({provider:"generic",url:t},this,{...r,isUseMultipleRangeRequest:(0,Ji.isUrlProbablySupportMultiRangeRequests)(t)}):n=(0,Ji.createClient)(t,this,r),this.clientPromise=Promise.resolve(n)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let t=this.checkForUpdatesPromise;if(t!=null)return this._logger.info("Checking for update (already in progress)"),t;const r=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),t=this.doCheckForUpdates().then(n=>(r(),n)).catch(n=>{throw r(),this.emit("error",n,`Cannot check for updates: ${(n.stack||n).toString()}`),n}),this.checkForUpdatesPromise=t,t}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(t){return this.checkForUpdates().then(r=>r!=null&&r.downloadPromise?(r.downloadPromise.then(()=>{const n=vs.formatDownloadNotification(r.updateInfo.version,this.app.name,t);new se.Notification(n).show()}),r):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),r))}static formatDownloadNotification(t,r,n){return n==null&&(n={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),n={title:n.title.replace("{appName}",r).replace("{version}",t),body:n.body.replace("{appName}",r).replace("{version}",t)},n}async isStagingMatch(t){const r=t.stagingPercentage;let n=r;if(n==null)return!0;if(n=parseInt(n,10),isNaN(n))return this._logger.warn(`Staging percentage is NaN: ${r}`),!0;n=n/100;const i=await this.stagingUserIdPromise.value,s=Te.UUID.parse(i).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${n}, percentage: ${s}, user id: ${i}`),s<n}computeFinalHeaders(t){return this.requestHeaders!=null&&Object.assign(t,this.requestHeaders),t}async isUpdateAvailable(t){const r=(0,It.parse)(t.version);if(r==null)throw(0,Te.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${t.version}"`,"ERR_UPDATER_INVALID_VERSION");const n=this.currentVersion;if((0,It.eq)(r,n)||!await Promise.resolve(this.isUpdateSupported(t))||!await this.isStagingMatch(t))return!1;const o=(0,It.gt)(r,n),s=(0,It.lt)(r,n);return o?!0:this.allowDowngrade&&s}checkIfUpdateSupported(t){const r=t==null?void 0:t.minimumSystemVersion,n=(0,y_.release)();if(r)try{if((0,It.lt)(n,r))return this._logger.info(`Current OS version ${n} is less than the minimum OS version required ${r} for version ${n}`),!1}catch(i){this._logger.warn(`Failed to compare current OS version(${n}) with minimum OS version(${r}): ${(i.message||i).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(n=>(0,Ji.createClient)(n,this,this.createProviderRuntimeOptions())));const t=await this.clientPromise,r=await this.stagingUserIdPromise.value;return t.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":r})),{info:await t.getLatestVersion(),provider:t}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const t=await this.getUpdateInfoAndProvider(),r=t.info;if(!await this.isUpdateAvailable(r))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${r.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",r),{isUpdateAvailable:!1,versionInfo:r,updateInfo:r};this.updateInfoAndProvider=t,this.onUpdateAvailable(r);const n=new Te.CancellationToken;return{isUpdateAvailable:!0,versionInfo:r,updateInfo:r,cancellationToken:n,downloadPromise:this.autoDownload?this.downloadUpdate(n):null}}onUpdateAvailable(t){this._logger.info(`Found version ${t.version} (url: ${(0,Te.asArray)(t.files).map(r=>r.url).join(", ")})`),this.emit("update-available",t)}downloadUpdate(t=new Te.CancellationToken){const r=this.updateInfoAndProvider;if(r==null){const i=new Error("Please check update first");return this.dispatchError(i),Promise.reject(i)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,Te.asArray)(r.info.files).map(i=>i.url).join(", ")}`);const n=i=>{if(!(i instanceof Te.CancellationError))try{this.dispatchError(i)}catch(o){this._logger.warn(`Cannot dispatch error event: ${o.stack||o}`)}return i};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:r,requestHeaders:this.computeRequestHeaders(r.provider),cancellationToken:t,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(i=>{throw n(i)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(t){this.emit("error",t,(t.stack||t).toString())}dispatchUpdateDownloaded(t){this.emit(Wt.UPDATE_DOWNLOADED,t)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,v_.load)(await(0,Gt.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(t){const r=t.fileExtraDownloadHeaders;if(r!=null){const n=this.requestHeaders;return n==null?r:{...r,...n}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const t=$t.join(this.app.userDataPath,".updaterId");try{const n=await(0,Gt.readFile)(t,"utf-8");if(Te.UUID.check(n))return n;this._logger.warn(`Staging user id file exists, but content was invalid: ${n}`)}catch(n){n.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${n}`)}const r=Te.UUID.v5((0,g_.randomBytes)(4096),Te.UUID.OID);this._logger.info(`Generated new staging user ID: ${r}`);try{await(0,Gt.outputFile)(t,r)}catch(n){this._logger.warn(`Couldn't write out staging user ID: ${n}`)}return r}get isAddNoCacheQuery(){const t=this.requestHeaders;if(t==null)return!0;for(const r of Object.keys(t)){const n=r.toLowerCase();if(n==="authorization"||n==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let t=this.downloadedUpdateHelper;if(t==null){const r=(await this.configOnDisk.value).updaterCacheDirName,n=this._logger;r==null&&n.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const i=$t.join(this.app.baseCachePath,r||this.app.name);n.debug!=null&&n.debug(`updater cache dir: ${i}`),t=new wl.DownloadedUpdateHelper(i),this.downloadedUpdateHelper=t}return t}async executeDownload(t){const r=t.fileInfo,n={headers:t.downloadUpdateOptions.requestHeaders,cancellationToken:t.downloadUpdateOptions.cancellationToken,sha2:r.info.sha2,sha512:r.info.sha512};this.listenerCount(Wt.DOWNLOAD_PROGRESS)>0&&(n.onProgress=b=>this.emit(Wt.DOWNLOAD_PROGRESS,b));const i=t.downloadUpdateOptions.updateInfoAndProvider.info,o=i.version,s=r.packageInfo;function a(){const b=decodeURIComponent(t.fileInfo.url.pathname);return b.endsWith(`.${t.fileExtension}`)?$t.basename(b):t.fileInfo.info.url}const l=await this.getOrCreateDownloadHelper(),f=l.cacheDirForPendingUpdate;await(0,Gt.mkdir)(f,{recursive:!0});const c=a();let u=$t.join(f,c);const h=s==null?null:$t.join(f,`package-${o}${$t.extname(s.path)||".7z"}`),m=async b=>(await l.setDownloadedFile(u,h,i,r,c,b),await t.done({...i,downloadedFile:u}),h==null?[u]:[u,h]),w=this._logger,E=await l.validateDownloadedPath(u,i,r,w);if(E!=null)return u=E,await m(!1);const _=async()=>(await l.clear().catch(()=>{}),await(0,Gt.unlink)(u).catch(()=>{})),A=await(0,wl.createTempUpdateFile)(`temp-${c}`,f,w);try{await t.task(A,n,h,_),await(0,Te.retry)(()=>(0,Gt.rename)(A,u),60,500,0,0,b=>b instanceof Error&&/^EBUSY:/.test(b.message))}catch(b){throw await _(),b instanceof Te.CancellationError&&(w.info("cancelled"),this.emit("update-cancelled",i)),b}return w.info(`New version ${o} has been downloaded to ${u}`),await m(!0)}async differentialDownloadInstaller(t,r,n,i,o){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const s=(0,A_.blockmapFiles)(t.url,this.app.version,r.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${s[0]}", new: ${s[1]})`);const a=async c=>{const u=await this.httpExecutor.downloadToBuffer(c,{headers:r.requestHeaders,cancellationToken:r.cancellationToken});if(u==null||u.length===0)throw new Error(`Blockmap "${c.href}" is empty`);try{return JSON.parse((0,S_.gunzipSync)(u).toString())}catch(h){throw new Error(`Cannot parse blockmap "${c.href}", error: ${h}`)}},l={newUrl:t.url,oldFile:$t.join(this.downloadedUpdateHelper.cacheDir,o),logger:this._logger,newFile:n,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,requestHeaders:r.requestHeaders,cancellationToken:r.cancellationToken};this.listenerCount(Wt.DOWNLOAD_PROGRESS)>0&&(l.onProgress=c=>this.emit(Wt.DOWNLOAD_PROGRESS,c));const f=await Promise.all(s.map(c=>a(c)));return await new b_.GenericDifferentialDownloader(t.info,this.httpExecutor,l).download(f[0],f[1]),!1}catch(s){if(this._logger.error(`Cannot download differentially, fallback to full download: ${s.stack||s}`),this._testOnlyOptions!=null)throw s;return!0}}}pt.AppUpdater=vs;function T_(e){const t=(0,It.prerelease)(e);return t!=null&&t.length>0}class Sf{info(t){}warn(t){}error(t){}}pt.NoOpLogger=Sf;Object.defineProperty(nt,"__esModule",{value:!0});nt.BaseUpdater=void 0;const Sl=Hr,C_=pt;class $_ extends C_.AppUpdater{constructor(t,r){super(t,r),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(t=!1,r=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(t,t?r:this.autoRunAppAfterInstall)?setImmediate(()=>{se.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(t){return super.executeDownload({...t,done:r=>(this.dispatchUpdateDownloaded(r),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(t=!1,r=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const n=this.downloadedUpdateHelper,i=this.installerPath,o=n==null?null:n.downloadedFileInfo;if(i==null||o==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${t}, isForceRunAfter: ${r}`),this.doInstall({isSilent:t,isForceRunAfter:r,isAdminRightsRequired:o.isAdminRightsRequired})}catch(s){return this.dispatchError(s),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(t=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(t!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${t}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:t}=this.app,r=`"${t} would like to update"`,n=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),i=[n];return/kdesudo/i.test(n)?(i.push("--comment",r),i.push("-c")):/gksudo/i.test(n)?i.push("--message",r):/pkexec/i.test(n)&&i.push("--disable-internal-agent"),i.join(" ")}spawnSyncLog(t,r=[],n={}){this._logger.info(`Executing: ${t} with args: ${r}`);const i=(0,Sl.spawnSync)(t,r,{env:{...process.env,...n},encoding:"utf-8",shell:!0}),{error:o,status:s,stdout:a,stderr:l}=i;if(o!=null)throw this._logger.error(l),o;if(s!=null&&s!==0)throw this._logger.error(l),new Error(`Command ${t} exited with code ${s}`);return a.trim()}async spawnLog(t,r=[],n=void 0,i="ignore"){return this._logger.info(`Executing: ${t} with args: ${r}`),new Promise((o,s)=>{try{const a={stdio:i,env:n,detached:!0},l=(0,Sl.spawn)(t,r,a);l.on("error",f=>{s(f)}),l.unref(),l.pid!==void 0&&o(!0)}catch(a){s(a)}})}}nt.BaseUpdater=$_;var Lr={},en={};Object.defineProperty(en,"__esModule",{value:!0});en.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const Vt=wt,O_=Zr,I_=mc;class P_ extends O_.DifferentialDownloader{async download(){const t=this.blockAwareFileInfo,r=t.size,n=r-(t.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(n,r-1);const i=Af(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await R_(this.options.oldFile),i)}}en.FileWithEmbeddedBlockMapDifferentialDownloader=P_;function Af(e){return JSON.parse((0,I_.inflateRawSync)(e).toString())}async function R_(e){const t=await(0,Vt.open)(e,"r");try{const r=(await(0,Vt.fstat)(t)).size,n=Buffer.allocUnsafe(4);await(0,Vt.read)(t,n,0,n.length,r-n.length);const i=Buffer.allocUnsafe(n.readUInt32BE(0));return await(0,Vt.read)(t,i,0,i.length,r-n.length-i.length),await(0,Vt.close)(t),Af(i)}catch(r){throw await(0,Vt.close)(t),r}}Object.defineProperty(Lr,"__esModule",{value:!0});Lr.AppImageUpdater=void 0;const Al=ge,bl=Hr,D_=wt,N_=Le,wr=K,F_=nt,x_=en,L_=de,Tl=_t;class U_ extends F_.BaseUpdater{constructor(t,r){super(t,r)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,L_.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:n,downloadUpdateOptions:t,task:async(i,o)=>{const s=process.env.APPIMAGE;if(s==null)throw(0,Al.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(t.disableDifferentialDownload||await this.downloadDifferential(n,s,i,r,t))&&await this.httpExecutor.download(n.url,i,o),await(0,D_.chmod)(i,493)}})}async downloadDifferential(t,r,n,i,o){try{const s={newUrl:t.url,oldFile:r,logger:this._logger,newFile:n,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,requestHeaders:o.requestHeaders,cancellationToken:o.cancellationToken};return this.listenerCount(Tl.DOWNLOAD_PROGRESS)>0&&(s.onProgress=a=>this.emit(Tl.DOWNLOAD_PROGRESS,a)),await new x_.FileWithEmbeddedBlockMapDifferentialDownloader(t.info,this.httpExecutor,s).download(),!1}catch(s){return this._logger.error(`Cannot download differentially, fallback to full download: ${s.stack||s}`),process.platform==="linux"}}doInstall(t){const r=process.env.APPIMAGE;if(r==null)throw(0,Al.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,N_.unlinkSync)(r);let n;const i=wr.basename(r),o=this.installerPath;if(o==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;wr.basename(o)===i||!/\d+\.\d+\.\d+/.test(i)?n=r:n=wr.join(wr.dirname(r),wr.basename(o)),(0,bl.execFileSync)("mv",["-f",o,n]),n!==r&&this.emit("appimage-filename-updated",n);const s={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return t.isForceRunAfter?this.spawnLog(n,[],s):(s.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,bl.execFileSync)(n,[],{env:s})),!0}}Lr.AppImageUpdater=U_;var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.DebUpdater=void 0;const k_=nt,M_=de,Cl=_t;class j_ extends k_.BaseUpdater{constructor(t,r){super(t,r)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,M_.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:n,downloadUpdateOptions:t,task:async(i,o)=>{this.listenerCount(Cl.DOWNLOAD_PROGRESS)>0&&(o.onProgress=s=>this.emit(Cl.DOWNLOAD_PROGRESS,s)),await this.httpExecutor.download(n.url,i,o)}})}get installerPath(){var t,r;return(r=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}doInstall(t){const r=this.wrapSudo(),n=/pkexec/i.test(r)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const o=["dpkg","-i",i,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(r,[`${n}/bin/bash`,"-c",`'${o.join(" ")}'${n}`]),t.isForceRunAfter&&this.app.relaunch(),!0}}Ur.DebUpdater=j_;var kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.PacmanUpdater=void 0;const B_=nt,$l=_t,q_=de;class H_ extends B_.BaseUpdater{constructor(t,r){super(t,r)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,q_.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:n,downloadUpdateOptions:t,task:async(i,o)=>{this.listenerCount($l.DOWNLOAD_PROGRESS)>0&&(o.onProgress=s=>this.emit($l.DOWNLOAD_PROGRESS,s)),await this.httpExecutor.download(n.url,i,o)}})}get installerPath(){var t,r;return(r=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}doInstall(t){const r=this.wrapSudo(),n=/pkexec/i.test(r)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const o=["pacman","-U","--noconfirm",i];return this.spawnSyncLog(r,[`${n}/bin/bash`,"-c",`'${o.join(" ")}'${n}`]),t.isForceRunAfter&&this.app.relaunch(),!0}}kr.PacmanUpdater=H_;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.RpmUpdater=void 0;const G_=nt,Ol=_t,W_=de;class V_ extends G_.BaseUpdater{constructor(t,r){super(t,r)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,W_.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:n,downloadUpdateOptions:t,task:async(i,o)=>{this.listenerCount(Ol.DOWNLOAD_PROGRESS)>0&&(o.onProgress=s=>this.emit(Ol.DOWNLOAD_PROGRESS,s)),await this.httpExecutor.download(n.url,i,o)}})}get installerPath(){var t,r;return(r=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}doInstall(t){const r=this.wrapSudo(),n=/pkexec/i.test(r)?"":'"',i=this.spawnSyncLog("which zypper"),o=this.installerPath;if(o==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let s;return i?s=[i,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",o]:s=[this.spawnSyncLog("which dnf || which yum"),"-y","install",o],this.spawnSyncLog(r,[`${n}/bin/bash`,"-c",`'${s.join(" ")}'${n}`]),t.isForceRunAfter&&this.app.relaunch(),!0}}Mr.RpmUpdater=V_;var jr={};Object.defineProperty(jr,"__esModule",{value:!0});jr.MacUpdater=void 0;const Il=ge,Ki=wt,z_=Le,Pl=K,Y_=gc,X_=pt,J_=de,Rl=Hr,Dl=Gr;class K_ extends X_.AppUpdater{constructor(t,r){super(t,r),this.nativeUpdater=se.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",n=>{this._logger.warn(n),this.emit("error",n)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(t){this._logger.debug!=null&&this._logger.debug(t)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(t=>{t&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(t){let r=t.updateInfoAndProvider.provider.resolveFiles(t.updateInfoAndProvider.info);const n=this._logger,i="sysctl.proc_translated";let o=!1;try{this.debug("Checking for macOS Rosetta environment"),o=(0,Rl.execFileSync)("sysctl",[i],{encoding:"utf8"}).includes(`${i}: 1`),n.info(`Checked for macOS Rosetta environment (isRosetta=${o})`)}catch(u){n.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${u}`)}let s=!1;try{this.debug("Checking for arm64 in uname");const h=(0,Rl.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");n.info(`Checked 'uname -a': arm64=${h}`),s=s||h}catch(u){n.warn(`uname shell command to check for arm64 failed: ${u}`)}s=s||process.arch==="arm64"||o;const a=u=>{var h;return u.url.pathname.includes("arm64")||((h=u.info.url)===null||h===void 0?void 0:h.includes("arm64"))};s&&r.some(a)?r=r.filter(u=>s===a(u)):r=r.filter(u=>!a(u));const l=(0,J_.findFile)(r,"zip",["pkg","dmg"]);if(l==null)throw(0,Il.newError)(`ZIP file not provided: ${(0,Il.safeStringifyJson)(r)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const f=t.updateInfoAndProvider.provider,c="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:l,downloadUpdateOptions:t,task:async(u,h)=>{const m=Pl.join(this.downloadedUpdateHelper.cacheDir,c),w=()=>(0,Ki.pathExistsSync)(m)?!t.disableDifferentialDownload:(n.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let E=!0;w()&&(E=await this.differentialDownloadInstaller(l,t,u,f,c)),E&&await this.httpExecutor.download(l.url,u,h)},done:async u=>{if(!t.disableDifferentialDownload)try{const h=Pl.join(this.downloadedUpdateHelper.cacheDir,c);await(0,Ki.copyFile)(u.downloadedFile,h)}catch(h){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${h.message}`)}return this.updateDownloaded(l,u)}})}async updateDownloaded(t,r){var n;const i=r.downloadedFile,o=(n=t.info.size)!==null&&n!==void 0?n:(await(0,Ki.stat)(i)).size,s=this._logger,a=`fileToProxy=${t.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${a})`),this.server=(0,Y_.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${a})`),this.server.on("close",()=>{s.info(`Proxy server for native Squirrel.Mac is closed (${a})`)});const l=f=>{const c=f.address();return typeof c=="string"?c:`http://127.0.0.1:${c==null?void 0:c.port}`};return await new Promise((f,c)=>{const u=(0,Dl.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),h=Buffer.from(`autoupdater:${u}`,"ascii"),m=`/${(0,Dl.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(w,E)=>{const _=w.url;if(s.info(`${_} requested`),_==="/"){if(!w.headers.authorization||w.headers.authorization.indexOf("Basic ")===-1){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),s.warn("No authenthication info");return}const D=w.headers.authorization.split(" ")[1],x=Buffer.from(D,"base64").toString("ascii"),[B,q]=x.split(":");if(B!=="autoupdater"||q!==u){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),s.warn("Invalid authenthication credentials");return}const j=Buffer.from(`{ "url": "${l(this.server)}${m}" }`);E.writeHead(200,{"Content-Type":"application/json","Content-Length":j.length}),E.end(j);return}if(!_.startsWith(m)){s.warn(`${_} requested, but not supported`),E.writeHead(404),E.end();return}s.info(`${m} requested by Squirrel.Mac, pipe ${i}`);let A=!1;E.on("finish",()=>{A||(this.nativeUpdater.removeListener("error",c),f([]))});const b=(0,z_.createReadStream)(i);b.on("error",D=>{try{E.end()}catch(x){s.warn(`cannot end response: ${x}`)}A=!0,this.nativeUpdater.removeListener("error",c),c(new Error(`Cannot pipe "${i}": ${D}`))}),E.writeHead(200,{"Content-Type":"application/zip","Content-Length":o}),b.pipe(E)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${a})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${l(this.server)}, ${a})`),this.nativeUpdater.setFeedURL({url:l(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${h.toString("base64")}`}}),this.dispatchUpdateDownloaded(r),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",c),this.nativeUpdater.checkForUpdates()):f([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}}jr.MacUpdater=K_;var Br={},ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.verifySignature=Z_;const Nl=ge,bf=Hr,Q_=vt,Fl=K;function Z_(e,t,r){return new Promise((n,i)=>{const o=t.replace(/'/g,"''");r.info(`Verifying signature ${o}`),(0,bf.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${o}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(s,a,l)=>{var f;try{if(s!=null||l){Qi(r,s,l,i),n(null);return}const c=eS(a);if(c.Status===0){try{const w=Fl.normalize(c.Path),E=Fl.normalize(t);if(r.info(`LiteralPath: ${w}. Update Path: ${E}`),w!==E){Qi(r,new Error(`LiteralPath of ${w} is different than ${E}`),l,i),n(null);return}}catch(w){r.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(f=w.message)!==null&&f!==void 0?f:w.stack}`)}const h=(0,Nl.parseDn)(c.SignerCertificate.Subject);let m=!1;for(const w of e){const E=(0,Nl.parseDn)(w);if(E.size?m=Array.from(E.keys()).every(A=>E.get(A)===h.get(A)):w===h.get("CN")&&(r.warn(`Signature validated using only CN ${w}. Please add your full Distinguished Name (DN) to publisherNames configuration`),m=!0),m){n(null);return}}}const u=`publisherNames: ${e.join(" | ")}, raw info: `+JSON.stringify(c,(h,m)=>h==="RawData"?void 0:m,2);r.warn(`Sign verification failed, installer signed with incorrect certificate: ${u}`),n(u)}catch(c){Qi(r,c,null,i),n(null);return}})})}function eS(e){const t=JSON.parse(e);delete t.PrivateKey,delete t.IsOSBinary,delete t.SignatureType;const r=t.SignerCertificate;return r!=null&&(delete r.Archived,delete r.Extensions,delete r.Handle,delete r.HasPrivateKey,delete r.SubjectName),t}function Qi(e,t,r,n){if(tS()){e.warn(`Cannot execute Get-AuthenticodeSignature: ${t||r}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,bf.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(i){e.warn(`Cannot execute ConvertTo-Json: ${i.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}t!=null&&n(t),r&&n(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${r}. Failing signature validation due to unknown stderr.`))}function tS(){const e=Q_.release();return e.startsWith("6.")&&!e.startsWith("6.3")}Object.defineProperty(Br,"__esModule",{value:!0});Br.NsisUpdater=void 0;const Cn=ge,xl=K,rS=nt,nS=en,Ll=_t,iS=de,oS=wt,sS=ws,Ul=sr;class aS extends rS.BaseUpdater{constructor(t,r){super(t,r),this._verifyUpdateCodeSignature=(n,i)=>(0,sS.verifySignature)(n,i,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(t){t&&(this._verifyUpdateCodeSignature=t)}doDownloadUpdate(t){const r=t.updateInfoAndProvider.provider,n=(0,iS.findFile)(r.resolveFiles(t.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:t,fileInfo:n,task:async(i,o,s,a)=>{const l=n.packageInfo,f=l!=null&&s!=null;if(f&&t.disableWebInstaller)throw(0,Cn.newError)(`Unable to download new version ${t.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!f&&!t.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(f||t.disableDifferentialDownload||await this.differentialDownloadInstaller(n,t,i,r,Cn.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(n.url,i,o);const c=await this.verifySignature(i);if(c!=null)throw await a(),(0,Cn.newError)(`New version ${t.updateInfoAndProvider.info.version} is not signed by the application owner: ${c}`,"ERR_UPDATER_INVALID_SIGNATURE");if(f&&await this.differentialDownloadWebPackage(t,l,s,r))try{await this.httpExecutor.download(new Ul.URL(l.path),s,{headers:t.requestHeaders,cancellationToken:t.cancellationToken,sha512:l.sha512})}catch(u){try{await(0,oS.unlink)(s)}catch{}throw u}}})}async verifySignature(t){let r;try{if(r=(await this.configOnDisk.value).publisherName,r==null)return null}catch(n){if(n.code==="ENOENT")return null;throw n}return await this._verifyUpdateCodeSignature(Array.isArray(r)?r:[r],t)}doInstall(t){const r=this.installerPath;if(r==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const n=["--updated"];t.isSilent&&n.push("/S"),t.isForceRunAfter&&n.push("--force-run"),this.installDirectory&&n.push(`/D=${this.installDirectory}`);const i=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;i!=null&&n.push(`--package-file=${i}`);const o=()=>{this.spawnLog(xl.join(process.resourcesPath,"elevate.exe"),[r].concat(n)).catch(s=>this.dispatchError(s))};return t.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),o(),!0):(this.spawnLog(r,n).catch(s=>{const a=s.code;this._logger.info(`Cannot run installer: error code: ${a}, error message: "${s.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),a==="UNKNOWN"||a==="EACCES"?o():a==="ENOENT"?se.shell.openPath(r).catch(l=>this.dispatchError(l)):this.dispatchError(s)}),!0)}async differentialDownloadWebPackage(t,r,n,i){if(r.blockMapSize==null)return!0;try{const o={newUrl:new Ul.URL(r.path),oldFile:xl.join(this.downloadedUpdateHelper.cacheDir,Cn.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:n,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,cancellationToken:t.cancellationToken};this.listenerCount(Ll.DOWNLOAD_PROGRESS)>0&&(o.onProgress=s=>this.emit(Ll.DOWNLOAD_PROGRESS,s)),await new nS.FileWithEmbeddedBlockMapDifferentialDownloader(r,this.httpExecutor,o).download()}catch(o){return this._logger.error(`Cannot download differentially, fallback to full download: ${o.stack||o}`),process.platform==="win32"}return!1}}Br.NsisUpdater=aS;(function(e){var t=Ce&&Ce.__createBinding||(Object.create?function(_,A,b,D){D===void 0&&(D=b);var x=Object.getOwnPropertyDescriptor(A,b);(!x||("get"in x?!A.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return A[b]}}),Object.defineProperty(_,D,x)}:function(_,A,b,D){D===void 0&&(D=b),_[D]=A[b]}),r=Ce&&Ce.__exportStar||function(_,A){for(var b in _)b!=="default"&&!Object.prototype.hasOwnProperty.call(A,b)&&t(A,_,b)};Object.defineProperty(e,"__esModule",{value:!0}),e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.PacmanUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.NoOpLogger=e.AppUpdater=e.BaseUpdater=void 0;const n=wt,i=K;var o=nt;Object.defineProperty(e,"BaseUpdater",{enumerable:!0,get:function(){return o.BaseUpdater}});var s=pt;Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return s.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return s.NoOpLogger}});var a=de;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return a.Provider}});var l=Lr;Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return l.AppImageUpdater}});var f=Ur;Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return f.DebUpdater}});var c=kr;Object.defineProperty(e,"PacmanUpdater",{enumerable:!0,get:function(){return c.PacmanUpdater}});var u=Mr;Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return u.RpmUpdater}});var h=jr;Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return h.MacUpdater}});var m=Br;Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return m.NsisUpdater}}),r(_t,e);let w;function E(){if(process.platform==="win32")w=new Br.NsisUpdater;else if(process.platform==="darwin")w=new jr.MacUpdater;else{w=new Lr.AppImageUpdater;try{const _=i.join(process.resourcesPath,"package-type");if(!(0,n.existsSync)(_))return w;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const A=(0,n.readFileSync)(_).toString().trim();switch(console.info("Found package-type:",A),A){case"deb":w=new Ur.DebUpdater;break;case"rpm":w=new Mr.RpmUpdater;break;case"pacman":w=new kr.PacmanUpdater;break;default:break}}catch(_){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",_.message)}}return w}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>w||E()})})(Xe);var Rn={exports:{}},Zi={exports:{}},kl;function Tf(){return kl||(kl=1,function(e){let t={};try{t=require("electron")}catch{}t.ipcRenderer&&r(t),e.exports=r;function r({contextBridge:n,ipcRenderer:i}){if(!i)return;i.on("__ELECTRON_LOG_IPC__",(s,a)=>{window.postMessage({cmd:"message",...a})}),i.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(s=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${s.message}`)));const o={sendToMain(s){try{i.send("__ELECTRON_LOG__",s)}catch(a){console.error("electronLog.sendToMain ",a,"data:",s),i.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:"sendToMain"})}},log(...s){o.sendToMain({data:s,level:"info"})}};for(const s of["error","warn","info","verbose","debug","silly"])o[s]=(...a)=>o.sendToMain({data:a,level:s});if(n&&process.contextIsolated)try{n.exposeInMainWorld("__electronLog",o)}catch{}typeof window=="object"?window.__electronLog=o:__electronLog=o}}(Zi)),Zi.exports}var eo={exports:{}},to,Ml;function lS(){if(Ml)return to;Ml=1,to=e;function e(t){return Object.defineProperties(r,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof r.labelPadding){case"boolean":return r.labelPadding?r.maxLabelLength:0;case"number":return r.labelPadding;default:return 0}}}});function r(n){r.maxLabelLength=Math.max(r.maxLabelLength,n.length);const i={};for(const o of t.levels)i[o]=(...s)=>t.logData(s,{level:o,scope:n});return i.log=i.info,i}}return to}var ro,jl;function cS(){if(jl)return ro;jl=1;class e{constructor({processMessage:r}){this.processMessage=r,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(r){this.buffer.push(r)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(r=>this.processMessage(r)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return ro=e,ro}var no,Bl;function Cf(){if(Bl)return no;Bl=1;const e=lS(),t=cS(),n=class n{constructor({allowUnknownLevel:o=!1,dependencies:s={},errorHandler:a,eventLogger:l,initializeFn:f,isDev:c=!1,levels:u=["error","warn","info","verbose","debug","silly"],logId:h,transportFactories:m={},variables:w}={}){V(this,"dependencies",{});V(this,"errorHandler",null);V(this,"eventLogger",null);V(this,"functions",{});V(this,"hooks",[]);V(this,"isDev",!1);V(this,"levels",null);V(this,"logId",null);V(this,"scope",null);V(this,"transports",{});V(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=o,this.buffering=new t(this),this.dependencies=s,this.initializeFn=f,this.isDev=c,this.levels=u,this.logId=h,this.scope=e(this),this.transportFactories=m,this.variables=w||{};for(const E of this.levels)this.addLevel(E,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=a,a==null||a.setOptions({...s,logFn:this.error}),this.eventLogger=l,l==null||l.setOptions({...s,logger:this});for(const[E,_]of Object.entries(m))this.transports[E]=_(this,s);n.instances[h]=this}static getInstance({logId:o}){return this.instances[o]||this.instances.default}addLevel(o,s=this.levels.length){s!==!1&&this.levels.splice(s,0,o),this[o]=(...a)=>this.logData(a,{level:o}),this.functions[o]=this[o]}catchErrors(o){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(o)}create(o){return typeof o=="string"&&(o={logId:o}),new n({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...o})}compareLevels(o,s,a=this.levels){const l=a.indexOf(o),f=a.indexOf(s);return f===-1||l===-1?!0:f<=l}initialize(o={}){this.initializeFn({logger:this,...this.dependencies,...o})}logData(o,s={}){this.buffering.enabled?this.buffering.addMessage({data:o,...s}):this.processMessage({data:o,...s})}processMessage(o,{transports:s=this.transports}={}){if(o.cmd==="errorHandler"){this.errorHandler.handle(o.error,{errorName:o.errorName,processType:"renderer",showDialog:!!o.showDialog});return}let a=o.level;this.allowUnknownLevel||(a=this.levels.includes(o.level)?o.level:"info");const l={date:new Date,logId:this.logId,...o,level:a,variables:{...this.variables,...o.variables}};for(const[f,c]of this.transportEntries(s))if(!(typeof c!="function"||c.level===!1)&&this.compareLevels(c.level,o.level))try{const u=this.hooks.reduce((h,m)=>h&&m(h,c,f),l);u&&c({...u,data:[...u.data]})}catch(u){this.processInternalErrorFn(u)}}processInternalErrorFn(o){}transportEntries(o=this.transports){return(Array.isArray(o)?o:Object.entries(o)).map(a=>{switch(typeof a){case"string":return this.transports[a]?[a,this.transports[a]]:null;case"function":return[a.name,a];default:return Array.isArray(a)?a:null}}).filter(Boolean)}};V(n,"instances",{});let r=n;return no=r,no}var io,ql;function uS(){if(ql)return io;ql=1;const e=console.error;class t{constructor({logFn:n=null}={}){V(this,"logFn",null);V(this,"onError",null);V(this,"showDialog",!1);V(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=n}handle(n,{logFn:i=this.logFn,errorName:o="",onError:s=this.onError,showDialog:a=this.showDialog}={}){try{(s==null?void 0:s({error:n,errorName:o,processType:"renderer"}))!==!1&&i({error:n,errorName:o,showDialog:a})}catch{e(n)}}setOptions({logFn:n,onError:i,preventDefault:o,showDialog:s}){typeof n=="function"&&(this.logFn=n),typeof i=="function"&&(this.onError=i),typeof o=="boolean"&&(this.preventDefault=o),typeof s=="boolean"&&(this.showDialog=s)}startCatching({onError:n,showDialog:i}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:n,showDialog:i}),window.addEventListener("error",o=>{var s;this.preventDefault&&((s=o.preventDefault)==null||s.call(o)),this.handleError(o.error||o)}),window.addEventListener("unhandledrejection",o=>{var s;this.preventDefault&&((s=o.preventDefault)==null||s.call(o)),this.handleRejection(o.reason||o)}))}handleError(n){this.handle(n,{errorName:"Unhandled"})}handleRejection(n){const i=n instanceof Error?n:new Error(JSON.stringify(n));this.handle(i,{errorName:"Unhandled rejection"})}}return io=t,io}var oo,Hl;function kt(){if(Hl)return oo;Hl=1,oo={transform:e};function e({logger:t,message:r,transport:n,initialData:i=(r==null?void 0:r.data)||[],transforms:o=n==null?void 0:n.transforms}){return o.reduce((s,a)=>typeof a=="function"?a({data:s,logger:t,message:r,transport:n}):s,i)}return oo}var so,Gl;function fS(){if(Gl)return so;Gl=1;const{transform:e}=kt();so=r;const t={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function r(i){return Object.assign(o,{format:"{h}:{i}:{s}.{ms}{scope}  {text}",transforms:[n],writeFn({message:{level:s,data:a}}){const l=t[s]||t.info;setTimeout(()=>l(...a))}});function o(s){o.writeFn({message:{...s,data:e({logger:i,message:s,transport:o})}})}}function n({data:i=[],logger:o={},message:s={},transport:a={}}){if(typeof a.format=="function")return a.format({data:i,level:(s==null?void 0:s.level)||"info",logger:o,message:s,transport:a});if(typeof a.format!="string")return i;i.unshift(a.format),typeof i[1]=="string"&&i[1].match(/%[1cdfiOos]/)&&(i=[`${i[0]} ${i[1]}`,...i.slice(2)]);const l=s.date||new Date;return i[0]=i[0].replace(/\{(\w+)}/g,(f,c)=>{var u,h;switch(c){case"level":return s.level;case"logId":return s.logId;case"scope":{const m=s.scope||((u=o.scope)==null?void 0:u.defaultLabel);return m?` (${m})`:""}case"text":return"";case"y":return l.getFullYear().toString(10);case"m":return(l.getMonth()+1).toString(10).padStart(2,"0");case"d":return l.getDate().toString(10).padStart(2,"0");case"h":return l.getHours().toString(10).padStart(2,"0");case"i":return l.getMinutes().toString(10).padStart(2,"0");case"s":return l.getSeconds().toString(10).padStart(2,"0");case"ms":return l.getMilliseconds().toString(10).padStart(3,"0");case"iso":return l.toISOString();default:return((h=s.variables)==null?void 0:h[c])||f}}).trim(),i}return so}var ao,Wl;function dS(){if(Wl)return ao;Wl=1;const{transform:e}=kt();ao=r;const t=new Set([Promise,WeakMap,WeakSet]);function r(o){return Object.assign(s,{depth:5,transforms:[i]});function s(a){if(!window.__electronLog){o.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const l=e({initialData:a,logger:o,message:a,transport:s});__electronLog.sendToMain(l)}catch(l){o.transports.console({data:["electronLog.transports.ipc",l,"data:",a.data],level:"error"})}}}function n(o){return Object(o)!==o}function i({data:o,depth:s,seen:a=new WeakSet,transport:l={}}={}){const f=s||l.depth||5;return a.has(o)?"[Circular]":f<1?n(o)?o:Array.isArray(o)?"[Array]":`[${typeof o}]`:["function","symbol"].includes(typeof o)?o.toString():n(o)?o:t.has(o.constructor)?`[${o.constructor.name}]`:Array.isArray(o)?o.map(c=>i({data:c,depth:f-1,seen:a})):o instanceof Date?o.toISOString():o instanceof Error?o.stack:o instanceof Map?new Map(Array.from(o).map(([c,u])=>[i({data:c,depth:f-1,seen:a}),i({data:u,depth:f-1,seen:a})])):o instanceof Set?new Set(Array.from(o).map(c=>i({data:c,depth:f-1,seen:a}))):(a.add(o),Object.fromEntries(Object.entries(o).map(([c,u])=>[c,i({data:u,depth:f-1,seen:a})])))}return ao}var Vl;function hS(){return Vl||(Vl=1,function(e){const t=Cf(),r=uS(),n=fS(),i=dS();e.exports=o(),e.exports.Logger=t,e.exports.default=e.exports;function o(){const s=new t({allowUnknownLevel:!0,errorHandler:new r,initializeFn:()=>{},logId:"default",transportFactories:{console:n,ipc:i},variables:{processType:"renderer"}});return s.errorHandler.setOptions({logFn({error:a,errorName:l,showDialog:f}){s.transports.console({data:[l,a].filter(Boolean),level:"error"}),s.transports.ipc({cmd:"errorHandler",error:{cause:a==null?void 0:a.cause,code:a==null?void 0:a.code,name:a==null?void 0:a.name,message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:l,logId:s.logId,showDialog:f})}}),typeof window=="object"&&window.addEventListener("message",a=>{const{cmd:l,logId:f,...c}=a.data||{},u=t.getInstance({logId:f});l==="message"&&u.processMessage(c,{transports:["console"]})}),new Proxy(s,{get(a,l){return typeof a[l]<"u"?a[l]:(...f)=>s.logData(f,{level:l})}})}}(eo)),eo.exports}var lo,zl;function pS(){if(zl)return lo;zl=1;const e=Le,t=K;lo={findAndReadPackageJson:r,tryReadJsonAt:n};function r(){return n(s())||n(o())||n(process.resourcesPath,"app.asar")||n(process.resourcesPath,"app")||n(process.cwd())||{name:void 0,version:void 0}}function n(...a){if(a[0])try{const l=t.join(...a),f=i("package.json",l);if(!f)return;const c=JSON.parse(e.readFileSync(f,"utf8")),u=(c==null?void 0:c.productName)||(c==null?void 0:c.name);return!u||u.toLowerCase()==="electron"?void 0:u?{name:u,version:c==null?void 0:c.version}:void 0}catch{return}}function i(a,l){let f=l;for(;;){const c=t.parse(f),u=c.root,h=c.dir;if(e.existsSync(t.join(f,a)))return t.resolve(t.join(f,a));if(f===u)return null;f=h}}function o(){const a=process.argv.filter(f=>f.indexOf("--user-data-dir=")===0);return a.length===0||typeof a[0]!="string"?null:a[0].replace("--user-data-dir=","")}function s(){var a;try{return(a=require.main)==null?void 0:a.filename}catch{return}}return lo}var co,Yl;function $f(){if(Yl)return co;Yl=1;const e=Hr,t=vt,r=K,n=pS();class i{constructor(){V(this,"appName");V(this,"appPackageJson");V(this,"platform",process.platform)}getAppLogPath(s=this.getAppName()){return this.platform==="darwin"?r.join(this.getSystemPathHome(),"Library/Logs",s):r.join(this.getAppUserDataPath(s),"logs")}getAppName(){var a;const s=this.appName||((a=this.getAppPackageJson())==null?void 0:a.name);if(!s)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return s}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=n.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(s=this.getAppName()){return s?r.join(this.getSystemPathAppData(),s):void 0}getAppVersion(){var s;return(s=this.getAppPackageJson())==null?void 0:s.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const s=Number(t.release().split(".")[0]);return s<=19?`10.${s-4}`:s-9}getOsVersion(){let s=t.type().replace("_"," "),a=t.release();return s==="Darwin"&&(s="macOS",a=this.getMacOsVersion()),`${s} ${a}`}getPathVariables(){const s=this.getAppName(),a=this.getAppVersion(),l=this;return{appData:this.getSystemPathAppData(),appName:s,appVersion:a,get electronDefaultDir(){return l.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(s),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(s)}}getSystemPathAppData(){const s=this.getSystemPathHome();switch(this.platform){case"darwin":return r.join(s,"Library/Application Support");case"win32":return process.env.APPDATA||r.join(s,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||r.join(s,".config")}}getSystemPathHome(){var s;return((s=t.homedir)==null?void 0:s.call(t))||process.env.HOME}getSystemPathTemp(){return t.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(s,a){}onAppReady(s){s()}onEveryWebContentsEvent(s,a){}onIpc(s,a){}onIpcInvoke(s,a){}openUrl(s,a=console.error){const f={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";e.exec(`${f} ${s}`,{},c=>{c&&a(c)})}setAppName(s){this.appName=s}setPlatform(s){this.platform=s}setPreloadFileForSessions({filePath:s,includeFutureSession:a=!0,getSessions:l=()=>[]}){}sendIpc(s,a){}showErrorBox(s,a){}}return co=i,co}var uo,Xl;function mS(){if(Xl)return uo;Xl=1;const e=K,t=$f();class r extends t{constructor({electron:o}={}){super();V(this,"electron");this.electron=o}getAppName(){var s,a;let o;try{o=this.appName||((s=this.electron.app)==null?void 0:s.name)||((a=this.electron.app)==null?void 0:a.getName())}catch{}return o||super.getAppName()}getAppUserDataPath(o){return this.getPath("userData")||super.getAppUserDataPath(o)}getAppVersion(){var s;let o;try{o=(s=this.electron.app)==null?void 0:s.getVersion()}catch{}return o||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(o){var s;try{return(s=this.electron.app)==null?void 0:s.getPath(o)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var o;return((o=this.electron.app)==null?void 0:o.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?e.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(o,s){var a;return(a=this.electron.app)==null||a.on(o,s),()=>{var l;(l=this.electron.app)==null||l.off(o,s)}}onAppReady(o){var s,a,l;(s=this.electron.app)!=null&&s.isReady()?o():(a=this.electron.app)!=null&&a.once?(l=this.electron.app)==null||l.once("ready",o):o()}onEveryWebContentsEvent(o,s){var l,f,c;return(f=(l=this.electron.webContents)==null?void 0:l.getAllWebContents())==null||f.forEach(u=>{u.on(o,s)}),(c=this.electron.app)==null||c.on("web-contents-created",a),()=>{var u,h;(u=this.electron.webContents)==null||u.getAllWebContents().forEach(m=>{m.off(o,s)}),(h=this.electron.app)==null||h.off("web-contents-created",a)};function a(u,h){h.on(o,s)}}onIpc(o,s){var a;(a=this.electron.ipcMain)==null||a.on(o,s)}onIpcInvoke(o,s){var a,l;(l=(a=this.electron.ipcMain)==null?void 0:a.handle)==null||l.call(a,o,s)}openUrl(o,s=console.error){var a;(a=this.electron.shell)==null||a.openExternal(o).catch(s)}setPreloadFileForSessions({filePath:o,includeFutureSession:s=!0,getSessions:a=()=>{var l;return[(l=this.electron.session)==null?void 0:l.defaultSession]}}){for(const f of a().filter(Boolean))l(f);s&&this.onAppEvent("session-created",f=>{l(f)});function l(f){typeof f.registerPreloadScript=="function"?f.registerPreloadScript({filePath:o,id:"electron-log-preload",type:"frame"}):f.setPreloads([...f.getPreloads(),o])}}sendIpc(o,s){var a,l;(l=(a=this.electron.BrowserWindow)==null?void 0:a.getAllWindows())==null||l.forEach(f=>{var c,u;((c=f.webContents)==null?void 0:c.isDestroyed())===!1&&((u=f.webContents)==null?void 0:u.isCrashed())===!1&&f.webContents.send(o,s)})}showErrorBox(o,s){var a;(a=this.electron.dialog)==null||a.showErrorBox(o,s)}}return uo=r,uo}var fo,Jl;function gS(){if(Jl)return fo;Jl=1;const e=Le,t=vt,r=K,n=Tf();fo={initialize({externalApi:s,getSessions:a,includeFutureSession:l,logger:f,preload:c=!0,spyRendererConsole:u=!1}){s.onAppReady(()=>{try{c&&i({externalApi:s,getSessions:a,includeFutureSession:l,preloadOption:c}),u&&o({externalApi:s,logger:f})}catch(h){f.warn(h)}})}};function i({externalApi:s,getSessions:a,includeFutureSession:l,preloadOption:f}){let c=typeof f=="string"?f:void 0;try{c=r.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!c||!e.existsSync(c)){c=r.join(s.getAppUserDataPath()||t.tmpdir(),"electron-log-preload.js");const u=`
      try {
        (${n.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;e.writeFileSync(c,u,"utf8")}s.setPreloadFileForSessions({filePath:c,includeFutureSession:l,getSessions:a})}function o({externalApi:s,logger:a}){const l=["debug","info","warn","error"];s.onEveryWebContentsEvent("console-message",(f,c,u)=>{a.processMessage({data:[u],level:l[c],variables:{processType:"renderer"}})})}return fo}var ho,Kl;function yS(){if(Kl)return ho;Kl=1;class e{constructor({externalApi:n,logFn:i=void 0,onError:o=void 0,showDialog:s=void 0}={}){V(this,"externalApi");V(this,"isActive",!1);V(this,"logFn");V(this,"onError");V(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:n,logFn:i,onError:o,showDialog:s}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(n,{logFn:i=this.logFn,onError:o=this.onError,processType:s="browser",showDialog:a=this.showDialog,errorName:l=""}={}){var f;n=t(n);try{if(typeof o=="function"){const c=((f=this.externalApi)==null?void 0:f.getVersions())||{},u=this.createIssue;if(o({createIssue:u,error:n,errorName:l,processType:s,versions:c})===!1)return}l?i(l,n):i(n),a&&!l.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${s} process`,n.stack)}catch{console.error(n)}}setOptions({externalApi:n,logFn:i,onError:o,showDialog:s}){typeof n=="object"&&(this.externalApi=n),typeof i=="function"&&(this.logFn=i),typeof o=="function"&&(this.onError=o),typeof s=="boolean"&&(this.showDialog=s)}startCatching({onError:n,showDialog:i}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:n,showDialog:i}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(n,i){var o;(o=this.externalApi)==null||o.openUrl(`${n}?${new URLSearchParams(i).toString()}`)}handleError(n){this.handle(n,{errorName:"Unhandled"})}handleRejection(n){const i=n instanceof Error?n:new Error(JSON.stringify(n));this.handle(i,{errorName:"Unhandled rejection"})}}function t(r){if(r instanceof Error)return r;if(r&&typeof r=="object"){if(r.message)return Object.assign(new Error(r.message),r);try{return new Error(JSON.stringify(r))}catch(n){return new Error(`Couldn't normalize error ${String(r)}: ${n}`)}}return new Error(`Can't normalize error ${String(r)}`)}return ho=e,ho}var po,Ql;function ES(){if(Ql)return po;Ql=1;class e{constructor(r={}){V(this,"disposers",[]);V(this,"format","{eventSource}#{eventName}:");V(this,"formatters",{app:{"certificate-error":({args:r})=>this.arrayToObject(r.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:r})=>r.length===1?r[0]:r,"render-process-gone":({args:[r,n]})=>n&&typeof n=="object"?{...n,...this.getWebContentsDetails(r)}:[]},webContents:{"console-message":({args:[r,n,i,o]})=>{if(!(r<3))return{message:n,source:`${o}:${i}`}},"did-fail-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:r})=>this.arrayToObject(r,["name","version"]),"preload-error":({args:r})=>this.arrayToObject(r,["preloadPath","error"])}});V(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});V(this,"externalApi");V(this,"level","error");V(this,"scope","");this.setOptions(r)}setOptions({events:r,externalApi:n,level:i,logger:o,format:s,formatters:a,scope:l}){typeof r=="object"&&(this.events=r),typeof n=="object"&&(this.externalApi=n),typeof i=="string"&&(this.level=i),typeof o=="object"&&(this.logger=o),(typeof s=="string"||typeof s=="function")&&(this.format=s),typeof a=="object"&&(this.formatters=a),typeof l=="string"&&(this.scope=l)}startLogging(r={}){this.setOptions(r),this.disposeListeners();for(const n of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(n,(...i)=>{this.handleEvent({eventSource:"app",eventName:n,handlerArgs:i})}));for(const n of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(n,(...i)=>{this.handleEvent({eventSource:"webContents",eventName:n,handlerArgs:i})}))}stopLogging(){this.disposeListeners()}arrayToObject(r,n){const i={};return n.forEach((o,s)=>{i[o]=r[s]}),r.length>n.length&&(i.unknownArgs=r.slice(n.length)),i}disposeListeners(){this.disposers.forEach(r=>r()),this.disposers=[]}formatEventLog({eventName:r,eventSource:n,handlerArgs:i}){var u;const[o,...s]=i;if(typeof this.format=="function")return this.format({args:s,event:o,eventName:r,eventSource:n});const a=(u=this.formatters[n])==null?void 0:u[r];let l=s;if(typeof a=="function"&&(l=a({args:s,event:o,eventName:r,eventSource:n})),!l)return;const f={};return Array.isArray(l)?f.args=l:typeof l=="object"&&Object.assign(f,l),n==="webContents"&&Object.assign(f,this.getWebContentsDetails(o==null?void 0:o.sender)),[this.format.replace("{eventSource}",n==="app"?"App":"WebContents").replace("{eventName}",r),f]}getEventNames(r){return!r||typeof r!="object"?[]:Object.entries(r).filter(([n,i])=>i).map(([n])=>n)}getWebContentsDetails(r){if(!(r!=null&&r.loadURL))return{};try{return{webContents:{id:r.id,url:r.getURL()}}}catch{return{}}}handleEvent({eventName:r,eventSource:n,handlerArgs:i}){var s;const o=this.formatEventLog({eventName:r,eventSource:n,handlerArgs:i});if(o){const a=this.scope?this.logger.scope(this.scope):this.logger;(s=a==null?void 0:a[this.level])==null||s.call(a,...o)}}}return po=e,po}var mo,Zl;function Of(){if(Zl)return mo;Zl=1;const{transform:e}=kt();mo={concatFirstStringElements:t,formatScope:n,formatText:o,formatVariables:i,timeZoneFromOffset:r,format({message:s,logger:a,transport:l,data:f=s==null?void 0:s.data}){switch(typeof l.format){case"string":return e({message:s,logger:a,transforms:[i,n,o],transport:l,initialData:[l.format,...f]});case"function":return l.format({data:f,level:(s==null?void 0:s.level)||"info",logger:a,message:s,transport:l});default:return f}}};function t({data:s}){return typeof s[0]!="string"||typeof s[1]!="string"||s[0].match(/%[1cdfiOos]/)?s:[`${s[0]} ${s[1]}`,...s.slice(2)]}function r(s){const a=Math.abs(s),l=s>0?"-":"+",f=Math.floor(a/60).toString().padStart(2,"0"),c=(a%60).toString().padStart(2,"0");return`${l}${f}:${c}`}function n({data:s,logger:a,message:l}){const{defaultLabel:f,labelLength:c}=(a==null?void 0:a.scope)||{},u=s[0];let h=l.scope;h||(h=f);let m;return h===""?m=c>0?"".padEnd(c+3):"":typeof h=="string"?m=` (${h})`.padEnd(c+3):m="",s[0]=u.replace("{scope}",m),s}function i({data:s,message:a}){let l=s[0];if(typeof l!="string")return s;l=l.replace("{level}]",`${a.level}]`.padEnd(6," "));const f=a.date||new Date;return s[0]=l.replace(/\{(\w+)}/g,(c,u)=>{var h;switch(u){case"level":return a.level||"info";case"logId":return a.logId;case"y":return f.getFullYear().toString(10);case"m":return(f.getMonth()+1).toString(10).padStart(2,"0");case"d":return f.getDate().toString(10).padStart(2,"0");case"h":return f.getHours().toString(10).padStart(2,"0");case"i":return f.getMinutes().toString(10).padStart(2,"0");case"s":return f.getSeconds().toString(10).padStart(2,"0");case"ms":return f.getMilliseconds().toString(10).padStart(3,"0");case"z":return r(f.getTimezoneOffset());case"iso":return f.toISOString();default:return((h=a.variables)==null?void 0:h[u])||c}}).trim(),s}function o({data:s}){const a=s[0];if(typeof a!="string")return s;if(a.lastIndexOf("{text}")===a.length-6)return s[0]=a.replace(/\s?{text}/,""),s[0]===""&&s.shift(),s;const f=a.split("{text}");let c=[];return f[0]!==""&&c.push(f[0]),c=c.concat(s.slice(1)),f[1]!==""&&c.push(f[1]),c}return mo}var go={exports:{}},ec;function pi(){return ec||(ec=1,function(e){const t=Gn;e.exports={serialize:n,maxDepth({data:i,transport:o,depth:s=(o==null?void 0:o.depth)??6}){if(!i)return i;if(s<1)return Array.isArray(i)?"[array]":typeof i=="object"&&i?"[object]":i;if(Array.isArray(i))return i.map(l=>e.exports.maxDepth({data:l,depth:s-1}));if(typeof i!="object"||i&&typeof i.toISOString=="function")return i;if(i===null)return null;if(i instanceof Error)return i;const a={};for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&(a[l]=e.exports.maxDepth({data:i[l],depth:s-1}));return a},toJSON({data:i}){return JSON.parse(JSON.stringify(i,r()))},toString({data:i,transport:o}){const s=(o==null?void 0:o.inspectOptions)||{},a=i.map(l=>{if(l!==void 0)try{const f=JSON.stringify(l,r(),"  ");return f===void 0?void 0:JSON.parse(f)}catch{return l}});return t.formatWithOptions(s,...a)}};function r(i={}){const o=new WeakSet;return function(s,a){if(typeof a=="object"&&a!==null){if(o.has(a))return;o.add(a)}return n(s,a,i)}}function n(i,o,s={}){const a=(s==null?void 0:s.serializeMapAndSet)!==!1;return o instanceof Error?o.stack:o&&(typeof o=="function"?`[function] ${o.toString()}`:o instanceof Date?o.toISOString():a&&o instanceof Map&&Object.fromEntries?Object.fromEntries(o):a&&o instanceof Set&&Array.from?Array.from(o):o)}}(go)),go.exports}var yo,tc;function _s(){if(tc)return yo;tc=1,yo={transformStyles:n,applyAnsiStyles({data:i}){return n(i,t,r)},removeStyles({data:i}){return n(i,()=>"")}};const e={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function t(i){const o=i.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return e[o]||""}function r(i){return i+e.unset}function n(i,o,s){const a={};return i.reduce((l,f,c,u)=>{if(a[c])return l;if(typeof f=="string"){let h=c,m=!1;f=f.replace(/%[1cdfiOos]/g,w=>{if(h+=1,w!=="%c")return w;const E=u[h];return typeof E=="string"?(a[h]=!0,m=!0,o(E,f)):w}),m&&s&&(f=s(f))}return l.push(f),l},[])}return yo}var Eo,rc;function vS(){if(rc)return Eo;rc=1;const{concatFirstStringElements:e,format:t}=Of(),{maxDepth:r,toJSON:n}=pi(),{applyAnsiStyles:i,removeStyles:o}=_s(),{transform:s}=kt(),a={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};Eo=c;const f=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":""} {text}`;Object.assign(c,{DEFAULT_FORMAT:f});function c(E){return Object.assign(_,{format:f,level:"silly",transforms:[u,t,m,e,r,n],useStyles:process.env.FORCE_STYLES,writeFn({message:A}){(a[A.level]||a.info)(...A.data)}});function _(A){const b=s({logger:E,message:A,transport:_});_.writeFn({message:{...A,data:b}})}}function u({data:E,message:_,transport:A}){return A.format!==f?E:[`color:${w(_.level)}`,"color:unset",...E]}function h(E,_){if(typeof E=="boolean")return E;const b=_==="error"||_==="warn"?process.stderr:process.stdout;return b&&b.isTTY}function m(E){const{message:_,transport:A}=E;return(h(A.useStyles,_.level)?i:o)(E)}function w(E){const _={error:"red",warn:"yellow",info:"cyan",default:"unset"};return _[E]||_.default}return Eo}var vo,nc;function If(){if(nc)return vo;nc=1;const e=Wn,t=Le,r=vt;class n extends e{constructor({path:a,writeOptions:l={encoding:"utf8",flag:"a",mode:438},writeAsync:f=!1}){super();V(this,"asyncWriteQueue",[]);V(this,"bytesWritten",0);V(this,"hasActiveAsyncWriting",!1);V(this,"path",null);V(this,"initialSize");V(this,"writeOptions",null);V(this,"writeAsync",!1);this.path=a,this.writeOptions=l,this.writeAsync=f}get size(){return this.getSize()}clear(){try{return t.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(a){return a.code==="ENOENT"?!0:(this.emit("error",a,this),!1)}}crop(a){try{const l=i(this.path,a||4096);this.clear(),this.writeLine(`[log cropped]${r.EOL}${l}`)}catch(l){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${l.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const a=t.statSync(this.path);this.initialSize=a.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(a){this.bytesWritten+=Buffer.byteLength(a,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const a=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const l=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,t.writeFile(this.path,l,this.writeOptions,f=>{a.hasActiveAsyncWriting=!1,f?a.emit("error",new Error(`Couldn't write to ${a.path}. ${f.message}`),this):a.increaseBytesWrittenCounter(l),a.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(a){if(a+=r.EOL,this.writeAsync){this.asyncWriteQueue.push(a),this.nextAsyncWrite();return}try{t.writeFileSync(this.path,a,this.writeOptions),this.increaseBytesWrittenCounter(a)}catch(l){this.emit("error",new Error(`Couldn't write to ${this.path}. ${l.message}`),this)}}}vo=n;function i(o,s){const a=Buffer.alloc(s),l=t.statSync(o),f=Math.min(l.size,s),c=Math.max(0,l.size-s),u=t.openSync(o,"r"),h=t.readSync(u,a,0,f,c);return t.closeSync(u),a.toString("utf8",0,h)}return vo}var wo,ic;function wS(){if(ic)return wo;ic=1;const e=If();class t extends e{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return wo=t,wo}var _o,oc;function _S(){if(oc)return _o;oc=1;const e=Wn,t=Le,r=K,n=If(),i=wS();class o extends e{constructor(){super();V(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:l,writeOptions:f={},writeAsync:c=!1}){let u;try{if(l=r.resolve(l),this.store[l])return this.store[l];u=this.createFile({filePath:l,writeOptions:f,writeAsync:c})}catch(h){u=new i({path:l}),this.emitError(h,u)}return u.on("error",this.emitError),this.store[l]=u,u}createFile({filePath:l,writeOptions:f,writeAsync:c}){return this.testFileWriting({filePath:l,writeOptions:f}),new n({path:l,writeOptions:f,writeAsync:c})}emitError(l,f){this.emit("error",l,f)}testFileWriting({filePath:l,writeOptions:f}){t.mkdirSync(r.dirname(l),{recursive:!0}),t.writeFileSync(l,"",{flag:"a",mode:f.mode})}}return _o=o,_o}var So,sc;function SS(){if(sc)return So;sc=1;const e=Le,t=vt,r=K,n=_S(),{transform:i}=kt(),{removeStyles:o}=_s(),{format:s,concatFirstStringElements:a}=Of(),{toString:l}=pi();So=c;const f=new n;function c(h,{registry:m=f,externalApi:w}={}){let E;return m.listenerCount("error")<1&&m.on("error",(B,q)=>{b(`Can't write to ${q}`,B)}),Object.assign(_,{fileName:u(h.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:D,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:x,sync:!0,transforms:[o,s,a,l],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(B){const q=B.toString(),j=r.parse(q);try{e.renameSync(q,r.join(j.dir,`${j.name}.old${j.ext}`))}catch(ce){b("Could not rotate log",ce);const y=Math.round(_.maxSize/4);B.crop(Math.min(y,256*1024))}},resolvePathFn(B){return r.join(B.libraryDefaultDir,B.fileName)},setAppName(B){h.dependencies.externalApi.setAppName(B)}});function _(B){const q=D(B);_.maxSize>0&&q.size>_.maxSize&&(_.archiveLogFn(q),q.reset());const ce=i({logger:h,message:B,transport:_});q.writeLine(ce)}function A(){E||(E=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(w.getPathVariables()),fileName:{get(){return _.fileName},enumerable:!0}}),typeof _.archiveLog=="function"&&(_.archiveLogFn=_.archiveLog,b("archiveLog is deprecated. Use archiveLogFn instead")),typeof _.resolvePath=="function"&&(_.resolvePathFn=_.resolvePath,b("resolvePath is deprecated. Use resolvePathFn instead")))}function b(B,q=null,j="error"){const ce=[`electron-log.transports.file: ${B}`];q&&ce.push(q),h.transports.console({data:ce,date:new Date,level:j})}function D(B){A();const q=_.resolvePathFn(E,B);return m.provide({filePath:q,writeAsync:!_.sync,writeOptions:_.writeOptions})}function x({fileFilter:B=q=>q.endsWith(".log")}={}){A();const q=r.dirname(_.resolvePathFn(E));return e.existsSync(q)?e.readdirSync(q).map(j=>r.join(q,j)).filter(B).map(j=>{try{return{path:j,lines:e.readFileSync(j,"utf8").split(t.EOL)}}catch{return null}}).filter(Boolean):[]}}function u(h=process.type){switch(h){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return So}var Ao,ac;function AS(){if(ac)return Ao;ac=1;const{maxDepth:e,toJSON:t}=pi(),{transform:r}=kt();Ao=n;function n(i,{externalApi:o}){return Object.assign(s,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:i.isDev?"silly":!1,transforms:[t,e]}),o!=null&&o.isElectron()?s:void 0;function s(a){var l;((l=a==null?void 0:a.variables)==null?void 0:l.processType)!=="renderer"&&(o==null||o.sendIpc(s.eventId,{...a,data:r({logger:i,message:a,transport:s})}))}}return Ao}var bo,lc;function bS(){if(lc)return bo;lc=1;const e=gc,t=kd,{transform:r}=kt(),{removeStyles:n}=_s(),{toJSON:i,maxDepth:o}=pi();bo=s;function s(a){return Object.assign(l,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[n,i,o],makeBodyFn({message:f}){return JSON.stringify({client:l.client,data:f.data,date:f.date.getTime(),level:f.level,scope:f.scope,variables:f.variables})},processErrorFn({error:f}){a.processMessage({data:[`electron-log: can't POST ${l.url}`,f],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:f,requestOptions:c,body:u}){const m=(f.startsWith("https:")?t:e).request(f,{method:"POST",...c,headers:{"Content-Type":"application/json","Content-Length":u.length,...c.headers}});return m.write(u),m.end(),m}});function l(f){if(!l.url)return;const c=l.makeBodyFn({logger:a,message:{...f,data:r({logger:a,message:f,transport:l})},transport:l}),u=l.sendRequestFn({serverUrl:l.url,requestOptions:l.requestOptions,body:Buffer.from(c,"utf8")});u.on("error",h=>l.processErrorFn({error:h,logger:a,message:f,request:u,transport:l}))}}return bo}var To,cc;function Pf(){if(cc)return To;cc=1;const e=Cf(),t=yS(),r=ES(),n=vS(),i=SS(),o=AS(),s=bS();To=a;function a({dependencies:l,initializeFn:f}){var u;const c=new e({dependencies:l,errorHandler:new t,eventLogger:new r,initializeFn:f,isDev:(u=l.externalApi)==null?void 0:u.isDev(),logId:"default",transportFactories:{console:n,file:i,ipc:o,remote:s},variables:{processType:"main"}});return c.default=c,c.Logger=e,c.processInternalErrorFn=h=>{c.transports.console.writeFn({message:{data:["Unhandled electron-log error",h],level:"error"}})},c}return To}var Co,uc;function TS(){if(uc)return Co;uc=1;const e=se,t=mS(),{initialize:r}=gS(),n=Pf(),i=new t({electron:e}),o=n({dependencies:{externalApi:i},initializeFn:r});Co=o,i.onIpc("__ELECTRON_LOG__",(a,l)=>{l.scope&&o.Logger.getInstance(l).scope(l.scope);const f=new Date(l.date);s({...l,date:f.getTime()?f:new Date})}),i.onIpcInvoke("__ELECTRON_LOG__",(a,{cmd:l="",logId:f})=>{switch(l){case"getOptions":return{levels:o.Logger.getInstance({logId:f}).levels,logId:f};default:return s({data:[`Unknown cmd '${l}'`],level:"error"}),{}}});function s(a){var l;(l=o.Logger.getInstance(a))==null||l.processMessage(a)}return Co}var $o,fc;function CS(){if(fc)return $o;fc=1;const e=$f(),t=Pf(),r=new e;return $o=t({dependencies:{externalApi:r}}),$o}const $S=typeof process>"u"||process.type==="renderer"||process.type==="worker",OS=typeof process=="object"&&process.type==="browser";$S?(Tf(),Rn.exports=hS()):OS?Rn.exports=TS():Rn.exports=CS();var IS=Rn.exports;const qe=Md(IS);qe.transports.file.resolvePath=()=>Zt.join(se.app.getPath("userData"),"logs/main.log");qe.info("App starting...");process.platform==="win32"&&se.app.setAppUserModelId(se.app.getName());se.app.requestSingleInstanceLock()||(se.app.quit(),process.exit(0));process.env.DIST=Zt.join(__dirname,"../dist");process.env.VITE_PUBLIC=se.app.isPackaged?process.env.DIST:Zt.join(process.env.DIST,"../public");let te=null;const dc=process.env.VITE_DEV_SERVER_URL;function Rf(){te=new se.BrowserWindow({icon:Zt.join(process.env.VITE_PUBLIC||"","something"),width:800,height:600,webPreferences:{preload:Zt.join(__dirname,"preload.js")}}),se.app.isPackaged&&(Xe.autoUpdater.logger=qe,Xe.autoUpdater.autoDownload=!1,Xe.autoUpdater.checkForUpdatesAndNotify().catch(e=>{qe.error("Error checking for updates",e)}),Xe.autoUpdater.on("update-available",e=>{qe.info("Update available:",e),te==null||te.webContents.send("update-available",e)}),Xe.autoUpdater.on("download-progress",e=>{qe.info("Download progress:",e),te==null||te.webContents.send("download-progress",e)}),Xe.autoUpdater.on("update-downloaded",e=>{qe.info("Update downloaded:",e),te==null||te.webContents.send("update-downloaded",e)}),Xe.autoUpdater.on("error",e=>{qe.error("Error in auto-updater:",e);const t=(e==null?void 0:e.message)??JSON.stringify(e??"Unknown update error");te==null||te.webContents.send("update-error",`Update Error: ${t}`)}),se.ipcMain.on("start-download",()=>{qe.info("User initiated download"),Xe.autoUpdater.downloadUpdate().catch(e=>{qe.error("Error starting download:",e);const t=(e==null?void 0:e.message)??JSON.stringify(e??"Unknown download error");te==null||te.webContents.send("update-error",`Error starting download: ${t}`)})}),se.ipcMain.on("quit-and-install",()=>{qe.info("User initiated quit and install"),setImmediate(()=>{Xe.autoUpdater.quitAndInstall(!0,!0)})})),te.webContents.on("did-finish-load",()=>{te==null||te.webContents.send("main-process-message",new Date().toLocaleString())}),dc?(te.loadURL(dc),te.webContents.openDevTools()):te.loadFile(Zt.join(process.env.DIST||"","index.html")),te.on("closed",()=>{te=null})}se.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(se.app.quit(),te=null)});se.app.on("activate",()=>{se.BrowserWindow.getAllWindows().length===0&&Rf()});se.app.whenReady().then(Rf);
